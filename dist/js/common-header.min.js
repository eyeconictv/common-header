!function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("app-nav-buttons-menu.html",'<ul><li class="new-app"><a href="https://apps.risevision.com/editor" target="_blank" link-cid=""><div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/editor-image.png"></div><span>Presentations</span></a></li><li class="new-app"><a href="https://apps.risevision.com/schedules" target="_blank" link-cid=""><div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/schedule-image.png"></div><span>Schedules</span></a></li><li class="new-app"><a href="https://apps.risevision.com/displays" target="_blank" link-cid=""><div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/displays-image.png"></div><span>Displays</span></a></li><li><a href="https://apps.risevision.com/storage" target="_blank" link-cid=""><div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/storage-image.png"></div><span>Storage</span></a></li><li><a href="#" class="old-app" classic-editor-link=""><div class="image"><img src="https://s3.amazonaws.com/Rise-Images/landing-page/editor-image-gray.png"></div><span>Classic Editor</span></a></li></ul>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("app-nav-buttons.html",'<li dropdown="" class="dropdown hidden-xs"><button dropdown-toggle="" class="dropdown-toggle btn btn-link"><i class="fa fa-lg fa-th"></i></button><div class="dropdown-menu app-navigation" role="menu"><ng-include replace-include="" src="\'app-nav-buttons-menu.html\'"></ng-include></div></li><li class="visible-xs-inline-block"><a href="" class="company-buttons-icon-mobile" action-sheet="\'app-nav-buttons-menu.html\'" action-sheet-class="app-navigation"><i class="fa fa-th"></i></a></li>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("auth-buttons-menu.html",'<company-buttons ng-show="isRiseVisionUser" ng-controller="CompanyButtonsCtrl"></company-buttons><ul><li ng-show="isRiseVisionUser"><a href="" ng-click="alertSettings()" class="alert-settings-button action"><i class="fa fa-bullhorn"></i> <span class="item-name">Alert Settings</span></a></li><li ng-show="isRiseVisionUser"><a href="" ng-click="userSettings()" class="user-settings-button action"><i class="fa fa-user"></i> <span class="item-name">User Settings</span></a></li><li ng-show="isRiseVisionUser"><a href="https://store.risevision.com/account" target="_blank" class="store-account-button action" link-cid="" ng-show="!isChargebee()"><i class="fa fa-shopping-cart"></i> <span class="item-name">Account & Billing</span></a> <a ui-sref="apps.billing.home" class="store-account-button action" ng-show="isChargebee() && isApps()"><i class="fa fa-shopping-cart"></i> <span class="item-name">Account & Billing</span></a> <a href="https://apps.risevision.com/billing" target="_blank" class="store-account-button action" link-cid="" ng-show="isChargebee() && !isApps()"><i class="fa fa-shopping-cart"></i> <span class="item-name">Account & Billing</span></a></li><span ng-if="isLoggedIn && !isRiseVisionUser" class="google-account">{{username}}</span><li class="dropdown-footer text-right" ng-show="isLoggedIn"><button class="sign-out-button btn btn-sm btn-default u_margin-sm-bottom" ng-controller="SignOutButtonCtrl" ng-click="logout()">Sign Out<i class="fa fa-sign-out icon-right"></i></button></li></ul>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("auth-buttons.html",'<li ng-show="isLoggedIn && !isRiseVisionUser && !loading"><button type="button" ng-controller="RegisterButtonCtrl" ng-click="register()" class="btn btn-danger register-user-menu-button">Complete Registration</button></li><li dropdown="" class="dropdown user-profile-dropdown desktop-menu-item" ng-class="{\'hidden-xs\': isLoggedIn}" ng-show="isLoggedIn"><a href="" dropdown-toggle="" class="dropdown-toggle"><div class="user-id pull-left"><span ng-class="{\'pending-registration\' : isLoggedIn && !isRiseVisionUser && !loading}" class="username">{{username}}</span> <span><strong>{{companyName}}</strong></span></div><img ng-src="{{userPicture}}" class="profile-pic" width="30" height="30" alt="User"></a><div class="dropdown-menu" role="menu"><ng-include src="\'auth-buttons-menu.html\'" replace-include=""></ng-include></div></li><li dropdown="" class="dropdown user-profile-dropdown mobile-menu-item" ng-class="{\'visible-xs-inline-block\': isLoggedIn}" ng-show="isLoggedIn"><a href="" dropdown-toggle="" class="visible-xs dropdown-toggle" action-sheet="\'auth-buttons-menu.html\'" action-sheet-class="user-profile-dropdown"><div class="user-id"><span>{{username}}</span> <span><strong>{{companyName}}</strong></span></div></a></li><li ng-show="!undetermined && isLoggedIn === false"><button type="button" class="btn-primary btn u_margin-right" ng-click="login(\'registrationComplete\', true)">Sign Up Free</button></li><li ng-show="!undetermined && isLoggedIn === false"><button type="button" class="sign-in top-auth-button" ng-click="login(\'registrationComplete\')">Sign In</button></li>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("close-frame-button.html",'<li class="close-frame"><a href="" class="close-frame-button" ng-click="closeIFrame()"><i class="fa fa-times"></i></a></li>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("common-header.html",'<div id="commonHeaderDiv" ng-hide="hideCommonHeader"><ng-include replace-include="" ng-controller="PlanBannerCtrl" src="\'plan-banner.html\'"></ng-include><nav class="navbar navbar-default hidden-print" ng-class="{\'active-banner\': isSubcompanySelected() || isTestCompanySelected()}" role="navigation"><div class="navbar-header"><a class="navbar-brand visible-md visible-lg" href="http://www.risevision.com/" target="{{newTabHome ? \'_blank\' : \'_self\'}}" ng-if="!inRVAFrame"><img src="//s3.amazonaws.com/Rise-Images/UI/logo.svg" class="img-responsive logo-small" width="113" height="42" alt="Rise Vision"></a> <a class="navbar-brand hidden-md hidden-lg text-center" href="" off-canvas-toggle=""><i class="fa fa-bars"></i></a><div class="navbar-left visible-xs visible-sm" ng-if="ENV_NAME"><ul class="nav navbar-nav"><li class="env-name-nav-item"><span class="env-name-label">{{ENV_NAME}}</span></li></ul></div><div class="navbar-collapse navbar-left hidden-xs hidden-sm"><ul class="nav navbar-nav"><li class="env-name-nav-item visible-md visible-lg" ng-if="ENV_NAME"><span class="env-name-label">{{ENV_NAME}}</span></li><li ng-repeat="opt in navOptions"><a ng-if="opt.cid" ng-href="{{opt.link}}" link-cid="" target="{{opt.target}}" ng-class="{\'selected\': opt.states && opt.states.indexOf(navSelected) > -1}">{{opt.title}}</a> <a ng-if="!opt.cid" ng-href="{{opt.link}}" target="{{opt.target}}" ng-class="{\'selected\': opt.states && opt.states.indexOf(navSelected) > -1}">{{opt.title}}</a></li><li ng-if="!inRVAFrame && !hideHelpMenu"><a href="http://www.risevision.com/help/" target="_blank">Help</a></li></ul></div><ul class="nav navbar-nav navbar-right actions-nav pull-right"><ng-include replace-include="" ng-controller="ZendeskButtonCtrl" src="\'zendesk-button.html\'"></ng-include><ng-include replace-include="" ng-if="inRVAFrame" ng-controller="CloseFrameButtonCtrl" src="\'close-frame-button.html\'"></ng-include><ng-include ng-if="!inRVAFrame" replace-include="" src="\'app-nav-buttons.html\'"></ng-include><ng-include replace-include="" ng-if="!inRVAFrame" ng-controller="AuthButtonsCtr" src="\'auth-buttons.html\'"></ng-include><li ng-if="inRVAFrame" ng-controller="AuthButtonsCtr"></li></ul></div><ng-include replace-include="" ng-controller="TestCompanyBannerCtrl" src="\'test-company-banner.html\'"></ng-include><ng-include replace-include="" ng-controller="SubcompanyBannerCtrl" src="\'subcompany-banner.html\'"></ng-include></nav><ng-include replace-include="" ng-controller="GlobalAlertsCtrl" src="\'global-alerts.html\'"></ng-include><nav class="off-canvas-nav" off-canvas-nav=""><ul class="nav nav-pills nav-stacked"><li off-canvas-toggle=""><i class="fa fa-times fa-2x pull-right"></i> <img src="//s3.amazonaws.com/rise-common/images/logo-small.png" class="img-responsive logo-small" width="113" height="42" alt="Rise Vision"></li><li ng-repeat="opt in navOptions"><a ng-if="opt.cid" ng-href="{{opt.link}}" link-cid="" target="{{opt.target}}">{{opt.title}}</a> <a ng-if="!opt.cid" ng-href="{{opt.link}}" target="{{opt.target}}">{{opt.title}}</a></li><li ng-if="!hideHelpMenu"><a target="_blank" href="http://www.risevision.com/help">Help</a></li></ul></nav></div><div ng-show="cookieEnabled === false" class="bg-warning text-center u_padding-sm"><small><strong>Cookies Are Disabled.</strong> Rise Vision needs to use cookies to properly function. Please enable Cookies and Third-Party Cookies on your web browser and refresh this page.</small></div><iframe name="logoutFrame" id="logoutFrame" style="display:none"></iframe>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("company-buttons-menu.html",'<ul><li class="dropdown-header" ng-show="!isSubcompanySelected"><p>{{username}}</p><p><strong>{{selectedCompanyName}}</strong> <span class="text-muted" ng-show="isRiseVisionUser && !isSubcompanySelected">|</span> <a id="select-subcompany-button" href="" ng-click="switchCompany()" ng-show="isRiseVisionUser && !isSubcompanySelected">Select Sub-Company</a></p></li><li class="dropdown-header sub-company-header" ng-show="isSubcompanySelected"><p>You are in Sub-Company <strong>{{selectedCompanyName}}</strong> <span class="text-muted">|</span> <a id="change-subcompany-button" href="" ng-click="switchCompany()" ng-show="isRiseVisionUser">Change</a></p><p><a id="reset-subcompany-button" href="" ng-click="resetCompany()">Switch to My Company</a></p></li><hr><li ng-show="isUserAdmin || isRiseAdmin"><a href="" ng-click="addSubCompany()" class="action add-subcompany-menu-button"><i class="fa fa-plus"></i> <span class="item-name">Add Sub-Company</span></a></li><li ng-show="isUserAdmin || isRiseAdmin"><a href="" ng-click="companySettingsFactory.openCompanySettings()" class="action company-settings-menu-button"><i class="fa fa-building"></i> <span class="item-name">Company Settings</span></a></li><li ng-show="isUserAdmin || isRiseAdmin"><a href="" data-toggle="modal" ng-click="companyUsers()" class="action company-users-menu-button"><i class="fa fa-users"></i> <span class="item-name">Company Users</span></a></li></ul>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("company-fields.html",'<div class="form-group" ng-class="{\'has-error\': forms.companyForm.name.$invalid && !forms.companyForm.name.$pristine}"><label for="company-settings-name">Company Name *</label> <input required="" id="company-settings-name" type="text" class="form-control" ng-model="company.name" name="name"><p ng-show="forms.companyForm.name.$invalid && !forms.companyForm.name.$pristine" class="help-block validation-error-message-name">Company Name is required.</p></div><div class="row"><div class="col-md-6"><div class="form-group"><label for="company-size" class="control-label">Company Size</label><select id="company-size" class="form-control" ng-model="company.companySize"><option value="" ng-show="false">&lt; Select Size &gt;</option><option ng-repeat="size in COMPANY_SIZE_FIELDS" value="{{size[1]}}">{{size[0]}}</option></select></div></div><div class="col-md-6"><div class="form-group"><label for="company-industry" class="control-label">Industry</label><select id="company-industry" class="form-control selectpicker" ng-model="company.companyIndustry"><option value="" ng-show="false">&lt; Select Industry &gt;</option><option ng-repeat="industry in COMPANY_INDUSTRY_FIELDS | orderBy:industry[0]" value="{{industry[1]}}">{{industry[0]}}</option></select></div></div></div><div class="row"><div class="col-md-6"><div class="form-group"><label for="company-settings-street" class="control-label">Street</label> <input id="company-settings-street" type="text" class="form-control" ng-model="company.street"></div></div><div class="col-md-6"><div class="form-group"><label for="company-settings-unit" class="control-label">Unit</label> <input id="company-settings-unit" type="text" class="form-control" ng-model="company.unit"></div></div></div><div class="row"><div class="col-md-3"><div class="form-group"><label for="company-settings-city" class="control-label">City</label> <input id="company-settings-city" type="text" class="form-control" ng-model="company.city"></div></div><div class="col-md-3"><div class="form-group"><label for="company-settings-country" class="control-label">Country</label><select id="company-settings-country" class="form-control selectpicker" ng-model="company.country" ng-options="c.code as c.name for c in countries" empty-select-parser=""><option ng-show="false" value="">&lt; Select Country &gt;</option></select></div></div><div class="col-md-3"><div class="form-group"><label for="company-settings-state" class="control-label">State/Province/Region</label> <input id="company-settings-state" type="text" class="form-control" ng-model="company.province" ng-hide="company.country == \'US\' || company.country == \'CA\'"><select class="form-control selectpicker" ng-model="company.province" ng-options="c[1] as c[0] for c in regionsCA" ng-show="company.country == \'CA\'" empty-select-parser=""><option ng-show="false" value="">&lt; Select Province &gt;</option></select><select class="form-control selectpicker" ng-model="company.province" ng-options="c[1] as c[0] for c in regionsUS" ng-show="company.country == \'US\'" empty-select-parser=""><option ng-show="false" value="">&lt; Select State &gt;</option></select></div></div><div class="col-md-3"><div class="form-group"><label for="company-settings-zip" class="control-label">ZIP/Postal Code</label> <input id="company-settings-zip" type="text" class="form-control" ng-model="company.postalCode"></div></div></div><div class="row"><div class="col-md-6"><div class="form-group" ng-class="{\'has-error\': forms.companyForm.website.$error.website}"><label for="company-settings-website" class="control-label">Website</label> <input id="company-settings-website" name="website" type="text" placeholder="http://" class="form-control" ng-model="company.website" website-validator=""><p ng-show="forms.companyForm.website.$error.website" class="help-block validation-error-message-website">Please provide a valid URL.</p></div></div><div class="col-md-6"><div class="form-group"><label for="company-settings-phone" class="control-label">Phone Number</label> <input id="company-settings-phone" type="tel" class="form-control" ng-model="company.telephone"></div></div></div><div class="form-group"><label for="company-settings-timezone" class="control-label">Time Zone</label><select class="form-control" ng-model="company.timeZoneOffset" integer-parser=""><option ng-show="false" value="">&lt; Select Time Zone &gt;</option><option value="{{c[1]}}" ng-repeat="c in timezones">{{c[0]}}</option></select></div><div class="form-group" ng-show="company.isChargebee"><label class="form-control-label">Billing Notifications Email</label><emails-field ng-model="company.billingContactEmails"></emails-field></div>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("company-icp-modal.html",'<div id="companyIcpModal"><div class="modal-header"><h2 id="icpModalTitle" class="modal-title">Help us personalize your experience</h2></div><div class="modal-body" stop-event="touchend"><form id="forms.companyIcpForm" role="form" name="forms.companyIcpForm"><div class="form-group"><label for="company-industry" class="control-label">Tell us your Industry to help us make your Display look great *</label><select id="company-industry" name="companyIndustry" class="form-control selectpicker" ng-model="company.companyIndustry" aria-required="true" tabindex="1" autofocus="" required=""><option value="" ng-show="false">&lt; Select Industry &gt;</option><option ng-repeat="industry in DROPDOWN_INDUSTRY_FIELDS | orderBy:industry[0]" value="{{industry[1]}}">{{industry[0]}}</option></select></div><newsletter-signup ng-model="user.mailSyncEnabled" company-industry="company.companyIndustry"></newsletter-signup></form></div><div class="modal-footer"><button id="saveButton" type="submit" class="btn btn-primary btn-lg btn-block ng-binding" aria-label="Apply" tabindex="1" form="forms.companyIcpForm" ng-click="save()" ng-disabled="forms.companyIcpForm.$invalid">Apply <i class="fa fa-check icon-right"></i></button></div></div>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("company-selector-modal.html",'<form role="form"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()"><i class="fa fa-times"></i></button><h2 id="switch-company" class="modal-title">Select Sub-Company</h2></div><div class="modal-body select-subcompany-modal" stop-event="touchend"><div id="errorBox" ng-show="companies.apiError" class="alert alert-danger" role="alert"><strong>{{companies.errorMessage}}</strong> {{companies.apiError}}</div><search-filter filter-config="filterConfig" search="search" do-search="companies.doSearch"></search-filter><div class="panel panel-default scrollable-list u_margin-sm-top" scrolling-list="companies.load()" rv-spinner="" rv-spinner-key="company-selector-modal-list" rv-spinner-start-active="1"><div class="list-group-item" ng-repeat="company in companies.items.list" ng-click="setCompany(company)"><p class="list-group-item-text"><strong>{{company.name}}</strong><br><small class="text-muted">{{company | fullAddress}}</small></p></div></div></div><div class="modal-footer"><button type="button" class="btn btn-default btn-fixed-width" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()">Cancel <i class="fa fa-white fa-times icon-right"></i></button></div></form>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("company-settings-modal.html",'<div rv-spinner="" rv-spinner-key="company-settings-modal" rv-spinner-start-active="1"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()"><i class="fa fa-times"></i></button><h2 id="company-settings-label" class="modal-title">Company Settings</h2></div><div class="modal-body company-settings-modal" stop-event="touchend"><form id="companyForm" role="form" name="forms.companyForm" novalidate=""><div id="errorBox" class="alert alert-danger" role="alert" ng-show="formError"><strong>{{formError}}</strong> {{apiError}}</div><div ng-include="\'company-fields.html\'"></div><div class="form-group"><label>Authentication Key</label> <a class="action-link ps-reset-auth-key" href="" ng-click="resetAuthKey()">Reset</a><div class="ps-auth-key">{{company.authKey}}</div></div><div class="form-group"><label>Claim ID</label> <a class="action-link ps-reset-claim-id" href="" ng-click="resetClaimId()">Reset</a><div class="ps-claim-id">{{company.claimId}}</div></div><div class="form-group" ng-hide="true"><label>Sub-Company Home Page Presentation</label> <a class="action-link" href="" ng-click="showSelector()">Select</a> <a class="action-link" href="">Default</a><div id="presentation-name">Rise Vision Default (ID=a6789044-ae4a-48c7-b6fd-b5d4ffea2f24)</div><div class="presentation-selector" ng-show="isSelectorVisible"><div class="panel panel-default"><ul class="list-unstyled selector-header"><li ng-class="{active : selected == \'list\'}"><a href="" ng-click="showPresentationView($event, \'list\')">Search Presentations</a></li><li ng-class="{active : selected == \'search\'}"><a href="" ng-click="showPresentationView($event, \'search\')">Enter Presentation ID</a></li><li class="close-button"><button type="button" class="close" aria-hidden="true" ng-click="closeSelector()"><i class="fa fa-times"></i></button></li></ul><div class="panel-body"><div class="presentation-list" ng-show="selected == \'list\'"><div class="input-group search"><input type="text" class="form-control" placeholder="Search Presentations"> <span class="input-group-btn"><button class="btn btn-primary" type="submit"><i class="fa fa-search fa-white"></i></button></span></div><div class="list-group scrollable-list"><a href="" class="list-group-item" ng-click="setPresentation($event, \'Demo Presentation\')">Demo Presentation</a> <a href="" class="list-group-item" ng-click="setPresentation($event, \'My First Presentation\')">My First Presentation</a></div></div><div class="presentation-search" ng-show="selected == \'search\'"><form role="form"><div class="form-group"><input id="presentation-id" type="text" class="form-control" placeholder="Enter Presentation ID"></div><div class="form-group"><a href="" ng-click="setPresentation($event)">Retrieve Presentation</a></div></form></div></div></div></div></div><div class="form-group" ng-hide="true"><label for="company-settings-community-url">Sub-Company Community URL</label> <a class="action-link" href="">Default</a> <input id="company-settings-community-url" type="url" class="form-control"></div><div class="form-group" ng-hide="true"><label for="company-settings-support-url">Sub-Company Support URL</label> <a class="action-link" href="">Default</a> <input id="company-settings-support-url" type="url" class="form-control"></div><div class="checkbox" ng-if="isRiseStoreAdmin"><label><input type="checkbox" ng-model="company.isSeller"> Registered Seller</label></div><div class="checkbox" ng-if="isRiseStoreAdmin"><label><input type="checkbox" ng-model="company.isTest"> Test Company</label></div><div class="checkbox" ng-if="isRiseStoreAdmin"><label class="form-control-label"><input type="checkbox" ng-model="company.shareCompanyPlan"> Share Company Plan</label></div><div class="form-group" ng-hide="true"><label for="company-settings-status">Status</label><select id="company-settings-status" class="form-control selectpicker"><option value="active">Active</option><option value="inactive">Inactive</option></select></div></form></div><div class="modal-footer"><p class="visible-xs text-right"><last-modified change-date="company.changeDate" changed-by="company.changedBy"></last-modified></p><button type="button" id="delete-button" class="btn btn-danger btn-fixed-width pull-left" ng-show="!isDeletingCompany" ng-click="deleteCompany()">Delete <i class="fa fa-white fa-trash-o icon-right"></i></button> <button type="button" class="btn btn-danger btn-confirm-delete" data-dismiss="modal" ng-show="isDeletingCompany" ng-click="closeModal()">Confirm Deletion <i class="fa fa-white fa-warning icon-right"></i></button><div class="pull-right"><span class="hidden-xs"><last-modified change-date="company.changeDate" changed-by="company.changedBy"></last-modified></span> <button type="button" id="save-button" class="btn btn-primary btn-fixed-width" ng-click="save()" ng-disabled="forms.companyForm.$invalid">Save <i class="fa fa-white fa-check icon-right"></i></button> <button type="button" id="close-button" class="btn btn-default btn-fixed-width" data-dismiss="modal" ng-click="closeModal()">Cancel <i class="fa fa-white fa-times icon-right"></i></button></div></div></div>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("company-users-modal.html",'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()"><i class="fa fa-times"></i></button><h2 id="company-users-label" class="modal-title">Company Users</h2></div><div class="modal-body company-users-modal" stop-event="touchend"><div id="errorBox" ng-show="users.apiError" class="alert alert-danger" role="alert"><strong>{{users.errorMessage}}</strong> {{users.apiError}}</div><search-filter filter-config="filterConfig" search="search" do-search="users.doSearch"></search-filter><div class="panel panel-default scrollable-list company-users-list u_margin-sm-top" scrolling-list="users.load()" rv-spinner="" rv-spinner-key="company-users-list" rv-spinner-start-active="1"><div class="list-group-item company-users-list-item" ng-repeat="user in users.items.list | orderBy:sort.field:sort.descending | filter:userSearchString" ng-click="editUser(user.username)"><p class="list-group-item-text"><strong>{{user.firstName}} {{user.lastName}}</strong> <small class="text-muted">{{user.email}}</small></p></div></div></div><div class="modal-footer"><button type="button" class="btn btn-success add-company-user-button" ng-click="addUser()">Add User <i class="fa fa-white fa-plus icon-right"></i></button> <button type="button" class="btn btn-default close-company-users-button" data-dismiss="modal" ng-click="closeModal()">Cancel <i class="fa fa-white fa-times icon-right"></i></button></div>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("emails-field.html",'<tags-input type="email" placeholder="Add an email" class="email-tags" ng-model="emailsList" add-on-enter="true" add-on-space="true" add-on-comma="true" add-on-blur="true" add-on-paste="true" on-tag-adding="isValidEmail($tag)" on-tag-removing="canRemove()" on-tag-added="updateModel()" on-tag-removed="updateModel()" on-invalid-tag="invalidateModel()"></tags-input>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("global-alerts.html",'<div class="container"><div class="row"><div class="col-md-12"><div class="alert alert-danger" role="alert" ng-repeat="msg in errors"><span ng-bind-html="msg"></span> <button type="button" class="close pull-right" ng-click="dismiss(\'errors\', $index);"><i class="fa fa-times"></i></button></div></div></div></div>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("move-company-modal.html",'<div rv-spinner="" rv-spinner-key="move-company-modal" rv-spinner-start-active="1"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()"><i class="fa fa-times"></i></button><h2 id="move-company-label" class="modal-title">Move Company</h2></div><div class="modal-body move-company-modal" stop-event="touchend"><form role="form"><div class="form-group"><label for="auth-key">Enter the Authentication Key of the Company that you want to move.</label><div class="row"><div class="col-sm-6"><input id="auth-key" type="text" class="form-control" ng-model="company.authKey"></div><div class="col-sm-6"><a href="" class="btn btn-secondary retrieve-company-details-button" ng-disabled="!company.authKey" ng-click="getCompany()">Retrieve Company Details</a></div></div></div></form><div ng-show="company.name" class="company-details-info"><h3>Details of the Company You Want to Move</h3><div>{{company.name}}<br>{{company.address}} {{company.city}}, {{company.province}}, {{company.country}} {{company.postalCode}}</div><h3>Details of the Company You Are Moving the Above Company Under</h3><div class="to-company">{{selectedCompany.name}}<br>{{selectedCompany.address}}<br>{{selectedCompany.city}}, {{selectedCompany.province}}, {{selectedCompany.country}} {{selectedCompany.postalCode}}</div></div><div ng-show="errors.length > 0"><div class="alert alert-danger" ng-repeat="error in errors">{{error}}</div></div><div ng-show="messages.length > 0"><div class="alert alert-success" ng-repeat="message in messages">{{message}}</div></div></div><div class="modal-footer"><button type="button" class="btn btn-success move-company-button" ng-show="company.name && !moveSuccess" ng-click="moveCompany()">Move Company <i class="fa fa-white fa-check icon-right"></i></button> <button type="button" class="btn btn-default btn-fixed-width close-move-company-button" data-dismiss="modal" ng-click="closeModal()">{{dismissButtonText}} <i class="fa fa-white fa-times icon-right"></i></button></div></div>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("newsletter-signup.html",'<div class="form-group" ng-show="showNewsletterSignup()"><div class="checkbox"><label for="receive-newsletter"><input id="receive-newsletter" name="receive-newsletter" type="checkbox" class="sign-up-newsletter-checkbox" tabindex="1" ng-model="mailSyncEnabled"> Send me an email with great Template ideas for my school each week</label></div></div>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("plan-banner.html",'<div class="hidden-xs"><div id="parent-plan-banner" class="alert p-2 mb-0 bg-success text-right" ng-show="getVisibleBanner() === \'parent\'"><div class="u_margin-right"><span class="ml-2">Subscription managed by {{plan.parentPlanCompanyName || "the Parent Company"}}</span> <a ng-if="!isApps()" class="ml-3 btn btn-xs btn-primary" href="https://apps.risevision.com/signup?show_product=true" target="_blank" link-cid="">Change Plan</a> <a ng-if="isApps()" class="ml-3 btn btn-xs btn-primary" href="#" ng-click="showPlans()">Change Plan</a></div></div><div id="parent-purchased-plan-banner" class="alert p-2 mb-0 bg-success text-right" ng-show="getVisibleBanner() === \'parentPurchased\'"><div class="u_margin-right"><span class="ml-2">Subscription managed by {{plan.parentPlanCompanyName || "the Parent Company"}}</span></div></div><div id="free-plan-banner" class="alert alert-plan plan-active text-right" ng-show="getVisibleBanner() === \'free\'"><div class="u_margin-right"><span class="font-weight-bold">Get more out of Rise Vision!</span> <a ng-if="!isApps()" class="u_margin-left" href="https://apps.risevision.com/signup?show_product=true" target="_blank" link-cid="">See Our Plans</a> <a ng-if="isApps()" class="u_margin-left" href="#" ng-click="showPlans()">See Our Plans</a></div></div><div id="cancelled-plan-banner" class="alert alert-plan plan-active text-right" ng-show="getVisibleBanner() === \'cancelled\'"><div class="u_margin-right"><span class="font-weight-bold">Your subscription expires on {{ plan.currentPeriodEndDate | date : \'d-MMM-yyyy\'}}</span> <a ng-hide="isChargebee" class="ml-3 btn btn-xs btn-primary" href="{{storeAccountUrl}}" target="_blank" link-cid="">Account Settings</a> <a ng-show="isChargebee" ng-if="!isApps()" class="ml-3 btn btn-xs btn-primary" href="https://apps.risevision.com/billing" target="_blank" link-cid="">Account Settings</a> <a ng-show="isChargebee" ng-if="isApps()" class="ml-3 btn btn-xs btn-primary" ui-sref="apps.billing.home">Account Settings</a></div></div><div id="trial-plan-banner" class="alert alert-plan plan-active text-right" ng-show="getVisibleBanner() === \'trial\'"><div class="u_margin-right"><span class="font-weight-bold">You have {{plan.trialPeriod}} days left on your trial!</span> <a ng-show="!isEnterpriseSubCompany()" ng-if="!isApps()" class="ml-3 btn btn-xs btn-primary" href="https://apps.risevision.com/signup?show_product=true" target="_blank" link-cid="">Subscribe Now</a> <a ng-show="!isEnterpriseSubCompany()" ng-if="isApps()" class="ml-3 btn btn-xs btn-primary" href="#" ng-click="showPlans()">Subscribe Now</a></div></div><div class="alert alert-plan plan-suspended text-center" ng-show="getVisibleBanner() === \'expired\'"><div class="u_margin-right"><span class="font-weight-bold" ng-show="!plan.playerProTotalLicenseCount">Your trial has expired! You are now on the Free Plan. Your Displays are no longer Licensed.</span> <span class="font-weight-bold" ng-show="plan.playerProTotalLicenseCount">Your trial has expired! You are now on the Free Plan. Some of your Displays are no longer Licensed.</span> <a ng-show="!isEnterpriseSubCompany()" ng-if="!isApps()" class="ml-3 btn btn-xs btn-primary" href="https://apps.risevision.com/signup?show_product=true" target="_blank" link-cid="">Subscribe Now</a> <a ng-show="!isEnterpriseSubCompany()" ng-if="isApps()" class="ml-3 btn btn-xs btn-primary" href="#" ng-click="showPlans()">Subscribe Now</a></div></div><div class="alert alert-plan plan-suspended text-center" ng-show="getVisibleBanner() === \'suspended\'"><div class="u_margin-right"><span class="font-weight-bold">There was an issue processing your payment. Please update your billing information. Your Displays may be affected.</span> <a ng-hide="isChargebee" class="ml-3 btn btn-xs btn-primary" href="{{storeAccountUrl}}" target="_blank" link-cid="">Update Billing</a> <a ng-show="isChargebee" ng-if="!isApps()" class="ml-3 btn btn-xs btn-primary" href="https://apps.risevision.com/billing" target="_blank" link-cid="">Update Billing</a> <a ng-show="isChargebee" ng-if="isApps()" class="ml-3 btn btn-xs btn-primary" ui-sref="apps.billing.home">Update Billing</a></div></div></div>');
}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("registration-modal.html",'<div rv-spinner="" rv-spinner-key="registration-modal" rv-spinner-start-active="1"><div class="modal-header"><h2 class="modal-title">One last step!</h2></div><div id="registration-modal" class="modal-body" stop-event="touchend"><form id="forms.registrationForm" novalidate="" role="form" name="forms.registrationForm" autocomplete="on"><div class="row"><div class="col-xs-12">Help us personalize your experience.</div></div><div class="row"><div class="col-xs-12 u_margin-md-top"><div class="form-group" ng-class="{ \'has-error\' : forms.registrationForm.firstName.$invalid && !forms.registrationForm.firstName.$pristine }"><label for="firstName">First name *</label> <input type="text" class="form-control firstName" name="firstName" id="firstName" autocomplete="fname" aria-required="true" tabindex="1" ng-model="profile.firstName" autofocus="" required=""><p ng-show="forms.registrationForm.firstName.$invalid && !forms.registrationForm.firstName.$pristine" class="help-block validation-error-message-first-name">Enter first name.</p></div><div class="form-group" ng-class="{ \'has-error\' : forms.registrationForm.lastName.$invalid && !forms.registrationForm.lastName.$pristine }"><label for="lastName">Last name *</label> <input type="text" class="form-control lastName" name="lastName" id="lastName" autocomplete="lname" aria-required="true" tabindex="1" ng-model="profile.lastName" required=""><p ng-show="forms.registrationForm.lastName.$invalid && !forms.registrationForm.lastName.$pristine" class="help-block validation-error-message-last-name">Enter last name.</p></div><div class="form-group" ng-class="{\'has-error\': forms.registrationForm.companyName.$invalid && !forms.registrationForm.companyName.$pristine}" ng-show="newUser"><label for="companyName">Organization *</label> <input type="text" class="form-control companyName" name="companyName" id="companyName" tabindex="1" aria-required="true" ng-model="company.name" ng-required="newUser"><p ng-show="forms.registrationForm.companyName.$invalid && !forms.registrationForm.companyName.$pristine" class="help-block validation-error-message-company-name">Enter organization.</p></div><div class="form-group"><label for="phoneNumber">Phone Number</label> <input type="tel" class="form-control" name="phoneNumber" id="phoneNumber" tabindex="1" ng-model="profile.telephone"></div><div class="form-group" ng-class="{\'has-error\': forms.registrationForm.companyIndustry.$invalid && !forms.registrationForm.companyIndustry.$pristine}" ng-show="newUser"><label for="companyIndustry">Tell us your Industry to help us make your Display look great *</label><select class="form-control selectpicker companyIndustry" name="companyIndustry" id="companyIndustry" tabindex="1" aria-required="true" ng-model="company.companyIndustry" ng-required="newUser"><option value="" ng-show="false">&lt; Select Industry &gt;</option><option class="companyIndustryOption" ng-repeat="industry in DROPDOWN_INDUSTRY_FIELDS | orderBy:industry[0]" value="{{industry[1]}}">{{industry[0]}}</option></select><p ng-show="forms.registrationForm.companyIndustry.$invalid && !forms.registrationForm.companyIndustry.$pristine" class="help-block validation-error-message-company-industry">Select an Industry.</p></div><newsletter-signup ng-model="profile.mailSyncEnabled" company-industry="company.companyIndustry"></newsletter-signup><div class="form-group"><div class="checkbox" ng-class="{ \'has-error\' : forms.registrationForm.accepted.$invalid && !userForm.accepted.$pristine }"><label for="accepted"><input type="checkbox" id="accepted" name="accepted" class="accept-terms-checkbox" ng-model="profile.accepted" tabindex="1" required=""> <span>I accept the <a href="https://help.risevision.com/hc/en-us/articles/360000924446-Terms-of-Service" target="_blank" tabindex="1">Terms of Service</a> and <a href="https://help.risevision.com/hc/en-us/articles/360000915023-Privacy-Policy" target="_blank" tabindex="1">Privacy Policy</a> *</span><p class="help-block validation-error-message-accepted" ng-show="forms.registrationForm.accepted.$invalid && !forms.registrationForm.accepted.$pristine">You must accept the terms and conditions.</p></label></div></div></div></div></form></div><div class="modal-footer"><div class="row"><div class="col-xs-12 u_margin-sm-top"><button id="createAccount" type="submit" aria-label="Create Account" tabindex="1" form="forms.registrationForm" class="btn btn-lg btn-success btn-block registration-save-button" ng-click="save()" ng-disabled="registering">Create Account <i class="fa fa-white fa-check icon-right"></i></button></div></div></div></div>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("safe-delete-modal.html",'<form id="safeDeleteForm"><div class="modal-header"><button type="button" class="close" ng-click="dismiss()" data-dismiss="modal" aria-hidden="true"><i class="fa fa-times"></i></button><h3 class="modal-title" translate="">common.safeDelete.title</h3></div><div class="modal-body" stop-event="touchend"><p translate="">common.safeDelete.message</p><input id="safeDeleteInput" type="text" ng-model="inputText" class="form-control"></div><div class="modal-footer"><button id="deleteForeverButton" class="btn btn-primary" ng-click="confirm()" ng-disabled="!canConfirm"><span translate="">common.delete-forever</span> <i class="fa fa-white fa-check icon-right"></i></button> <button class="btn btn-default btn-fixed-width" ng-click="cancel()"><span translate="">common.cancel</span> <i class="fa fa-white fa-times icon-right"></i></button></div></form>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("signout-modal.html",'<div class="modal-header"><button type="button" class="close" ng-click="closeModal()" aria-hidden="true"><i class="fa fa-times"></i></button><h2 id="sign-out-label" class="modal-title">Sign Out</h2></div><div class="modal-body sign-out-modal" stop-event="touchend"><form role="form"><p>Signing out does not sign you out of your Google Account.</p><p>If you are on a shared computer you should sign out of your Google Account.</p><p><button type="button" class="btn btn-default sign-out-rv-only-button" ng-click="signOut(false)">Sign Out <i class="fa fa-sign-out fa-lg icon-right"></i></button></p><button type="button" class="btn btn-default sign-out-google-account" ng-click="signOut(true)">Sign Out of your Google Account <i class="fa fa-google-plus-square fa-lg icon-right"></i></button><p></p></form></div>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("subcompany-banner.html",'<div ng-show="isSubcompanySelected && !inRVAFrame" class="common-header-alert sub-company-alert hidden-xs">You\'re in Sub-Company {{selectedCompanyName}}&nbsp; <a href="" ng-click="switchToMyCompany()" class="link-button">Switch to My Company</a></div><div ng-show="isSubcompanySelected && !inRVAFrame" class="common-header-alert sub-company-alert visible-xs"><a href="" ng-click="switchToMyCompany()" class="link-button">My Company</a> <span class="sub-company-name">Sub-Company {{selectedCompanyName}}</span> <span>&nbsp;</span></div>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("subcompany-modal.html",'<div rv-spinner="" rv-spinner-key="add-subcompany-modal" rv-spinner-start-active="1"><div class="modal-header"><button type="button" class="close" ng-click="closeModal()" aria-hidden="true"><i class="fa fa-times"></i></button><h2 id="sub-company-label" class="modal-title">Add Sub-Company</h2></div><div class="modal-body add-subcompany-modal" stop-event="touchend"><form role="form" name="forms.companyForm" novalidate=""><div ng-include="\'company-fields.html\'"></div><div class="form-group"><a href="" data-dismiss="modal" data-toggle="modal" class="move-subcompany-button" ng-click="moveCompany()">Move a Company Under Your Company</a></div></form></div><div class="modal-footer"><button type="button" class="btn btn-success btn-fixed-width add-subcompany-save-button" ng-click="save()" ng-disabled="forms.companyForm.$invalid">Save <i class="fa fa-white fa-check icon-right"></i></button> <button type="button" class="btn btn-default btn-fixed-width cancel-add-subcompany-button" ng-click="closeModal()">Cancel <i class="fa fa-white fa-times icon-right"></i></button></div></div>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("test-company-banner.html",'<div ng-show="isTestCompanySelected" class="sub-company-alert test-company-alert">This is a Test Company</div>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("user-settings-modal.html",'<div rv-spinner="spinnerOptions" rv-spinner-key="user-settings-modal" rv-spinner-start-active="1"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeModal()"><i class="fa fa-times"></i></button><h2 id="user-settings-label" class="modal-title"><span ng-if="!isAdd">User Settings</span> <span ng-if="isAdd">Add User</span></h2></div><div class="modal-body user-settings-modal" stop-event="touchend"><div ng-if="isAdd" class="alert alert-info">A Google account is no longer required by users being added to your Company. Any email address can be used!</div><form id="forms.userSettingsForm" role="form" novalidate="" name="forms.userSettingsForm"><div id="passwordAlert" class="animated" ng-if="editingYourself && !isAdd" ng-show="!isRiseAuthUser && showChangePassword" ng-class="{ \'fadeIn\': showChangePassword }"><div class="panel-body bg-info u_margin-sm-bottom"><p class="u_remove-bottom"><span>This account is authenticated by Google.<br><a href="https://myaccount.google.com/security#signin" target="_blank">Change your password on your Google account.</a></span></p></div></div><div class="form-group" ng-class="{ \'has-error\' : forms.userSettingsForm.username.$invalid && (!forms.userSettingsForm.username.$pristine || forms.userSettingsForm.$submitted) }" ng-if="isAdd"><label>Username *</label> <input id="user-settings-username" type="email" required="" name="username" class="form-control" ng-model="user.username"><p ng-show="forms.userSettingsForm.username.$invalid && (!forms.userSettingsForm.username.$pristine || forms.userSettingsForm.$submitted)" class="help-block validation-error-message-email">User name must be a valid email address.</p></div><div class="row" ng-if="!isAdd"><div class="col-xs-6"><div class="form-group"><label>Username *</label><div><span id="user-settings-username-label">{{user.username}}</span></div></div></div><div class="col-xs-6 text-right"><span ng-if="editingYourself && isUserAdmin"><a href="" class="btn btn-default btn-sm change-password" ng-click="toggleChangePassword()">Change password</a></span></div></div><div id="passwordForm" class="animated" ng-if="editingYourself && !isAdd && isRiseAuthUser && showChangePassword" ng-class="{ \'fadeIn\': showChangePassword }"><div class="form-group" ng-class="{ \'has-error\' : (forms.resetPasswordForm.$submitted && forms.resetPasswordForm.newPassword.$invalid) || currentPasswordNotValid }"><label for="user-settings-current-password">Current Password *</label> <input id="user-settings-current-password" type="password" name="currentPassword" class="form-control" ng-model="userPassword.currentPassword" required=""><p class="text-danger" ng-show="forms.userSettingsForm.$submitted && forms.userSettingsForm.currentPassword.$error.required">Current Password is required.</p><p ng-show="currentPasswordNotValid" class="help-block validation-error-message-mail">Current Password is not valid.</p></div><div class="form-group" ng-class="{ \'has-error\' : (forms.resetPasswordForm.$submitted && forms.resetPasswordForm.newPassword.$invalid) }"><label for="user-settings-new-password">New Password *</label> <input id="user-settings-new-password" type="password" name="newPassword" class="form-control" ng-model="userPassword.newPassword" required="" minlength="4"><p class="text-danger" ng-show="forms.userSettingsForm.$submitted && forms.userSettingsForm.newPassword.$error.required">New Password is required.</p><p class="text-danger" ng-show="forms.userSettingsForm.$submitted && forms.userSettingsForm.newPassword.$error.minlength">New Password must be at least 4 characters long.</p><p class="text-warning" ng-show="forms.userSettingsForm.newPassword.$valid">A strong password is at least 8 characters, includes uppercase/lowercase letters, and one or more numbers.</p></div><div class="form-group" ng-class="{ \'has-error\' : (forms.resetPasswordForm.$submitted && forms.resetPasswordForm.confirmPassword.$invalid) }"><label for="user-settings-confirm-password">Confirm Password *</label> <input id="user-settings-confirm-password" type="password" name="confirmPassword" class="form-control" ng-model="userPassword.confirmPassword" required="" confirm-password-validator="userPassword.newPassword"><p ng-show="forms.userSettingsForm.$submitted && forms.userSettingsForm.confirmPassword.$error.required" class="text-danger">Confirm Password is required.</p><p ng-show="forms.userSettingsForm.$submitted && forms.userSettingsForm.confirmPassword.$error.passwordMatch" class="text-danger">New Password and Confirm Password must match.</p><hr></div></div><div class="form-group" ng-class="{ \'has-error\' : forms.userSettingsForm.firstName.$invalid && (!forms.userSettingsForm.firstName.$pristine || forms.userSettingsForm.$submitted) }"><label for="user-settings-first-name">First Name *</label> <input id="user-settings-first-name" type="text" required="" name="firstName" class="form-control" ng-model="user.firstName"><p ng-show="forms.userSettingsForm.firstName.$invalid && (!forms.userSettingsForm.firstName.$pristine || forms.userSettingsForm.$submitted)" class="help-block validation-error-message-firstName">First Name is required.</p></div><div class="form-group" ng-class="{ \'has-error\' : forms.userSettingsForm.lastName.$invalid && (!forms.userSettingsForm.lastName.$pristine || forms.userSettingsForm.$submitted) }"><label for="user-settings-last-name">Last Name *</label> <input id="user-settings-last-name" type="text" required="" name="lastName" class="form-control" ng-model="user.lastName"><p ng-show="forms.userSettingsForm.lastName.$invalid && (!forms.userSettingsForm.lastName.$pristine || forms.userSettingsForm.$submitted)" class="help-block validation-error-message-lastName">Last Name is required.</p></div><div class="form-group"><label for="company-role">Company Role</label><select id="company-role" class="form-control selectpicker" ng-model="user.companyRole"><option value="" ng-show="false">&lt; Select Role &gt;</option><option ng-repeat="role in COMPANY_ROLE_FIELDS" value="{{role[1]}}">{{role[0]}}</option></select></div><div class="form-group"><label for="user-settings-phone">Phone Number</label> <input id="user-settings-phone" type="tel" name="phone" class="form-control" ng-model="user.telephone"></div><div class="form-group" ng-class="{ \'has-error\' : forms.userSettingsForm.email.$invalid && (!forms.userSettingsForm.email.$pristine || forms.userSettingsForm.$submitted) }"><label for="user-settings-email">Email *</label> <input id="user-settings-email" type="email" required="" name="email" class="form-control" ng-model="user.email"><p ng-show="forms.userSettingsForm.email.$invalid && (!forms.userSettingsForm.email.$pristine || forms.userSettingsForm.$submitted)" class="help-block validation-error-message-email">A valid email address is required.</p></div><div class="form-group"><label>Roles</label><div class="checkbox" ng-repeat="role in availableRoles" ng-show="editRoleVisible(role)"><label><input type="checkbox" id="user-settings-{{role.key}}" checklist-model="user.roles" ng-disabled="!editRoleAllowed(role)" checklist-value="role.key"> {{role.name}}</label></div></div><div class="form-group" ng-if="user.lastLogin"><label>Last Login</label><div>{{user.lastLogin | date:\'d-MMM-yyyy h:mm a\'}}</div></div><div class="form-group" ng-if="!editingYourself && !isAdd"><label for="user-settings-status">Status</label><select id="user-settings-status" class="form-control selectpicker" ng-model="user.status" integer-parser=""><option value="1">Active</option><option value="0">Inactive</option></select></div></form></div><div class="modal-footer"><p class="text-right"><last-modified change-date="user.changeDate" changed-by="user.changedBy"></last-modified></p><button type="button" id="delete-button" class="btn btn-danger btn-fixed-width pull-left" ng-if="!isAdd && isUserAdmin" ng-click="deleteUser()">Delete <i class="fa fa-white fa-trash-o icon-right"></i></button><div class="pull-right"><button type="submit" form="forms.userSettingsForm" class="btn btn-primary btn-fixed-width" data-dismiss="modal" ng-click="save()" id="save-button" ng-if="isUserAdmin">Save <i class="fa fa-white fa-check icon-right"></i></button> <button type="button" class="btn btn-default btn-fixed-width" ng-click="closeModal()">Cancel <i class="fa fa-white fa-times icon-right"></i></button></div></div></div>')}])}(),function(e){try{e=angular.module("risevision.common.header.templates")}catch(t){e=angular.module("risevision.common.header.templates",[])}e.run(["$templateCache",function(e){e.put("zendesk-button.html",'<li dropdown="" class="dropdown hidden-xs"><button id="zendeskHelpButton" class="btn btn-primary" ng-click="showZendeskWidget()"><i><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewbox="0 0 22 22"><path d="M11,12.3V13c0,0-1.8,0-2,0v-0.6c0-0.6,0.1-1.4,0.8-2.1c0.7-0.7,1.6-1.2,1.6-2.1c0-0.9-0.7-1.4-1.4-1.4 c-1.3,0-1.4,1.4-1.5,1.7H6.6C6.6,7.1,7.2,5,10,5c2.4,0,3.4,1.6,3.4,3C13.4,10.4,11,10.8,11,12.3z" fill="white"></path><circle cx="10" cy="15" r="1" fill="white"></circle><path d="M10,2c4.4,0,8,3.6,8,8s-3.6,8-8,8s-8-3.6-8-8S5.6,2,10,2 M10,0C4.5,0,0,4.5,0,10s4.5,10,10,10s10-4.5,10-10S15.5,0,10,0 L10,0z" fill="white"></path></svg></i> <span class="hidden-sm hidden-xs hidden-md">Help</span></button></li><li class="visible-xs-inline-block"><button class="btn btn-primary" ng-click="showZendeskWidget()"><i><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewbox="0 0 22 22"><path d="M11,12.3V13c0,0-1.8,0-2,0v-0.6c0-0.6,0.1-1.4,0.8-2.1c0.7-0.7,1.6-1.2,1.6-2.1c0-0.9-0.7-1.4-1.4-1.4 c-1.3,0-1.4,1.4-1.5,1.7H6.6C6.6,7.1,7.2,5,10,5c2.4,0,3.4,1.6,3.4,3C13.4,10.4,11,10.8,11,12.3z" fill="white"></path><circle cx="10" cy="15" r="1" fill="white"></circle><path d="M10,2c4.4,0,8,3.6,8,8s-3.6,8-8,8s-8-3.6-8-8S5.6,2,10,2 M10,0C4.5,0,0,4.5,0,10s4.5,10,10,10s10-4.5,10-10S15.5,0,10,0 L10,0z" fill="white"></path></svg></i></button></li>')}])}(),angular.module("risevision.common.header",["ui.router","risevision.common.account","risevision.common.gapi","risevision.common.config","risevision.core.cache","risevision.core.company","risevision.common.cookie","risevision.common.header.templates","risevision.common.header.directives","risevision.common.header.filters","risevision.common.header.services","risevision.common.i18n","risevision.core.countries","risevision.core.oauth2","risevision.store.authorization","risevision.store.services","risevision.common.geodata","risevision.store.data-gadgets","risevision.core.userprofile","risevision.common.registration","checklist-model","ui.bootstrap","ngSanitize","ngCsv","ngTouch","ngTagsInput","risevision.common.components.userstate","risevision.common.components.last-modified","risevision.common.components.loading","risevision.common.components.search-filter","risevision.common.components.scrolling-list","risevision.common.components.stop-event","risevision.common.components.analytics","risevision.common.components.message-box","risevision.common.components.svg","risevision.common.components.subscription-status","risevision.common.components.plans","risevision.common.components.purchase-flow","risevision.common.support"]).factory("bindToScopeWithWatch",[function(){return function(e,t,n){n.$watch(function(){return e.call()},function(e){n[t]=e})}}]).value("ENV_NAME","").run(["$rootScope","$document","$modalStack",function(e,t,n){t[0]&&t[0].querySelectorAll&&e.$watch(function(){return t[0].querySelectorAll(".modal").length},function(e){var o=n.getTop();e>0&&o&&(t[0].querySelectorAll(".modal").forEach(function(e){if("static"!==o.value.backdrop){e.addEventListener("mousedown",function(e){var t=1;e.which===t&&n.getTop().key.dismiss()});var t=e.querySelector(".modal-content");t&&t.addEventListener("mousedown",function(e){e.stopPropagation()})}}),o.value.backdrop="static")})}]).directive("commonHeader",["$rootScope","$q","$loading","$interval","oauth2APILoader","$log","$templateCache","userState","$location","bindToScopeWithWatch","$document","cookieTester","companyIcpFactory","ENV_NAME",function(e,t,n,o,r,s,a,i,c,l,u,d,m,p){return{restrict:"E",template:a.get("common-header.html"),scope:!1,link:function(t,n,o){m.init(),d.checkCookies().then(function(){t.cookieEnabled=!0},function(){t.cookieEnabled=!1}),t.navCollapsed=!0,t.inRVAFrame=i.inRVAFrame(),t.isSubcompanySelected=i.isSubcompanySelected,t.isTestCompanySelected=i.isTestCompanySelected,t.ENV_NAME=p,t[o.navOptions]||(t.navOptions=[{title:"Home",link:"#/"},{title:"Account",link:""},{title:"Sellers",link:""},{title:"Platform",link:"http://rva.risevision.com/",target:"_blank"}]),t.hideHelpMenu="0"!==o.hideHelpMenu&&"false"!==o.hideHelpMenu,e.redirectToRoot="0"!==o.redirectToRoot&&"false"!==o.redirectToRoot,e.newTabHome="0"!==o.newTabHome&&"false"!==o.newTabHome,l(i.isRiseVisionUser,"isRiseVisionUser",t),e.$on("$stateChangeSuccess",function(){t.inRVAFrame&&c.search("inRVA",t.inRVAFrame)});var r=u[0].createElement("meta");r.id="viewport",r.name="viewport",r.content="width=device-width, initial-scale=1, user-scalable=no",u[0].getElementsByTagName("head")[0].appendChild(r)}}}]).run(["segmentAnalytics","SEGMENT_API_KEY","analyticsEvents","$document",function(e,t,n,o){n.initialize(),e.load(t),o.on("keydown",function(e){var t=!1;if(8===e.keyCode){var n=e.srcElement||e.target;t=("INPUT"!==n.tagName.toUpperCase()||"TEXT"!==n.type.toUpperCase()&&"PASSWORD"!==n.type.toUpperCase()&&"FILE"!==n.type.toUpperCase()&&"SEARCH"!==n.type.toUpperCase()&&"EMAIL"!==n.type.toUpperCase()&&"NUMBER"!==n.type.toUpperCase()&&"DATE"!==n.type.toUpperCase()&&"TEL"!==n.type.toUpperCase()&&"URL"!==n.type.toUpperCase())&&"TEXTAREA"!==n.tagName.toUpperCase()||(n.readOnly||n.disabled)}t&&e.preventDefault()})}]).directive("ngEnter",function(){return function(e,t,n){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(n.ngEnter)}),t.preventDefault())})}}).directive("ngDisableRightClick",function(){return function(e,t){t.bind("contextmenu",function(t){e.$apply(function(){t.preventDefault()})})}}),angular.module("risevision.common.header.directives",[]),angular.module("risevision.common.header.filters",[]),angular.module("risevision.common.header.services",[]),angular.module("risevision.store.services",[]),angular.module("risevision.common.header.directives").constant("CLASSIC_EDITOR_URL","https://rva.risevision.com/#PRESENTATIONS").directive("classicEditorLink",["$window","userState","CLASSIC_EDITOR_URL",function(e,t,n){return{restrict:"A",scope:!1,compile:function(o){o.bind("click",function(){var o=t.getSelectedCompanyId(),r=n+(o?"?cid="+o:"");e.open(r,"_blank")})}}}]),angular.module("risevision.common.header.directives").directive("commonHeaderHeight",["$window","$timeout",function(e,t){return{restrict:"A",scope:!0,link:function(n,o){var r=function(){t(function(){var t=e.document.getElementById("commonHeaderDiv"),n=e.getComputedStyle(t),r=n.getPropertyValue("height"),s=parseInt(r);o[0].style.setProperty("--common-header-height",s+"px")})};r(),n.$on("risevision.company.selectedCompanyChanged",r),n.$on("risevision.company.updated",r)}}}]),angular.module("risevision.common.header.directives").directive("companyButtons",["$templateCache",function(e){return{restrict:"E",scope:!1,replace:!0,template:e.get("company-buttons-menu.html"),link:function(){}}}]),angular.module("risevision.common.header.directives").value("EMAIL_REGEX",/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/).directive("emailsField",["$templateCache","$timeout","EMAIL_REGEX",function(e,t,n){return{restrict:"E",require:"ngModel",scope:{emails:"=ngModel"},template:e.get("emails-field.html"),link:function(e,o,r,s){function a(e){var t=o[0].querySelector(e);return angular.element(t)}function i(){return e.emailsList.map(function(e){return e.text})}function c(e){u=!e,s.$setValidity("emails",e)}var l=!1,u=!1;t(function(){var n=a("tags-input > div > div > input"),o=a("tags-input > div > div > span");n.keyup(function(){t(function(){"Add an email"===o.text()&&(c(!0),e.$digest())})})}),e.$watch("emails",function(){l||(e.emailsList=_.uniq(e.emails).map(function(e){return{text:e}})),l=!1}),e.updateModel=function(){c(!0),l=!0,e.emails=i()},e.invalidateModel=function(){c(!1)},e.canRemove=function(){return!u},e.isValidEmail=function(e){return!!(e&&e.text&&n.test(e.text)&&i().indexOf(e.text)===-1)}}}}]),angular.module("risevision.common.header.directives").directive("emptySelectParser",[function(){return{require:"ngModel",link:function(e,t,n,o){o.$parsers.unshift(function(e){return null===e?"":e})}}}]),angular.module("risevision.common.header.directives").directive("fastpass",["loadFastpass","userState",function(e,t){return{restrict:"AE",scope:{},link:function(n){n.$watch(function(){return t.getUserEmail()},function(n){n&&e(t.getUsername(),t.getUserEmail())})}}}]),angular.module("risevision.common.header.directives").directive("integerParser",[function(){return{require:"ngModel",link:function(e,t,n,o){o.$parsers.push(function(e){return parseInt(e,10)||0}),o.$formatters.push(function(e){return"undefined"==typeof e?"":""+e})}}}]),angular.module("risevision.common.header.directives").directive("linkCid",["userState",function(e){return{link:function(t,n,o){var r="",s=function(e){var t,n=o.href.indexOf("cid=");t=n>-1?o.href.substring(0,n+4)+e:o.href+(o.href.indexOf("?")===-1?"?":"&")+"cid="+e,r=e,o.$set("href",t)};t.$watch(function(){return e.getSelectedCompanyId()},function(e){e&&e!==r&&s(e)})}}}]),angular.module("risevision.common.header.directives").directive("newsletterSignup",["$templateCache",function(e){return{restrict:"E",require:"ngModel",scope:{mailSyncEnabled:"=ngModel",companyIndustry:"="},template:e.get("newsletter-signup.html"),link:function(e){e.showNewsletterSignup=function(){return"PRIMARY_SECONDARY_EDUCATION"===e.companyIndustry||"HIGHER_EDUCATION"===e.companyIndustry}}}}]),angular.module("risevision.common.header.directives").directive("requireRole",["userState",function(e){return{restrict:"A",priority:1e5,scope:!1,compile:function(t,n){var o=!0,r=n.requireRole.split(" ");for(var s in r)e.hasRole(r[s])&&(o=!1);o&&(angular.forEach(t.children(),function(e){try{e.remove()}catch(t){}}),t.remove())}}}]),angular.module("risevision.common.header.directives").directive("websiteValidator",[function(){return{require:"ngModel",restrict:"A",link:function(e,t,n,o){var r=/^(http[s]?:\/\/){0,1}([^\s\/?\.#:@"]+\.)+([^\s\/?\.#:"@-]{2,61})([\/?#][^\s"]*)?$/,s=function(e){return!e||r.test(e)?o.$setValidity("website",!0):o.$setValidity("website",!1),e};o.$parsers.unshift(s),o.$formatters.unshift(s)}}}]),angular.module("risevision.common.header.filters").filter("surpressZero",function(){return function(e){return e?e:""}}),angular.module("risevision.common.header").controller("AuthButtonsCtr",["$scope","$modal","$templateCache","userState","userAuthFactory","canAccessApps","$loading","cookieStore","$log","uiFlowManager","oauth2APILoader","bindToScopeWithWatch","$window","APPS_URL",function(e,t,n,o,r,s,a,i,c,l,u,d,m,p){window.$loading=a,e.inRVAFrame=o.inRVAFrame(),e.spinnerOptions={color:"#999",hwaccel:!0,radius:10},e.$on("risevision.user.signedOut",function(){i.remove("surpressRegistration")}),e.$on("risevision.uiStatus.validationCancelled",function(){i.remove("surpressRegistration")}),e.$watch(function(){return l.isStatusUndetermined()},function(t){e.undetermined=t,e.loading=t}),e.$watch(function(){return l.getStatus()},function(r,s){r&&(c.debug("status changed from",s,"to",r),"registeredAsRiseVisionUser"===r?(!o.registrationModalInstance&&o.isLoggedIn()&&(o.registrationModalInstance=t.open({template:n.get("registration-modal.html"),controller:"RegistrationModalCtrl",backdrop:"static",keyboard:!1,resolve:{account:["getUserProfile","getAccount",function(e,t){return e(o.getUsername()).then(null,function(e){return e&&"User has not yet accepted the Terms of Service"===e.message?t():null})["catch"](function(){return null})}]}})),o.registrationModalInstance.result["finally"](function(){o.registrationModalInstance=null,l.invalidateStatus()})):"signedInWithGoogle"===r&&e.login())}),e.$watch(function(){return o.isLoggedIn()},function(t){e.isLoggedIn=t,t===!0&&(e.userPicture=o.getUserPicture())}),e.$watch(function(){return o.getUserCompanyName()},function(){e.companyName=o.getUserCompanyName()}),e.$watch(function(){return o.getUsername()},function(){e.username=o.getUsername()}),d(o.isRiseVisionUser,"isRiseVisionUser",e),e.login=function(e,t){a.startGlobal("auth-buttons-login"),s(t,!0)["finally"](function(){a.stopGlobal("auth-buttons-login"),l.invalidateStatus(e)})},e.alertSettings=function(){var e=p+"/alerts?cid="+o.getSelectedCompanyId();m.location.href=e},e.userSettings=function(e){t.open({template:n.get("user-settings-modal.html"),controller:"UserSettingsModalCtrl",size:e,resolve:{username:function(){return o.getUsername()},add:function(){return!1}}})},e.isChargebee=function(){return o.isSelectedCompanyChargebee()},e.isApps=function(){return""===p||m.location.href.startsWith(p)},a.startGlobal("auth-buttons-silent"),u().then()["finally"](function(){r.authenticate(!1).then()["finally"](function(){a.stopGlobal("auth-buttons-silent"),l.isStatusUndetermined()||l.invalidateStatus("registrationComplete")})})}]),angular.module("risevision.common.header").controller("CloseFrameButtonCtrl",["$scope","$log","gadgetsService",function(e,t,n){e.closeIFrame=function(){t.debug("gadgetsService.closeIFrame"),n.closeIFrame()}}]),angular.module("risevision.common.header").controller("CompanyButtonsCtrl",["$scope","$modal","$templateCache","userState","getCoreCountries","companySettingsFactory",function(e,t,n,o,r,s){e.inRVAFrame=o.inRVAFrame(),e.companySettingsFactory=s,e.$watch(function(){return o.isSubcompanySelected()},function(){e.isSubcompanySelected=o.isSubcompanySelected()}),e.$watch(function(){return o.getSelectedCompanyName()},function(t){t&&(e.selectedCompanyName=o.getSelectedCompanyName())}),e.$watch(function(){return o.isRiseVisionUser()},function(t){e.isRiseVisionUser=t,t===!0&&(e.isUserAdmin=o.isUserAdmin(),e.isPurchaser=o.isPurchaser())}),e.$watch(function(){return o.isRiseAdmin()},function(t){e.isRiseVisionAdmin=t}),e.addSubCompany=function(){t.open({template:n.get("subcompany-modal.html"),controller:"SubCompanyModalCtrl",size:"lg",resolve:{countries:function(){return r()}}})},e.companyUsers=function(e){t.open({template:n.get("company-users-modal.html"),
controller:"CompanyUsersModalCtrl",size:e,backdrop:!0,resolve:{company:function(){return o.getCopyOfSelectedCompany()}}})},e.switchCompany=function(){var e=t.open({template:n.get("company-selector-modal.html"),controller:"companySelectorCtr",backdrop:!0,resolve:{companyId:function(){return o.getSelectedCompanyId()}}});e.result.then(o.switchCompany)},e.moveCompany=function(e){t.open({template:n.get("move-company-modal.html"),controller:"MoveCompanyModalCtrl",size:e})},e.resetCompany=function(){o.resetCompany()}}]),angular.module("risevision.common.header").controller("CompanyIcpModalCtrl",["$scope","$modalInstance","company","user","COMPANY_INDUSTRY_FIELDS",function(e,t,n,o,r){e.company=n,e.user=o,e.DROPDOWN_INDUSTRY_FIELDS=r,e.save=function(){t.close({user:o,company:n})},e.selectIndustry=function(e){n.companyIndustry!==e?n.companyIndustry=e:n.companyIndustry=""}}]),angular.module("risevision.common.header").controller("CompanySettingsModalCtrl",["$scope","$modalInstance","updateCompany","companyId","countries","REGIONS_CA","REGIONS_US","TIMEZONES","getCompany","regenerateCompanyField","$window","$loading","humanReadableError","userState","userAuthFactory","deleteCompany","segmentAnalytics","$modal","$templateCache","COMPANY_INDUSTRY_FIELDS","COMPANY_SIZE_FIELDS","addressFactory",function(e,t,n,o,r,s,a,i,c,l,u,d,m,p,g,f,h,v,y,b,C,w){function S(t){e.isRiseStoreAdmin?t.sellerId=t.isSeller?"yes":null:(delete t.sellerId,delete t.isTest,delete t.shareCompanyPlan)}function A(){e.formError=null,e.apiError=null}function E(t,n){e.formError="Failed to "+t+" Company.",e.apiError=m(n)}e.company={id:o},e.countries=r,e.regionsCA=s,e.regionsUS=a,e.timezones=i,e.COMPANY_INDUSTRY_FIELDS=b,e.COMPANY_SIZE_FIELDS=C,e.isRiseStoreAdmin=p.isRiseStoreAdmin(),A(),e.$watch("loading",function(e){e?d.start("company-settings-modal"):d.stop("company-settings-modal")}),e.loading=!1,e.forms={},o&&(e.loading=!0,c(o).then(function(t){e.company=t,e.company.isSeller=!(!t||!t.sellerId),e.company.isChargebee=t&&"Chargebee"===t.origin},function(e){E("load",e)})["finally"](function(){e.loading=!1})),e.closeModal=function(){t.dismiss("cancel")},e.save=function(){e.loading=!0,A(),w.isValidOrEmptyAddress(e.company).then(function(){var o=angular.copy(e.company);return S(o),n(e.company.id,o).then(function(){h.track("Company Updated",{companyId:p.getSelectedCompanyId(),companyName:p.getSelectedCompanyName(),isUserCompany:!p.isSubcompanySelected()}),p.updateCompanySettings(e.company),t.close("success")})["catch"](function(e){E("update",e)})})["catch"](function(t){e.formError="We couldn't update your address.",e.apiError=m(t)})["finally"](function(){e.loading=!1})},e.deleteCompany=function(){A();var n=v.open({template:y.get("safe-delete-modal.html"),controller:"SafeDeleteModalCtrl"});n.result.then(function(){e.loading=!0,f(e.company.id).then(function(){h.track("Company Deleted",{companyId:p.getSelectedCompanyId(),companyName:p.getSelectedCompanyName(),isUserCompany:!p.isSubcompanySelected()}),p.getUserCompanyId()===e.company.id?g.signOut():p.getSelectedCompanyId()===e.company.id&&p.resetCompany(),t.close("success")})["catch"](function(e){E("delete",e)})["finally"](function(){e.loading=!1})})},e.resetAuthKey=function(){A(),u.confirm("Resetting the Company Authentication Key will cause existing Data Gadgets to no longer report data until they are updated with the new Key.")&&(d.start("company-settings-modal"),l(e.company.id,"authKey").then(function(t){e.company.authKey=t.item,u.alert("Successfully changed Authentication Key.")},function(e){E("update",e)})["finally"](function(){d.stop("company-settings-modal")}))},e.resetClaimId=function(){A(),u.confirm("Resetting the Company Claim Id will cause existing installations to no longer be associated with your Company.")&&(d.start("company-settings-modal"),l(e.company.id,"claimId").then(function(t){e.company.claimId=t.item,u.alert("Successfully changed Claim ID.")},function(e){E("update",e)})["finally"](function(){d.stop("company-settings-modal")}))}}]),angular.module("risevision.common.header").filter("roleLabel",["userRoleMap",function(e){return function(t){return e[t]}}]).controller("CompanyUsersModalCtrl",["$scope","$loading","$modalInstance","$modal","$templateCache","ScrollingListService","company","getUsers",function(e,t,n,o,r,s,a,i){e.search={companyId:a.id,sortBy:"username",reverse:!1,name:"Users"},e.users=new s(i,e.search),e.filterConfig={placeholder:"Search Users"},e.$watch("users.loadingItems",function(e){e?t.start("company-users-list"):t.stop("company-users-list")}),e.addUser=function(t){var n=o.open({template:r.get("user-settings-modal.html"),controller:"AddUserModalCtrl",size:t,resolve:{companyId:function(){return a.id}}});n.result["finally"](e.users.doSearch)},e.editUser=function(t,n){var s=o.open({template:r.get("user-settings-modal.html"),controller:"UserSettingsModalCtrl",size:n,resolve:{username:function(){return t},add:function(){return!1}}});s.result["finally"](e.users.doSearch)},e.closeModal=function(){n.dismiss("cancel")}}]),angular.module("risevision.common.header").controller("GlobalAlertsCtrl",["$scope","$rootScope",function(e,t){e.errors=[],e.$on("risevision.user.authorized",function(){e.errors.length=0}),t.$on("risevision.common.globalError",function(t,n){e.errors.push(n)}),e.dismiss=function(t,n){e[t].splice(n,1)}}]),angular.module("risevision.common.header").controller("MoveCompanyModalCtrl",["$scope","$modalInstance","moveCompany","lookupCompany","userState","$loading",function(e,t,n,o,r,s){e.company={},e.errors=[],e.messages=[],e.$watch("loading",function(e){e?s.start("move-company-modal"):s.stop("move-company-modal")}),e.selectedCompany=r.getCopyOfSelectedCompany(),e.closeModal=function(){t.dismiss("cancel")},e.moveCompany=function(){e.messages=[],e.loading=!0,n(e.company.authKey,r.getSelectedCompanyId()).then(function(){e.messages.push("Success. The company has been moved under your company."),e.moveSuccess=!0},function(t){e.errors.push("Error: "+JSON.stringify(t))})["finally"](function(){e.loading=!1})},e.getCompany=function(){e.errors=[],e.messages=[],e.loading=!0,o(e.company.authKey).then(function(t){angular.extend(e.company,t)},function(t){e.errors.push("Failed to retrieve company. "+t.message)})["finally"](function(){e.loading=!1})},e.$watch("moveSuccess",function(t){t?e.dismissButtonText="Close":e.dismissButtonText="Cancel"})}]),angular.module("risevision.common.header").controller("PlanBannerCtrl",["$scope","$rootScope","$window","userState","plansFactory","currentPlanFactory","STORE_URL","ACCOUNT_PATH","APPS_URL",function(e,t,n,o,r,s,a,i,c){e.plan={},e.showPlans=r.showPlansModal,e.storeAccountUrl=a+i,t.$on("risevision.plan.loaded",function(){e.plan=s.currentPlan,e.isChargebee=o.isSelectedCompanyChargebee()}),e.isEnterpriseSubCompany=s.isEnterpriseSubCompany,e.getVisibleBanner=function(){var e="free";return s.isParentPlan()?e="parent":s.currentPlan.isPurchasedByParent?e="parentPurchased":s.isCancelledActive()?e="cancelled":s.isFree()&&s.isCancelled()?e="free":s.isSubscribed()?e="subscribed":s.isOnTrial()?e="trial":s.isTrialExpired()?e="expired":s.isSuspended()&&(e="suspended"),e},e.isApps=function(){return""===c||n.location.href.startsWith(c)}}]),angular.module("risevision.common.header").controller("RegisterButtonCtrl",["$scope","cookieStore","uiFlowManager",function(e,t,n){e.register=function(){t.remove("surpressRegistration"),n.invalidateStatus("registrationComplete")}}]),angular.module("risevision.common.header").controller("RegistrationModalCtrl",["$q","$scope","$rootScope","$modalInstance","$loading","registerAccount","$log","cookieStore","userState","pick","uiFlowManager","humanReadableError","agreeToTermsAndUpdateUser","account","segmentAnalytics","bigQueryLogging","analyticsEvents","updateCompany","plansFactory","COMPANY_INDUSTRY_FIELDS","urlStateService",function(e,t,n,o,r,s,a,i,c,l,u,d,m,p,g,f,h,v,y,b,C){t.newUser=!p,t.DROPDOWN_INDUSTRY_FIELDS=b;var w=p?p:c.getCopyOfProfile()||{};t.company={},i.remove("surpressRegistration"),t.profile=l(w,"email","mailSyncEnabled","firstName","lastName"),t.profile.email=t.profile.email||c.getUsername(),t.registering=!1,t.profile.accepted=angular.isDefined(w.termsAcceptanceDate)&&null!==w.termsAcceptanceDate,angular.isDefined(t.profile.mailSyncEnabled)||(t.profile.mailSyncEnabled=!1);var S=t.$watch(function(){return u.isStatusUndetermined()},function(e){e===!0?r.start("registration-modal"):e===!1&&("registrationComplete"===u.getStatus()&&(o.close("success"),S()),r.stop("registration-modal"))});t.save=function(){if(t.forms.registrationForm.accepted.$pristine=!1,t.forms.registrationForm.firstName.$pristine=!1,t.forms.registrationForm.lastName.$pristine=!1,t.forms.registrationForm.companyName.$pristine=!1,t.forms.registrationForm.companyIndustry.$pristine=!1,!t.forms.registrationForm.$invalid){t.registering=!0,r.start("registration-modal");var e;e=t.newUser?s(c.getUsername(),t.profile):m(c.getUsername(),t.profile),e.then(function(){c.refreshProfile()["finally"](function(){t.newUser&&v(c.getUserCompanyId(),t.company).then(function(){y.startVolumePlanTrial()})["finally"](function(){n.$broadcast("risevision.user.authorized"),o.close("success"),r.stop("registration-modal")}),h.identify(),g.track("User Registered",{companyId:c.getUserCompanyId(),companyName:c.getUserCompanyName(),isNewCompany:t.newUser}),f.logEvent("User Registered"),t.newUser||(n.$broadcast("risevision.user.authorized"),o.close("success"),r.stop("registration-modal"))})},function(e){alert("Error: "+d(e)),console.error(e)})["finally"](function(){t.registering=!1,c.refreshProfile()})}};var A=function(){var e=C.getUrlParam("industry");t.newUser&&e&&b.forEach(function(n){e===n[0]&&(t.company.companyIndustry=n[1])})};A(),t.forms={}}]),angular.module("risevision.common.header").controller("SafeDeleteModalCtrl",["$scope","$modalInstance",function(e,t){e.inputText=null,e.canConfirm=!1,e.$watch("inputText",function(){e.canConfirm="DELETE"===e.inputText}),e.confirm=function(){e.canConfirm&&t.close()},e.cancel=function(){t.dismiss("cancel")},e.dismiss=function(){t.dismiss()}}]),angular.module("risevision.common.header").controller("SignOutButtonCtrl",["$scope","$modal","$templateCache","$log","uiFlowManager","userAuthFactory","userState",function(e,t,n,o,r,s,a){e.logout=function(){if(a.isRiseAuthUser())s.signOut().then(function(){o.debug("Custom Auth user signed out")})["catch"](function(e){o.error("Custom Auth sign out failed",e)});else{var e=t.open({template:n.get("signout-modal.html"),controller:"SignOutModalCtrl"});e.result["finally"](function(){r.invalidateStatus("registrationComplete")})}}}]),angular.module("risevision.common.header").controller("SignOutModalCtrl",["$scope","$modalInstance","$log","userAuthFactory","userState",function(e,t,n,o,r){e.isRiseAuthUser=r.isRiseAuthUser(),e.closeModal=function(){t.dismiss("cancel")},e.signOut=function(e){o.signOut(e).then(function(){n.debug("user signed out")},function(e){console.error("sign out failed",e)})["finally"](function(){t.dismiss("success")})}}]),angular.module("risevision.common.header").controller("SubcompanyBannerCtrl",["$scope","$modal","$loading","userState",function(e,t,n,o){e.inRVAFrame=o.inRVAFrame(),e.$watch(function(){return o.getSelectedCompanyId()},function(){e.isSubcompanySelected=o.isSubcompanySelected(),e.selectedCompanyName=o.getSelectedCompanyName()}),e.switchToMyCompany=function(){o.resetCompany()}}]),angular.module("risevision.common.header").controller("SubCompanyModalCtrl",["$scope","$modalInstance","$modal","$templateCache","createCompany","countries","REGIONS_CA","REGIONS_US","TIMEZONES","userState","$loading","humanReadableError","segmentAnalytics","bigQueryLogging","COMPANY_INDUSTRY_FIELDS","COMPANY_SIZE_FIELDS",function(e,t,n,o,r,s,a,i,c,l,u,d,m,p,g,f){e.company={},e.countries=s,e.regionsCA=a,e.regionsUS=i,e.timezones=c,e.COMPANY_INDUSTRY_FIELDS=g,e.COMPANY_SIZE_FIELDS=f,e.forms={},e.$watch("loading",function(e){e?u.start("add-subcompany-modal"):u.stop("add-subcompany-modal")}),e.closeModal=function(){t.dismiss("cancel")},e.save=function(){e.loading=!0,r(l.getSelectedCompanyId(),e.company).then(function(e){m.track("Company Created",{companyId:e.id,companyName:e.name}),p.logEvent("Company Created",e.name,null,l.getUsername(),e.id),t.close("success")},function(e){alert("Error: "+d(e))})["finally"](function(){e.loading=!1})},e.moveCompany=function(e){n.open({template:o.get("move-company-modal.html"),controller:"MoveCompanyModalCtrl",size:e})}}]),angular.module("risevision.common.header").controller("companySelectorCtr",["$scope","$loading","$modalInstance","companyService","companyId","ScrollingListService",function(e,t,n,o,r,s){e.search={query:""},e.search={companyId:r,sortBy:"name",reverse:!1,name:"Companies"},e.companies=new s(o.getCompanies,e.search),e.filterConfig={placeholder:"Search Companies"},e.$watch("companies.loadingItems",function(e){e?t.start("company-selector-modal-list"):t.stop("company-selector-modal-list")}),e.closeModal=function(){n.dismiss("cancel")},e.setCompany=function(e){n.close(e.id)}}]),angular.module("risevision.common.header").controller("TestCompanyBannerCtrl",["$scope","userState",function(e,t){e.$watch(function(){return t.isTestCompanySelected()},function(t){e.isTestCompanySelected=t})}]),angular.module("risevision.common.header").controller("AddUserModalCtrl",["$scope","$filter","addUser","$modalInstance","companyId","userState","userRoleMap","humanReadableError","messageBox","$loading","segmentAnalytics","COMPANY_ROLE_FIELDS",function(e,t,n,o,r,s,a,i,c,l,u,d){e.isAdd=!0,e.COMPANY_ROLE_FIELDS=d,e.isUserAdmin=s.isUserAdmin(),e.availableRoles=[],angular.forEach(a,function(t,n){e.availableRoles.push({key:n,name:t})}),e.$watch("user.status",function(t){e.user&&"string"==typeof e.user.status&&(e.user.status=parseInt(t))}),e.$watch("loading",function(e){e?l.start("user-settings-modal"):l.stop("user-settings-modal")}),e.save=function(){e.forms.userSettingsForm.$invalid||(e.loading=!0,n(r,e.user.username,e.user).then(function(){u.track("User Created",{userId:e.user.username,companyId:r}),o.close("success")},function(n){var o="Error: "+i(n);409===n.code&&(o=t("translate")("common-header.user.error.duplicate-user",{username:e.user.username})),c("common-header.user.error.add-user",o)})["finally"](function(){e.loading=!1}))},e.closeModal=function(){o.dismiss("cancel")},e.editRoleAllowed=function(e){return!!s.isRiseAdmin()||!!s.isUserAdmin()&&("sa"!==e.key&&"ba"!==e.key)},e.editRoleVisible=function(e){return(!s.isSelectedCompanyChargebee()||"pu"!==e.key)&&(s.isRiseAdmin()?!s.isSubcompanySelected()||"sa"!==e.key&&"ba"!==e.key:!(!s.isUserAdmin()&&!s.isRiseVisionUser())&&("sa"!==e.key&&"ba"!==e.key))},e.forms={}}]),angular.module("risevision.common.header").controller("UserSettingsModalCtrl",["$scope","$filter","$modalInstance","updateUser","getUserProfile","deleteUser","username","userRoleMap","$log","$loading","userState","userAuthFactory","uiFlowManager","humanReadableError","messageBox","$rootScope","segmentAnalytics","userauth","$q","COMPANY_ROLE_FIELDS",function(e,t,n,o,r,s,a,i,c,l,u,d,m,p,g,f,h,v,y,b){e.user={},e.userPassword={},e.showChangePassword=!1,e.isRiseAuthUser=u.isRiseAuthUser(),e.$watch("loading",function(e){e?l.start("user-settings-modal"):l.stop("user-settings-modal")}),e.availableRoles=[],angular.forEach(i,function(t,n){e.availableRoles.push({key:n,name:t})}),e.COMPANY_ROLE_FIELDS=b,e.$watch("user.status",function(t){"string"==typeof e.user.status&&(e.user.status=parseInt(t))}),e.isUserAdmin=u.isUserAdmin(),e.username=a,e.loading=!0,r(a).then(function(t){e.user=t,e.editingYourself=u.checkUsername(t.username)})["finally"](function(){e.loading=!1}),e.closeModal=function(){n.dismiss("cancel")},e.deleteUser=function(){confirm("Are you sure you want to delete this user?")&&s(e.username).then(function(){h.track("User Deleted",{userId:e.username,companyId:u.getSelectedCompanyId(),isSelf:u.checkUsername(a)}),u.checkUsername(a)&&d.signOut().then()["finally"](function(){m.invalidateStatus("registrationComplete")})})["finally"](function(){n.dismiss("deleted")})},e.save=function(){if(e.showChangePassword&&(e.currentPasswordNotValid=!1),e.forms.userSettingsForm.$valid){var r=y.resolve();e.loading=!0,e.showChangePassword&&(r=v.updatePassword(a,e.userPassword.currentPassword,e.userPassword.newPassword),r.then(function(){e.userPassword={},e.showChangePassword=!1})["catch"](function(t){var n=t.result.error;return 409===n.code&&(e.currentPasswordNotValid=!0,n.changePassword=!0),y.reject(n)})),r.then(function(){return o(a,e.user)}).then(function(t){u.checkUsername(a)&&u.updateUserProfile(t.item),h.track("User Updated",{userId:e.username,companyId:u.getSelectedCompanyId(),isSelf:u.checkUsername(a)}),n.close("success")})["catch"](function(n){n=n.result&&n.result.error||n,c.debug(n);var o="Error: "+p(n);409!==n.code||n.changePassword?n.changePassword&&(o=n.message):o=t("translate")("common-header.user.error.duplicate-user",{username:e.user.username}),g("common-header.user.error.update-user",o)})["finally"](function(){e.loading=!1})}},e.editRoleAllowed=function(t){return!!u.isRiseAdmin()||!!u.isUserAdmin()&&("sa"!==t.key&&"ba"!==t.key&&("ua"!==t.key||!u.checkUsername(e.user.username)))},e.editRoleVisible=function(e){return(!u.isSelectedCompanyChargebee()||"pu"!==e.key)&&(u.isRiseAdmin()?!u.isSubcompanySelected()||"sa"!==e.key&&"ba"!==e.key:!(!u.isUserAdmin()&&!u.isRiseVisionUser())&&("sa"!==e.key&&"ba"!==e.key))},e.forms={},e.toggleChangePassword=function(){e.showChangePassword=!e.showChangePassword}}]),angular.module("risevision.common.header").controller("ZendeskButtonCtrl",["$scope","zendesk",function(e,t){e.showZendeskWidget=function(){t.activateWidget()}}]),angular.module("risevision.common.header").directive("actionSheet",["$document","$compile","$timeout",function(e,t,n){return{restrict:"A",link:function(o,r,s){var a=e.find("body").eq(0),i=!1,c=document.getElementById("action-sheet-backdrop");angular.isObject(c)?c=angular.element(c):(c=angular.element('<div id="action-sheet-backdrop" class="modal-backdrop"></div>'),a.append(c)),o.templateUrl=o.$eval(s.actionSheet),o.title=o.$eval(s.title);var l=angular.element('<div class="action-sheet is-action-sheet-closed"><ng-include src="templateUrl"></ng-include></div>'),u=t(l)(o);a.append(u);var d=function(){i=!i,i?(u.toggleClass("is-action-sheet-closed"),n(function(){u.toggleClass("is-action-sheet-opened"),c.toggleClass("is-action-sheet-opened")})):(u.toggleClass("is-action-sheet-opened"),c.toggleClass("is-action-sheet-opened"),n(function(){u.toggleClass("is-action-sheet-closed")},500)),i?(c.bind("tap",d),c.bind("click",d)):(c.unbind("tap"),c.unbind("click"))};s.actionSheetClass&&s.actionSheetClass.split(" ").forEach(function(e){u.addClass(e)}),r.bind("tap",d),r.bind("click",d),l.bind("tap",d),l.bind("click",d)}}}]).directive("replaceInclude",function(){return{require:"ngInclude",restrict:"A",link:function(e,t){t.replaceWith(t.children())}}}),angular.module("risevision.common.header").service("offCanvas",["$window",function(e){var t={visible:!1,enabled:!1};return t.enabled=angular.element(e).width()<=1200,t.toggle=function(){(t.enabled||t.visible)&&(t.visible=!t.visible,t.visible?t.nav.addClass("is-off-canvas-opened"):t.nav.removeClass("is-off-canvas-opened"))},t.registerNav=function(e){t.nav=e,t.nav.addClass("off-canvas--container")},window.onresize=function(){t.enabled=angular.element(e).width()<=1200},t}]).directive("offCanvasNav",["offCanvas",function(e){return{restrict:"A",link:function(t,n){n.addClass("off-canvas--nav"),e.registerNav(n),n.bind("tap",e.toggle),n.bind("click",e.toggle)}}}]).directive("offCanvasToggle",["offCanvas",function(e){return{restrict:"A",link:function(t,n){var o=function(t){e.toggle(),t.stopPropagation()};n.bind("tap",o),n.bind("click",o)}}}]),function(e){"use strict";e.module("risevision.common.account",["risevision.common.gapi","risevision.core.userprofile","risevision.core.cache"]).factory("agreeToTerms",["$q","riseAPILoader","$log","userInfoCache",function(e,t,n,o){return function(){n.debug("agreeToTerms called.");var r=e.defer();return t().then(function(e){var t=e.account.agreeToTerms();t.execute(function(e){n.debug("agreeToTerms resp",e),o.removeAll(),e.error?r.reject(e.error):r.resolve()})}),r.promise}}]).factory("agreeToTermsAndUpdateUser",["$q","$log","agreeToTerms","updateUser",function(e,t,n,o){return function(r,s){t.debug("registerAccount called.",r,s);var a=e.defer();return n().then()["finally"](function(){o(r,s).then(function(e){e.result?a.resolve():a.reject()},a.reject)["finally"]("registerAccount ended")}),a.promise}}]).factory("registerAccount",["$q","$log","addAccount","updateUser",function(e,t,n,o){return function(r,s){t.debug("registerAccount called.",r,s);var a=e.defer();return n().then()["finally"](function(){o(r,s).then(function(e){e.result?a.resolve():a.reject()},a.reject)["finally"]("registerAccount ended")}),a.promise}}]).factory("addAccount",["$q","riseAPILoader","$log",function(e,t,n){return function(){n.debug("addAccount called.");var o=e.defer();return t().then(function(e){var t=e.account.add();t.execute(function(e){n.debug("addAccount resp",e),e.result?o.resolve():o.reject("addAccount")})}),o.promise}}]).factory("getAccount",["$q","riseAPILoader","$log",function(e,t,n){return function(){n.debug("getAccount called.");var o=e.defer();return t().then(function(e){var t=e.account.get();t.execute(function(e){n.debug("getAccount resp",e),e.item?o.resolve(e.item):o.reject("getAccount")})}),o.promise}}])}(angular),angular.module("risevision.store.services").factory("getChargebeeInstance",["$q","$window","$loading","storeService","userState","CHARGEBEE_TEST_SITE","CHARGEBEE_PROD_SITE",function(e,t,n,o,r,s,a){function i(){return d-Date.now()<6e4}function c(n){var o={};return o.instance=t.Chargebee.init({site:r.isTestCompanySelected()?s:a}),o.instance.logout(),o.instance.setPortalSession(function(){return e.resolve(n)}),o.portal=o.instance.createChargebeePortal(),o}var l=null,u=null,d=0;return function(t){if(l!==t||i()){var r=e.defer();return n.startGlobal("chargebee-session"),o.createSession(t).then(function(e){console.log("Chargebee session for companyId",t,"is",e),u=c(e),l=t;var o=1e3*(Number(e.expires_at)-Number(e.created_at));d=Date.now()+o,n.stopGlobal("chargebee-session"),r.resolve(u)})["catch"](function(e){console.log("Error creating Customer Portal session for company id",t,e),n.stopGlobal("chargebee-session"),r.reject(e)}),r.promise}return e.resolve(u)}}]).factory("ChargebeeFactory",["$rootScope","$window","$log","getChargebeeInstance","plansFactory","currentPlanFactory",function(e,t,n,o,r,s){return function(){var a={apiError:null},i=function(e){return a.apiError=null,o(e).then(function(e){return e.portal})},c=function(e,t){404!==e.status||s.currentPlan.isPurchasedByParent||r.isPlansModalOpen?404===e.status&&s.currentPlan.isPurchasedByParent?(a.apiError=403,console.log("Company does not exist in Chargebee, companyId",t,e)):(a.apiError=e,console.log("Failed to retrieve session for companyId",t,e)):r.showPlansModal()},l={loaded:function(){n.debug("Chargebee loaded event"),e.$emit("chargebee.loaded")},close:function(){n.debug("Chargebee close event"),e.$emit("chargebee.close")},visit:function(t){n.debug("Chargebee visit event",t),e.$emit("chargebee.visit",t)},paymentSourceAdd:function(){n.debug("Chargebee paymentSourceAdd event"),e.$emit("chargebee.paymentSourceAdd")},paymentSourceUpdate:function(){n.debug("Chargebee paymentSourceUpdate event"),e.$emit("chargebee.paymentSourceUpdate")},paymentSourceRemove:function(){n.debug("Chargebee paymentSourceRemove event"),e.$emit("chargebee.paymentSourceRemove")},subscriptionChanged:function(t){n.debug("Chargebee subscriptionChanged event",t),e.$emit("chargebee.subscriptionChanged",t)},subscriptionCancelled:function(t){n.debug("Chargebee subscriptionCancelled event",t),e.$emit("chargebee.subscriptionCancelled",t)}};return a.openPortal=function(e){i(e).then(function(e){e.open(l)})["catch"](function(t){c(t,e)})},a.openAccountDetails=function(e){i(e).then(function(e){e.open(l,{sectionType:t.Chargebee.getPortalSections().ACCOUNT_DETAILS})})["catch"](function(t){c(t,e)})},a.openAddress=function(e){i(e).then(function(e){e.open(l,{sectionType:t.Chargebee.getPortalSections().ADDRESS})})["catch"](function(t){c(t,e)})},a.openBillingHistory=function(e){i(e).then(function(e){e.open(l,{sectionType:t.Chargebee.getPortalSections().BILLING_HISTORY})})["catch"](function(t){c(t,e)})},a.openPaymentSources=function(e){i(e).then(function(e){e.open(l,{sectionType:t.Chargebee.getPortalSections().PAYMENT_SOURCES})})["catch"](function(t){c(t,e)})},a.openSubscriptionDetails=function(e,n){i(e).then(function(e){e.open(l,{sectionType:t.Chargebee.getPortalSections().SUBSCRIPTION_DETAILS,params:{subscriptionId:n}})})["catch"](function(t){c(t,e)})},a}}]),angular.module("risevision.common.header").value("COMPANY_ROLE_FIELDS",[["IT/Network Administrator","it_network_administrator"],["Facilities","facilities"],["Professor/Instructor/Teacher","professor_instructor_teacher"],["Marketing","marketing"],["Designer","designer"],["Executive/Business Owner","executive_business_owner"],["Reseller/Integrator","reseller_integrator"],["Architect/Consultant","architect_consultant"],["Administrator/Volunteer/Intern","administrator_volunteer_intern"],["Developer","developer"],["Other","other"]]).value("COMPANY_INDUSTRY_FIELDS",[["K-12 Education","PRIMARY_SECONDARY_EDUCATION","https://cdn2.hubspot.net/hubfs/2700250/Assets%20May%5B17%5D/university.svg"],["Higher Education","HIGHER_EDUCATION","https://www.risevision.com/hubfs/mortarboard-2.svg?t=1502211789708"],["Religious","RELIGIOUS_INSTITUTIONS","https://www.risevision.com/hubfs/Assets%20May%5B17%5D/religious.svg?t=1502211789708"],["Nonprofit","PHILANTHROPY","https://cdn2.hubspot.net/hubfs/2700250/Assets%20May%5B17%5D/donation-1.svg"],["Retail","RETAIL","https://www.risevision.com/hubfs/business-1.svg"],["Restaurants and Bars","RESTAURANTS","https://cdn2.hubspot.net/hubfs/2700250/Assets%20May%5B17%5D/restaurants.svg"],["Hospital and Healthcare","HOSPITAL_HEALTH_CARE","https://www.risevision.com/hubfs/hospitality-2.svg?t=1502211789708"],["Libraries","LIBRARIES","https://cdn2.hubspot.net/hubfs/2700250/Assets%20May%5B17%5D/teamwork.svg"],["Financial Services","FINANCIAL_SERVICES","https://www.risevision.com/hubfs/Assets%20May%5B17%5D/finance.svg?t=1502211789708"],["Gyms and Fitness","HEALTH_WELLNESS_AND_FITNESS","https://www.risevision.com/hubfs/health-2.svg?t=1502211789708"],["Hotels and Hospitality","HOSPITALITY"],["Corporate Offices","EXECUTIVE_OFFICE"],["Manufacturing","INDUSTRIAL_AUTOMATION"],["Government","GOVERNMENT_ADMINISTRATION"],["Auto Dealerships","AUTOMOTIVE","https://cdn2.hubspot.net/hubfs/2700250/automobile-1.svg"],["Marketing and Advertising","MARKETING_AND_ADVERTISING","https://cdn2.hubspot.net/hubfs/2700250/Assets%20May%5B17%5D/telemarketer.svg"],["Technology and Integrator","INFORMATION_TECHNOLOGY_AND_SERVICES"],["Other","OTHER"]]).value("COMPANY_SIZE_FIELDS",[["Solo","1"],["Fewer than 20 employees","2"],["21-50 employees","21"],["51-250 employees","51"],["More than 250 employees","250"]]).constant("USER_ICP_WRITABLE_FIELDS",["mailSyncEnabled"]).constant("COMPANY_ICP_WRITABLE_FIELDS",["companyIndustry"]).factory("companyIcpFactory",["$rootScope","$q","$log","userState","updateCompany","updateUser","$modal","pick","USER_ICP_WRITABLE_FIELDS","COMPANY_ICP_WRITABLE_FIELDS","$state",function(e,t,n,o,r,s,a,i,c,l,u){var d={};d.init=function(){e.$on("risevision.company.selectedCompanyChanged",function(){p()})};var m=function(e){var o=e.company,a=e.user,u=o.id,d=a.username;o=i(o,l),a=i(a,c);var m=r(u,o),p=s(d,a);t.all([m,p]).then(function(){n.debug("User & Company Profiles updated")})},p=function(){if(u.current.name.indexOf("common.auth")===-1){var e=o.getCopyOfProfile(!0),t=o.getCopyOfSelectedCompany(!0);if(!o.isRiseAdmin()&&!t.companyIndustry){var n=a.open({templateUrl:"company-icp-modal.html",controller:"CompanyIcpModalCtrl",size:"md",backdrop:"static",keyboard:!1,resolve:{user:function(){return e},company:function(){return t}}});n.result.then(function(e,t){m(e,t)})}}};return d}]),angular.module("risevision.common.header.services").factory("companySettingsFactory",["$modal","$templateCache","userState","getCoreCountries",function(e,t,n,o){var r={};return r.openCompanySettings=function(){return e.open({template:t.get("company-settings-modal.html"),controller:"CompanySettingsModalCtrl",size:"lg",resolve:{companyId:function(){return n.getSelectedCompanyId()},countries:function(){return o()}}})},r}]),angular.module("risevision.common.cookie",["risevision.common.config"]).service("cookieTester",["$q","$document","$http","COOKIE_CHECK_URL",function(e,t,n,o){var r={};return r.checkCookies=function(){var t=e.defer();return e.all([r.checkLocalCookiePermission(),r.checkThirdPartyCookiePermission()]).then(function(){t.resolve()},function(){t.reject()}),t.promise},r.checkLocalCookiePermission=function(){return t[0].cookie="rv-test-local-cookie=yes",t[0].cookie.indexOf("rv-test-local-cookie")>-1?e.when(!0):e.reject(!1)},r.checkThirdPartyCookiePermission=function(){var t=e.defer();return n.get(o+"/createThirdPartyCookie",{withCredentials:!0}).then(function(){return n.get(o+"/checkThirdPartyCookie",{withCredentials:!0})}).then(function(e){"true"===e.data.check?t.resolve(!0):t.reject(!1)}).then(null,function(){t.resolve(!1)}),t.promise},r}]),angular.module("risevision.store.data-gadgets",[]).service("gadgetsService",["$q",function(e){this.closeIFrame=function(){var t=e.defer();return gadgets.rpc.call("","rscmd_closeSettings",function(){t.resolve(!0)}),t.promise},this.sendProductCode=function(t){var n=e.defer(),o={params:t};return gadgets.rpc.call("","rscmd_saveSettings",function(){n.resolve(!0)},o),n.promise}}]),angular.module("risevision.common.geodata",[]).value("REGIONS_CA",[["Alberta","AB"],["British Columbia","BC"],["Manitoba","MB"],["New Brunswick","NB"],["Newfoundland and Labrador","NL"],["Northwest Territories","NT"],["Nova Scotia","NS"],["Nunavut","NU"],["Ontario","ON"],["Prince Edward Island","PE"],["Quebec","QC"],["Saskatchewan","SK"],["Yukon Territory","YT"]]).value("REGIONS_US",[["Alabama","AL"],["Alaska","AK"],["Arizona","AZ"],["Arkansas","AR"],["California","CA"],["Colorado","CO"],["Connecticut","CT"],["Delaware","DE"],["District of Columbia","DC"],["Florida","FL"],["Georgia","GA"],["Hawaii","HI"],["Idaho","ID"],["Illinois","IL"],["Indiana","IN"],["Iowa","IA"],["Kansas","KS"],["Kentucky","KY"],["Louisiana","LA"],["Maine","ME"],["Maryland","MD"],["Massachusetts","MA"],["Michigan","MI"],["Minnesota","MN"],["Mississippi","MS"],["Missouri","MO"],["Montana","MT"],["Nebraska","NE"],["Nevada","NV"],["New Hampshire","NH"],["New Jersey","NJ"],["New Mexico","NM"],["New York","NY"],["North Carolina","NC"],["North Dakota","ND"],["Ohio","OH"],["Oklahoma","OK"],["Oregon","OR"],["Pennsylvania","PA"],["Rhode Island","RI"],["South Carolina","SC"],["South Dakota","SD"],["Tennessee","TN"],["Texas","TX"],["Utah","UT"],["Vermont","VT"],["Virginia","VA"],["Washington","WA"],["West Virginia","WV"],["Wisconsin","WI"],["Wyoming","WY"]]).value("TIMEZONES",[["(GMT -12:00) International Dateline West","-720"],["(GMT -11:00) Midway Island, Samoa","-660"],["(GMT -10:00) Hawaii","-600"],["(GMT -09:00) Alaska","-540"],["(GMT -08:00) Pacific Time (US & Canada], Tijuana","-480"],["(GMT -07:00) Mountain Time (US & Canada)","-420"],["(GMT -06:00) Central Time (US & Canada)","-360"],["(GMT -05:00) Eastern Time (US & Canada)","-300"],["(GMT -04:00) Atlantic Time (Canada)","-240"],["(GMT -03:30) NewfoundLand Time (Canada)","-210"],["(GMT -03:00) Buenos Aires, Georgetown","-180"],["(GMT -02:00) Mid-Atlantic","-120"],["(GMT -01:00) Cape Verde Is.","-60"],["(GMT  00:00) Dublin, Edinburgh, Lisbon, London","0"],["(GMT +01:00) Amsterdam, Berlin, Bern, Rome, Paris, Stockholm, Vienna","60"],["(GMT +02:00) Athens, Bucharest, Istanbul, Minsk","120"],["(GMT +03:00) Moscow, St. Petersburg, Volgograd","180"],["(GMT +03:30) Tehran","210"],["(GMT +04:00) Abu Dhabi, Muscat","240"],["(GMT +04:30) Kabul","270"],["(GMT +05:00) Islamabad, Karachi, Tashkent","300"],["(GMT +05:30) Calcutta, Chennai, Mumbai,New Delhi","330"],["(GMT +05:45) Kathmandu","345"],["(GMT +06:00) Astana,Almaty, Dhaka, Novosibirsk","360"],["(GMT +06:30) Rangoon (Yangon, Burma)","390"],["(GMT +07:00) Bangkok, Hanoi, Jakarta","420"],["(GMT +08:00) Beijing, Chongqing, Hong Kong, Urumqi","480"],["(GMT +09:00) Osaka, Sapporo, Tokyo","540"],["(GMT +09:30) Adelaide, Darwin","570"],["(GMT +10:00) Canberra, Melbourne, Sydney, Vladvostok","600"],["(GMT +11:00) Magadan, Solomon Is., New Caledonia","660"],["(GMT +12:00) Auckland, Fiji, Kamchatka, Marshall Is.","720"],["(GMT +13:00) Nuku'alofa","780"]]),
function(e){"use strict";e.module("risevision.common.registration",["risevision.common.components.userstate","risevision.core.userprofile","risevision.common.gapi"]).config(["uiStatusDependencies",function(e){e.addDependencies({registeredAsRiseVisionUser:"signedInWithGoogle",registrationComplete:["notLoggedIn","registeredAsRiseVisionUser"]}),e.setMaximumRetryCount("signedInWithGoogle",1)}]).factory("signedInWithGoogle",["$q","userState",function(e,t){return function(){var n=e.defer();return t.isLoggedIn()?n.resolve():n.reject("signedInWithGoogle"),n.promise}}]).factory("notLoggedIn",["$q","$log","signedInWithGoogle",function(e,t,n){return function(){var t=e.defer();return n().then(function(){t.reject("notLoggedIn")},t.resolve),t.promise}}]).factory("registeredAsRiseVisionUser",["$q","getUserProfile","cookieStore","$log","userState",function(t,n,o,r,s){return function(){var a=t.defer();return n(s.getUsername()).then(function(t){e.isDefined(t.email)&&e.isDefined(t.mailSyncEnabled)?a.resolve(t):o.get("surpressRegistration")?a.resolve({}):a.reject("registeredAsRiseVisionUser")},function(e){e&&403===e.code?o.get("surpressRegistration")?a.resolve({}):(r.debug("registeredAsRiseVisionUser rejected",e),a.reject("registeredAsRiseVisionUser")):a.reject()}),a.promise}}])}(angular),function(){"use strict";angular.module("risevision.store.services").service("storeService",["$q","$log","$http","storeAPILoader",function(e,t,n,o){var r=function(e){return null!==e.result&&"object"==typeof e.result?e.result:e},s={validateAddress:function(n){var s={street:n.street,unit:n.unit,city:n.city,country:n.country,postalCode:n.postalCode,province:n.province};return o().then(function(e){return e.company.validateAddress(s)}).then(function(n){var o=r(n);return t.debug("validateAddress result: ",o),o.code!==-1?e.resolve(o):e.reject(o)})},calculateTaxes:function(n,r,s,a,i,c){var l=e.defer(),u={companyId:n,shipToId:c.id,planId:r,planQty:s,addonId:a,addonQty:i,line1:c.street,line2:c.unit,city:c.city,country:c.country,state:c.province,zip:c.postalCode};return o().then(function(e){return e.tax.estimate(u)}).then(function(e){e.result&&!e.result.error&&e.result.result===!0?(t.debug("tax estimate resp",e),l.resolve(e.result)):(console.error("Failed to get tax estimate.",e.result),l.reject(e.result))}).then(null,function(e){console.error("Failed to get tax estimate.",e),l.reject(e&&e.result&&e.result.error)}),l.promise},preparePurchase:function(n){var r=e.defer();return o().then(function(e){var t={jsonData:n};return e.purchase.prepare(t)}).then(function(e){e&&e.result&&!e.result.error?(t.debug("prepare purchase resp",e),r.resolve(e.result)):r.reject(e&&e.result&&e.result.error)}).then(null,function(e){console.error("Failed to prepare Purchase.",e),r.reject(e&&e.result&&e.result.error)}),r.promise},purchase:function(n){var r=e.defer();return o().then(function(e){var t={jsonData:n};return e.purchase.put2(t)}).then(function(e){e&&e.result&&!e.result.error?(t.debug("purchase resp",e),r.resolve(e.result)):r.reject(e&&e.result&&e.result.error)}).then(null,function(e){console.error("Failed to get Purchase.",e),r.reject(e&&e.result&&e.result.error)}),r.promise},createSession:function(n){var r=e.defer(),s={companyId:n};return o().then(function(e){return e.customer_portal.createSession(s)}).then(function(e){t.debug("customer_portal.createSession resp",e),r.resolve(JSON.parse(e.result.result))}).then(null,function(e){console.error("Failed to create Customer Portal Session.",e),r.reject(e)}),r.promise},addTaxExemption:function(n,r){var s=e.defer();return o().then(function(e){var o={blobKey:r,number:n.number},a=e.taxExemption.add(o);a.execute(function(e){e.error?(t.error("Error adding tax exemption: ",e.message),s.reject(e.error)):s.resolve(e)})}),s.promise},uploadTaxExemptionCertificate:function(r){var s=e.defer(),a=new FormData;return a.append("file",r),o().then(function(e){var o=e.taxExemption.getUploadUrl();o.execute(function(e){e.error?(t.error("Error getting upload url: ",e.message),s.reject(e.error)):n.post(e.result.result,a,{withCredentials:!0,headers:{"Content-Type":void 0},transformRequest:angular.identity}).then(function(e){s.resolve(e.data)},function(e){t.error("Error uploading file: ",e),s.reject(e)})})}),s.promise}};return s}])}(),function(e){"use strict";e.module("risevision.common.support",[]).value("ZENDESK_WEB_WIDGET_SCRIPT",'window.zE||(function(e,t,s){var n=window.zE=window.zEmbed=function(){n._.push(arguments)},a=n.s=e.createElement(t),r=e.getElementsByTagName(t)[0];n.set=function(e){n.set._.push(e)},n._=[],n.set._=[],a.async=true,a.setAttribute("charset","utf-8"),a.src="https://static.zdassets.com/ekr/asset_composer.js?key="+s,n.t=+new Date,a.type="text/javascript",r.parentNode.insertBefore(a,r)})(document,"script","b8d6bdba-10ea-4b88-b96c-9d3905b85d8f");').factory("zendesk",["$q","$window","segmentAnalytics","userState","ZENDESK_WEB_WIDGET_SCRIPT",function(e,t,n,o,r){function s(){if(!f){t.zESettings={webWidget:{helpCenter:{title:{"*":"Help"},searchPlaceholder:{"*":"How can we help?"},messageButton:{"*":"Open a Support Ticket"}},chat:{suppress:!0},contactForm:{title:{"*":"Open a Support Ticket"}}}};var n=t.document.createElement("script");n.innerText=r,t.document.body.appendChild(n),f=!0,p()}return e.when()}function a(){var r=e.defer();return t.zE(function(){var e=o.getUsername(),t={email:o.getUserEmail(),rise_vision_company_id:o.getUserCompanyId()};n.identify(e,t),r.resolve()}),r.promise}function i(){return s().then(a).then(c)}function c(){var e=o.getUsername();if(h!==e){var n={email:e,name:o.getUserFullName()};e&&t.zE(function(){t.zE.identify(n)}),h=e}l()}function l(){v("iframe[class^=zEWidget]").contents().find(".Container").css("border","1px solid #4ab767")}function u(){h=""}function d(){t.zE&&t.zE(function(){t.zE.setHelpCenterSuggestions({url:!0})})}function m(){t.zE&&t.zE(function(){t.zE.show()})}function p(){t.zE&&t.zE(function(){t.zE.hide()})}function g(){t.zE&&t.zE(function(){t.zE.activate()})}var f=!1,h="",v=t.$;return{initializeWidget:i,displayButton:m,hideWidget:p,activateWidget:g,enableSuggestions:d,logout:u}}]).run(["$rootScope","$window","userState","userAuthFactory","zendesk","ZENDESK_WEB_WIDGET_SCRIPT",function(e,t,n,o,r,s){function a(){c&&(r.hideWidget(),c=!1)}function i(){setTimeout(function(){r.logout(),r.displayButton(),c=!0},2e3)}var c=!1;s&&(r.initializeWidget(),o.authenticate().then(function(){n.isLoggedIn()||i()})["catch"](function(){i()}),e.$on("risevision.user.authorized",function(){r.initializeWidget(),a()}),e.$on("risevision.user.signedOut",function(){i()}),e.$on("$stateChangeStart",function(){r.enableSuggestions()}))}])}(angular);try{angular.module("risevision.common.i18n.config")}catch(err){angular.module("risevision.common.i18n.config",[])}angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",["$q","$http",function(e,t){function n(e,o){t(angular.extend({url:[e.prefix,e.key.toLowerCase(),e.suffix].join(""),method:"GET",params:""},e.$http)).then(function(e){o.resolve(e.data)},function(){if(e.key.indexOf("_")>=0){var t=e.key.substr(0,e.key.lastIndexOf("_")),r=angular.extend({},e,{key:t});n(r,o)}else o.resolve("{}")})}return function(t){if(!t||!angular.isString(t.prefix)||!angular.isString(t.suffix))throw new Error('Couldn"t load static files, no prefix or suffix specified!');var o=e.defer();return n(t,o),o.promise}}]),angular.module("risevision.common.i18n",["pascalprecht.translate","risevision.common.i18n.config"]).config(["$translateProvider","LOCALES_PREFIX","LOCALES_SUFIX",function(e,t,n){e.useStaticFilesLoader({prefix:t,suffix:n}),e.determinePreferredLanguage().fallbackLanguage("en").useSanitizeValueStrategy(null)}]);var gapiLoadingStatus=null,handleClientJSLoad=function(){gapiLoadingStatus="loaded",console.debug("ClientJS is loaded.");var e=document.createEvent("Events");e.initEvent("gapi.loaded",!0,!0),window.dispatchEvent(e)};angular.module("risevision.common.gapi",["risevision.common.components.util"]).value("CLIENT_ID","614513768474.apps.googleusercontent.com").value("OAUTH2_SCOPES","profile").factory("gapiLoader",["$q","$window",function(e,t){var n=e.defer();return function(){var e;if("loaded"===t.gapiLoadingStatus)n.resolve(t.gapi);else if(!t.gapiLoadingStatus){t.gapiLoadingStatus="loading";var o=t.gapiSrc||"//apis.google.com/js/client.js?onload=handleClientJSLoad",r=document.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",o),"undefined"!=typeof r&&document.getElementsByTagName("body")[0].appendChild(r),e=function(){n.resolve(t.gapi),t.removeEventListener("gapi.loaded",e,!1)},t.addEventListener("gapi.loaded",e,!1)}return n.promise}}]).factory("auth2APILoader",["$q","$log","$location","$window","gapiLoader","getBaseDomain","CLIENT_ID","OAUTH2_SCOPES",function(e,t,n,o,r,s,a,i){return function(){var c=e.defer();return r().then(function(e){e.auth2&&e.auth2.getAuthInstance()?c.resolve(e.auth2):e.load("auth2",function(){if(e.auth2)e.auth2.init({client_id:a,scope:i,cookie_policy:n.protocol()+"://"+s()+(o.location.port?":"+o.location.port:"")}).then(function(){t.debug("auth2 API Loaded"),c.resolve(e.auth2)},function(){var e="auth2 GoogleAuth Init Failed";t.error(e),c.reject(e)});else{var r="auth2 API Load Failed";t.error(r),c.reject(r)}})}),c.promise}}]).factory("clientAPILoader",["$q","$log","gapiLoader",function(e,t,n){return function(){var o=e.defer();return n().then(function(e){e.client?o.resolve(e):e.load("client",function(){if(e.client)t.debug("client API Loaded"),o.resolve(e);else{var n="client API Load Failed";t.error(n),o.reject(n)}})}),o.promise}}]).factory("gapiClientLoaderGenerator",["$q","$log","$timeout","$http","clientAPILoader",function(e,t,n,o,r){return function(s,a,i){var c=!1;return function(){var l=e.defer();return r().then(function(e){var r;e.client[s]?(c=!0,l.resolve(e.client[s])):(e.client.load(s,a,function(){if(c=!0,r&&n.cancel(r),e.client[s])t.debug(s+"."+a+" Loaded"),l.resolve(e.client[s]);else{var o=s+"."+a+" Load Failed";t.error(o),l.reject(o)}},i),c||(r=n(function(){c=!0,i&&!e.client[s]&&o({url:i,method:"GET"})["catch"](function(e){if(e&&404!==e.status&&(e.status<200||e.status>=400)){var n=s+" ("+i+") failed to respond";t.error(n,e),l.reject({status:-1,result:{error:{code:-1,message:n,error:e}}})}})},1e4)))}),l.promise}}}]).factory("oauth2APILoader",["gapiClientLoaderGenerator",function(e){return e("oauth2","v2")}]).factory("coreAPILoader",["CORE_URL","gapiClientLoaderGenerator","$location",function(e,t,n){var o=n.search().core_api_base_url?n.search().core_api_base_url+"/_ah/api":e;return t("core","v1",o)}]).factory("riseAPILoader",["CORE_URL","gapiClientLoaderGenerator","$location",function(e,t,n){var o=n.search().core_api_base_url?n.search().core_api_base_url+"/_ah/api":e;return t("rise","v0",o)}]).factory("storeAPILoader",["STORE_ENDPOINT_URL","gapiClientLoaderGenerator","$location",function(e,t,n){var o=n.search().store_api_base_url?n.search().store_api_base_url+"/_ah/api":e;return t("store","v0.01",o)}]).factory("storageAPILoader",["STORAGE_ENDPOINT_URL","gapiClientLoaderGenerator","$location",function(e,t,n){var o=n.search().storage_api_base_url?n.search().storage_api_base_url+"/_ah/api":e;return t("storage","v0.02",o)}]).factory("discoveryAPILoader",["CORE_URL","gapiClientLoaderGenerator","$location",function(e,t,n){var o=n.search().core_api_base_url?n.search().core_api_base_url+"/_ah/api":e;return t("discovery","v1",o)}]).factory("monitoringAPILoader",["MONITORING_SERVICE_URL","gapiClientLoaderGenerator","$location",function(e,t,n){var o=n.search().core_api_base_url?n.search().core_api_base_url+"/_ah/api":e;return t("monitoring","v0",o)}]),function(e){"use strict";e.module("risevision.common.components.util",[]).value("humanReadableError",function(e){var t;return t=e.message?e.message:e.error?e.error.message?e.error.message:e.error:e,JSON.stringify(t)}).factory("dateIsInRange",[function(){return function(e,t,n){var o,r,s=!0;try{t&&(o=t.match(/(\d{4})\-(\d{2})\-(\d{2})/),r=new Date(o[1],parseInt(o[2])-1,o[3],0,0,0,0),s=e>=r),s&&n&&(o=n.match(/(\d{4})\-(\d{2})\-(\d{2})/),r=new Date(o[1],parseInt(o[2])-1,o[3],0,0,0,0),s=e<=r)}catch(a){s=!1}return s}}]).factory("objectHelper",[function(){var t={};return t.follow=function(e){var t=function(){};return t.prototype=e,new t},t.clearObj=function(e){for(var t in e)delete e[t]},t.clearAndCopy=function(n,o){t.clearObj(o),e.extend(o,n)},t}]).factory("getBaseDomain",["$log","$location",function(e,t){var n=function(e){return!!/^([0-9])+\.([0-9])+\.([0-9])+\.([0-9])+$/.test(e)};return function(){var o;if(!o){var r=t.host();if(n(r))o=r;else{var s=r.split(".");o=s.length>1?"appspot"===s[s.length-2]?s.slice(s.length-3).join("."):s.slice(s.length-2).join("."):r}e.debug("baseDomain",o)}return o}}])}(angular),angular.module("risevision.common.apis",["risevision.common.gapi"]).factory("listApis",["$q","discoveryAPILoader","$log",function(e,t,n){return function(o,r){n.debug("listApis called",o,r);var s=e.defer();return t().then(function(e){var t={};o&&(t.name=o),r&&(t.preferred=r);var a=e.apis.list(t);a.execute(function(e){n.debug("listApis resp",e),e.result?s.resolve(e.items):s.reject(e)})}),s.promise}}]).factory("getRest",["$q","discoveryAPILoader","$log",function(e,t,n){return function(o,r){n.debug("getRest called",o,r);var s=e.defer();return t().then(function(e){var t={};o&&(t.api=o),r&&(t.version=r);var a=e.apis.getRest(t);a.execute(function(e){n.debug("getRest resp",e),e.result?s.resolve(e):s.reject(e)})}),s.promise}}]),angular.module("risevision.common.app",["risevision.common.gapi","risevision.core.util"]).constant("APP_WRITABLE_FIELDS",["name","description","clientId","url"]).factory("listApps",["$q","riseAPILoader","$log",function(e,t,n){return function(o){n.debug("listApps called",o);var r=e.defer();return t().then(function(e){var t={};o&&(t.companyId=o);var s=e.app.list(t);s.execute(function(e){n.debug("listApps resp",e),e.result?r.resolve(e.items):r.reject(e)})}),r.promise}}]).factory("getApp",["$q","riseAPILoader","$log",function(e,t,n){return function(o){n.debug("getApp called",o);var r=e.defer();return t().then(function(e){var t={};o&&(t.id=o);var s=e.app.get(t);s.execute(function(e){n.debug("getApp resp",e),e.result?r.resolve(e.item):r.reject(e)})}),r.promise}}]).factory("createApp",["$q","riseAPILoader","$log","pick","APP_WRITABLE_FIELDS",function(e,t,n,o,r){return function(s,a,i){n.debug("createApp called",s,a,i);var c=e.defer();return t().then(function(e){var t=o.apply(this,[i].concat(r)),n=e.app.add({companyId:s,userId:a,data:JSON.stringify(t)});n.execute(function(e){e.result?c.resolve(e.item):c.reject(e)},c.reject)}),c.promise}}]).factory("updateApp",["$q","riseAPILoader","$log","pick","APP_WRITABLE_FIELDS",function(e,t,n,o,r){return function(s,a){n.debug("updateApp called",s,a);var i=e.defer();return t().then(function(e){var t=o.apply(this,[a].concat(r)),n=e.app.update({id:s,data:JSON.stringify(t)});n.execute(function(e){e.result?i.resolve(e.item):i.reject(e)},i.reject)}),i.promise}}]).factory("deleteApp",["$q","riseAPILoader","$log",function(e,t,n){return function(o){n.debug("deleteApp called",o);var r=e.defer();return t().then(function(e){var t={};o&&(t.id=o);var s=e.app["delete"](t);s.execute(function(e){n.debug("deleteApp resp",e),e.result?r.resolve(e.item):r.reject(e)})}),r.promise}}]),function(e){"use strict";e.module("risevision.core.cache",[]).factory("userInfoCache",["$cacheFactory",function(e){return e("user-info-cache")}])}(angular),angular.module("risevision.common.core.endpoint",["risevision.common.gapi"]).factory("callEndpoint",["coreAPILoader","$q","$log",function(coreAPILoader,$q,$log){return function(method,criteria){$log.debug("Endpoint called",method,criteria);var deferred=$q.defer();return coreAPILoader().then(function(core){var request=eval(method)(criteria);request.execute(function(e){$log.debug("Endpoint resp",e),e.result?deferred.resolve(e):deferred.reject(e)})}),deferred.promise}}]),function(e){"use strict";e.module("risevision.core.company",["risevision.common.gapi","risevision.core.cache","risevision.core.util"]).constant("COMPANY_WRITABLE_FIELDS",["name","street","unit","city","province","country","postalCode","timeZoneOffset","telephone","fax","companyStatus","mailSyncEnabled","sellerId","isTest","shipToUseCompanyAddress","shipToName","shipToStreet","shipToUnit","shipToCity","shipToProvince","shipToPostalCode","shipToCountry","website","companySize","companyIndustry","billingContactEmails","shareCompanyPlan","settings"]).constant("ALERTS_WRITABLE_FIELDS",["alertSettings"]).constant("COMPANY_SEARCH_FIELDS",["name","id","street","unit","city","province","country","postalCode","telephone","fax","shipToName","shipToStreet","shipToCity","shipToPostalCode"]).factory("company",["$q","$log","coreAPILoader","pick","ALERTS_WRITABLE_FIELDS",function(e,t,n,o,r){var s={updateAlerts:function(s,a){var i=e.defer(),c=o.apply(this,[a].concat(r)),l={id:s,data:c};return t.debug("updateAlerts called",s,c),n().then(function(e){return e.company.patch(l)}).then(function(e){t.debug("update Alerts resp",e),i.resolve(e.result)}).then(null,function(e){t.error("Failed to update Alerts.",e),i.reject(e)}),i.promise}};return s}]).factory("createCompany",["$q","coreAPILoader","COMPANY_WRITABLE_FIELDS","pick",function(e,t,n,o){return function(r,s){var a=e.defer();return t().then(function(e){var t=o.apply(this,[s].concat(n)),i=e.company.add({parentId:r,data:t});i.execute(function(e){e.result?a.resolve(e.item):a.reject(e)},a.reject)}),a.promise}}]).factory("getCompany",["coreAPILoader","$q","$log",function(e,t,n){return function(o){n.debug("getCompany called",o);var r=t.defer();return e().then(function(e){var t={};o&&(t.id=o);var s=e.company.get(t);s.execute(function(e){n.debug("getCompany resp",e),e.result?r.resolve(e.item):r.reject(e)})}),r.promise}}]).factory("lookupCompany",["coreAPILoader","$q","$log",function(e,t,n){return function(o){n.debug("lookupCompany called",o);var r=t.defer();return e().then(function(e){var t=e.company.lookup({authKey:o});t.execute(function(e){n.debug("lookupCompany resp",e),e.result?r.resolve(e.item):r.reject(e)})}),r.promise}}]).factory("moveCompany",["coreAPILoader","$q","$log",function(e,t,n){return function(o,r){var s=t.defer();return e().then(function(e){var t=e.company.move({authKey:o,newParentId:r});t.execute(function(e){n.debug("moveCompany resp",e),e.result?s.resolve(e.item):s.reject(e)})}),s.promise}}]).factory("updateCompany",["$q","$log","coreAPILoader","pick","COMPANY_WRITABLE_FIELDS",function(e,t,n,o,r){return function(s,a){var i=e.defer();return a=o.apply(this,[a].concat(r)),t.debug("updateCompany called",s,a),n().then(function(e){var n=e.company.patch({id:s,data:a});n.execute(function(e){t.debug("updateCompany resp",e),e.result&&e.result.item?i.resolve(e.result.item):i.reject(e)})}),i.promise}}]).factory("regenerateCompanyField",["$q","$log","coreAPILoader",function(e,t,n){return function(o,r){var s=e.defer();return t.debug("regenerateField called",o,r),n().then(function(e){var n=e.company.regenerateField({id:o,fieldName:r});n.execute(function(e){t.debug("regenerateField resp",e),e.error?s.reject(e.message):s.resolve(e)},function(e){s.reject("call failed "+e)})}),s.promise}}]).factory("deleteCompany",["coreAPILoader","$q","$log",function(e,t,n){return function(o){n.debug("deleteCompany called",o);var r=t.defer();return e().then(function(e){var t={};o&&(t.id=o);var s=e.company["delete"](t);s.execute(function(e){n.debug("deleteCompany resp",e),e.result?r.resolve(e.item):r.reject(e)})}),r.promise}}]).service("companyService",["coreAPILoader","$q","$log","getCompany","COMPANY_SEARCH_FIELDS",function(e,t,n,o,r){var s=function(e,t){for(var n="",o=0;o<e.length;o++)n+="OR "+e[o]+':~"'+t+'" ';return n=n?n.substring(3):"",n.trim()};this.getCompanies=function(o,a){var i=t.defer(),c=o.query?s(r,o.query):"",l={companyId:o.companyId,search:c,cursor:a,count:o.count,sort:o.sortBy+(o.reverse?" desc":" asc")};return n.debug("getCompanies called with",l),e().then(function(e){var t=e.company.list(l);t.execute(function(e){n.debug("getCompanies resp",e),i.resolve(e)})}),i.promise},this.loadSelectedCompany=function(e,n){var r=t.defer();return e&&e!==n.id?o(e).then(function(e){0===e.code&&e.item?r.resolve(e.item):r.resolve(n)}):r.resolve(n),r.promise}}]).factory("enableCompanyProduct",["$q","$log","coreAPILoader",function(e,t,n){return function(o,r,s){var a=e.defer();return t.debug("enableCompanyProduct called",o,r,s),n().then(function(e){var n=e.company.enableProduct({id:o,productCode:r,data:s});n.execute(function(e){t.debug("enableCompanyProduct resp",e),e.result?a.resolve(e):a.reject(e)})}),a.promise}}]).filter("fullAddress",function(){return function(e){var t=(e.street?e.street+", ":"")+(e.city?e.city+", ":"")+(e.province?e.province+", ":"")+(e.country?e.country+", ":"")+(e.postalCode?e.postalCode+", ":"");return t&&(t=t.substr(0,t.length-2)),t}})}(angular),function(e){"use strict";e.module("risevision.core.util",[]).factory("pick",function(){var t=Array.prototype,n=t.slice,o=t.concat,r=function(e,t,n){if(void 0===t)return e;switch(null===n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,r){return e.call(t,n,o,r)};case 4:return function(n,o,r,s){return e.call(t,n,o,r,s)}}return function(){return e.apply(t,arguments)}};return function(t,s,a){var i,c={};if(null===t)return c;if(e.isFunction(s)){s=r(s,a);for(i in t){var l=t[i];s(l,i,t)&&(c[i]=l)}}else{var u=o.apply([],n.call(arguments,1));t=new Object(t);for(var d=0,m=u.length;d<m;d++)i=u[d],i in t&&(c[i]=t[i])}return c}})}(angular),function(e){"use strict";e.module("risevision.core.countries",["risevision.common.gapi"]).factory("getCoreCountries",["coreAPILoader","$q","$log","$filter",function(e,t,n,o){var r;return function(){return r?r.promise:(r=t.defer(),e().then(function(e){return e.country.list()}).then(function(e){var t=e.result?e.result.items:[];t instanceof Array&&(t=o("orderBy")(t,"name")),r.resolve(t)}).then(null,function(e){n.debug("getCoreCountries failed",e),r.reject(e),r=null}),r.promise)}}]).factory("COUNTRIES",["getCoreCountries",function(e){var t=[];return e().then(function(e){Array.prototype.push.apply(t,e)}),t}])}(angular),function(e){"use strict";e.module("risevision.core.display",["risevision.common.gapi","risevision.core.cache","risevision.core.util"]).service("displayService",["coreAPILoader","$q","$log",function(e,t,n){this.list=function(o,r,s,a,i){var c=t.defer(),l={companyId:o,search:r,cursor:s,count:a,sort:i};return n.debug("list displays called with",l),e().then(function(e){var t=e.display.list(l);t.execute(function(e){n.debug("list displays resp",e),e.result?c.resolve(e.items):c.reject(e)})}),c.promise}}])}(angular),angular.module("risevision.common.fastpass",[]).factory("loadFastpass",["$q","$http","$document","$timeout","GSFP_URL","$log",function(e,t,n,o,r,s){var a=function(t){var o=e.defer(),r=n[0].createElement("script");return r.onload=r.onreadystatechange=function(e){o.resolve(e)},r.onerror=function(e){o.reject(e)},r.src=t,n&&n[0]&&n[0].body.appendChild(r),o.promise};return function(n,o){var i=e.defer();s.debug("loadFastpass called",n,o);var c=function(e){s.error("loadFastpass rejected",e),i.reject("loadFastpass rejected "+e)};return t.get(r+"/geturl?userEmail="+o+"&userName="+n).then(function(e){a(e.data).then(function(e){s.debug("loadFastpass result",e),i.resolve(!0)},c)["catch"](c)},i.reject),i.promise}}]),angular.module("risevision.common.monitoring.activity",["risevision.common.gapi"]).factory("getActivity",["$q","monitoringAPILoader","$log",function(e,t,n){return function(o,r){n.debug("getActivity called",o,r);var s=e.defer();return t().then(function(e){var t={};o&&(t.clientId=o),r&&(t.api=r);var a=e.activity.get(t);a.execute(function(e){n.debug("getActivity resp",e),e.result?s.resolve(e.result):s.reject(e)})},function(e){n.debug("Error: "+e),s.reject(e)}),s.promise}}]),function(e){"use strict";e.module("risevision.core.oauth2",["risevision.common.gapi","risevision.core.cache"]).factory("getOAuthUserInfo",["oauth2APILoader","$q","userInfoCache","$log",function(e,t,n,o){return function(){var r,s=t.defer();return(r=n.get("oauth2UserInfo"))?r.error?s.reject(r.error):s.resolve(r):e().then(function(e){e.userinfo.get().execute(function(e){o.debug("getOAuthUserInfo oauth2.userinfo.get() resp",e),e?e.hasOwnProperty("error")?(n.remove("oauth2UserInfo"),s.reject(e.error)):(n.put("oauth2UserInfo",e),s.resolve(e)):(n.remove("oauth2UserInfo"),s.reject())})},s.reject),s.promise}}])}(angular),function(e){"use strict";e.module("risevision.core.schedule",["risevision.common.gapi","risevision.core.cache","risevision.core.util"]).service("scheduleService",["coreAPILoader","$q","$log",function(e,t,n){this.list=function(o,r,s,a,i){var c=t.defer(),l={companyId:o,search:r,cursor:s,count:a,sort:i};return n.debug("getSchedules called with",l),e().then(function(e){var t=e.schedule.list(l);t.execute(function(e){n.debug("getSchedules resp",e),e.result?c.resolve(e.items):c.reject(e)})}),c.promise}}])}(angular),angular.module("risevision.store.authorization",["risevision.common.gapi"]).factory("storeAuthorization",["$q","$log","$http","STORE_SERVER_URL","userState",function(e,t,n,o,r){var s={};return s.check=function(s){var a=e.defer();return n({url:o+"/v1/widget/auth",method:"GET",params:{cid:r.getSelectedCompanyId(),pc:s,startTrial:!1}}).then(function(e){e.data.authorized?a.resolve(!0):a.reject(!1)},function(e){t.error("Failed to check store authorization.",e),a.reject(e)}),a.promise},s.startTrial=function(s){var a=e.defer(),i=r.getSelectedCompanyId(),c="/v1/product/"+s+"/company/"+i+"/trial/start";return n.get(o+c).then(function(e){e.error?a.reject(e):a.resolve(!0)},function(e){t.error("Failed to start trial.",e),a.reject(e)}),a.promise},s}]),function(){"use strict";angular.module("risevision.common.subscription-status",["risevision.common.gapi"]).service("subscriptionStatusService",["$http","$q","storeAPILoader","$log",function(e,t,n,o){function r(e,t){return Math.floor((t.getTime()-e.getTime())/i)}var s=["On Trial","Trial Expired","Subscribed","Suspended","Cancelled","Free","Not Subscribed","Product Not Found","Company Not Found","Error"],a=["on-trial","trial-expired","subscribed","suspended","cancelled","free","not-subscribed","product-not-found","company-not-found","error"],i=864e5;this.get=function(e,i){var c=t.defer(),l={companyId:i,productCodes:e};return n().then(function(e){var t=e.product.status(l);t.execute(function(e){if(o.debug("getProductStatus resp",e),e.result){var t=e.items[0];t.plural="";var n=s.indexOf(t.status);n>=0&&(t.statusCode=a[n]),""===t.status?(t.status="N/A",t.statusCode="na",t.subscribed=!1):t.status===s[0]||t.status===s[2]||t.status===s[5]?t.subscribed=!0:t.subscribed=!1,"not-subscribed"===t.statusCode&&t.trialPeriod&&t.trialPeriod>0&&(t.statusCode="trial-available",t.subscribed=!0),t.expiry&&"on-trial"===t.statusCode&&(t.expiry=new Date(t.expiry),t.expiry instanceof Date&&!isNaN(t.expiry.valueOf())&&(t.expiry=r(new Date,t.expiry)),0===t.expiry?t.plural="-zero":t.expiry>1&&(t.plural="-many")),c.resolve(t)}else c.reject(e)})}),c.promise}}])}(),function(e){"use strict";e.module("risevision.core.userprofile",["risevision.common.gapi","risevision.core.oauth2"]).value("userRoleMap",{ce:"Content Editor",cp:"Content Publisher",da:"Display Administrator",ua:"System Administrator",pu:"Store Purchaser",sa:"Rise System Administrator",ba:"Rise Store Administrator"}).constant("USER_WRITABLE_FIELDS",["mailSyncEnabled","email","firstName","lastName","telephone","roles","status","companyRole","dataCollectionDate"]).factory("getUserProfile",["oauth2APILoader","coreAPILoader","$q","$log",function(e,t,n,o){var r,s={};return function(a,i){var c;if(a===r&&!i&&null!==s[a])return s[a].promise;if(r=a,s[a]=c=n.defer(),a){var l={};a&&(l.username=a),o.debug("getUserProfile called",l),n.all([e(),t()]).then(function(e){var t=e[1];t.user.get(l).execute(function(e){e.error||!e.result?c.reject(e):(o.debug("getUser resp",e),c.resolve(e.item))})},c.reject)}else c.reject("getUserProfile failed: username param is required."),o.debug("getUserProfile failed: username param is required.");return c.promise}}]).factory("updateUser",["$q","coreAPILoader","$log","getUserProfile","pick","USER_WRITABLE_FIELDS",function(e,t,n,o,r,s){return function(a,i){var c=e.defer();return i=r(i,s),n.debug("updateUser called",a,i),t().then(function(e){var t=e.user.patch({username:a,data:i});t.execute(function(e){n.debug("updateUser resp",e),e.error?c.reject(e):e.result?o(a,!0).then(function(){c.resolve(e)}):c.reject("updateUser")})},c.reject),c.promise}}]).factory("addUser",["$q","coreAPILoader","$log","pick","getUserProfile",function(e,t,n,o,r){return function(s,a,i){var c=e.defer();return t().then(function(e){i=o(i,"mailSyncEnabled","email","firstName","lastName","telephone","roles","status");var t=e.user.add({username:a,companyId:s,data:i});t.execute(function(e){n.debug("addUser resp",e),e.result?r(a,!0).then(function(){c.resolve(e)}):c.reject(e)})}),c.promise}}]).factory("deleteUser",["$q","coreAPILoader","$log",function(e,t,n){return function(o){var r=e.defer();return t().then(function(e){var t=e.user["delete"]({username:o});t.execute(function(e){n.debug("deleteUser resp",e),e.result?r.resolve(e):r.reject("deleteUser")})}),r.promise}}]).factory("getUsers",["$q","coreAPILoader","$log",function(e,t,n){return function(o,r){var s={companyId:o.companyId,search:o.query,cursor:r,count:o.count,sort:o.sortBy+(o.reverse?" desc":" asc")};n.debug("getUsers",s);var a=e.defer();return t().then(function(e){var t=e.user.list(s);t.execute(function(e){n.debug("getUsers resp",e),e.result?a.resolve(e.result):a.reject("getUsers")})},a.reject),a.promise}}])}(angular),angular.module("risevision.common.components.ui-flow",["LocalStorageModule"]).constant("uiStatusDependencies",{_dependencies:{},_retries:{},addDependencies:function(e){angular.extend(this._dependencies,e)},setMaximumRetryCount:function(e,t){if(t<1)throw"Retry count for "+e+" must be equal to or greater than 1.";void 0===this._retries[e]&&(this._retries[e]=t)}}),angular.module("risevision.common.components.ui-flow").factory("uiFlowManager",["$log","$q","$injector","uiStatusDependencies","$rootScope","localStorageService",function(e,t,n,o,r,s){var a,i,c,l=null,u=o._dependencies,d=function(){return function(){var e=t.defer();return e.resolve(!0),e.promise}},m=function(t){var o;try{o=n.get(t)}catch(r){e.debug("Generating dummy status",t),o=d()}return o},p=function(n){var o;e.debug("Attempting to reach status",n,"...");var r=u[n];if(r){r instanceof Array||(r=[r]);var s=t.defer(),a=s;angular.forEach(r,function(r){var a=t.defer();s.promise.then(a.resolve,function(){p(r).then(function(){u[r]&&e.debug("Deps for status",r,"satisfied."),m(n)().then(function(){e.debug("Status",n,"satisfied."),a.resolve(!0)},function(){e.debug("Status",n,"not satisfied."),a.reject(n)})},function(t){u[r]?(e.debug("Failed to reach status",r," because its dependencies are not satisfied. Last rejected dep: ",t),a.reject(t)):a.reject(r)})}),o=s=a}),a.reject()}else o=t.defer(),m(n)().then(function(){e.debug("Termination status",n,"satisfied."),o.resolve(!0)},function(){e.debug("Termination status",n,"not satisfied."),o.reject(n)});return o.promise},g=!0,f=function(n){if(!n&&!i){var r=t.defer();return r.resolve(),r.promise}return!i&&g&&(i=n,l=angular.copy(o._retries),c=t.defer(),g=!1),i&&(c=t.defer(),p(i).then(function(e){i&&(a=i),c.resolve(e),i=null,g=!0},function(t){a=t,void 0!==l[t]&&(0===l[t]?(e.debug("Maximum allowed retries for status",t,"reached. Validation will cancel."),y()):l[t]--),g=!0,c.reject(t)})),c&&c.promise},h=function(e){return a="pendingCheck",f(e)},v=function(){s.set("risevision.ui-flow.state",{goalStatus:i,retriesLeft:l})},y=function(){a="",i="",l=null,g=!0,r.$broadcast("risevision.uiStatus.validationCancelled"),e.debug("UI status validation cancelled.")};if(s.get("risevision.ui-flow.state")){
var b=s.get("risevision.ui-flow.state");b&&b.goalStatus&&(i=b.goalStatus,e.debug("uiFlowManager.goalStatus restored to",b.goalStatus,b.retriesLeft),l=b.retriesLeft,c=t.defer(),g=!1),s.remove("risevision.ui-flow.state")}var C={invalidateStatus:h,cancelValidation:y,getStatus:function(){return a},isStatusUndetermined:function(){return"pendingCheck"===a},persist:v};return C}]),function(e){"use strict";try{e.module("risevision.common.config")}catch(t){e.module("risevision.common.config",[])}e.module("risevision.common.config").value("ENABLE_EXTERNAL_LOGGING",!0).value("CORE_URL","https://rvaserver2.appspot.com/_ah/api"),e.module("risevision.common.components.logging",[]),e.module("risevision.common.components.rvtokenstore",["risevision.common.components.util","LocalStorageModule","ngBiscuit"]),e.module("risevision.common.components.userstate",["ui.router","angular-md5","risevision.common.components.ui-flow","risevision.common.components.util","risevision.common.components.rvtokenstore","risevision.common.components.logging","risevision.common.components.loading","risevision.common.config","risevision.common.gapi","LocalStorageModule","risevision.core.cache","risevision.core.oauth2","risevision.core.company","risevision.core.util","risevision.core.userprofile"]).config(["$urlRouterProvider","$urlMatcherFactoryProvider","$stateProvider","$locationProvider",function(e,t,n,o){o.html5Mode(!0),o.hashPrefix("/"),e.when(/\/.*&id_token=.*&client_id=.*/,function(){console.log("Google Auth result received")}).when("/",["$location",function(e){var t=e.hash();return!(!t||!t.match(/\/.*&id_token=.*&client_id=.*/))&&void console.log("Google Auth result received")}]).otherwise("/"),t.strictMode(!1),n.state("common",{template:'<div class="app-launcher" ui-view></div>'}).state("common.auth",{"abstract":!0,templateProvider:["$templateCache",function(e){return e.get("userstate/auth-common.html")}]}).state("common.auth.unauthorized",{templateProvider:["$templateCache",function(e){return e.get("userstate/login.html")}],url:"/unauthorized/:state",controller:"LoginCtrl",params:{isSignUp:!1,passwordReset:null,accountConfirmed:null}}).state("common.auth.createaccount",{templateProvider:["$templateCache",function(e){return e.get("userstate/create-account.html")}],url:"/createaccount/:state",controller:"LoginCtrl",params:{isSignUp:!0,joinAccount:!1}}).state("common.auth.joinaccount",{templateProvider:["$templateCache",function(e){return e.get("userstate/create-account.html")}],url:"/joinaccount/:companyName",controller:"LoginCtrl",params:{isSignUp:!0,joinAccount:!0}}).state("common.auth.confirmaccount",{controller:"ConfirmAccountCtrl",template:"<div ui-view></div>",url:"/confirmaccount/:user/:token"}).state("common.auth.requestconfirmationemail",{templateProvider:["$templateCache",function(e){return e.get("userstate/request-confirmation-email.html")}],url:"/requestconfirmationemail",controller:"RequestConfirmationEmailCtrl"}).state("common.auth.requestpasswordreset",{templateProvider:["$templateCache",function(e){return e.get("userstate/request-password-reset.html")}],url:"/requestpasswordreset",controller:"RequestPasswordResetCtrl"}).state("common.auth.resetpassword",{templateProvider:["$templateCache",function(e){return e.get("userstate/reset-password-confirm.html")}],url:"/resetpassword/:user/:token",controller:"ResetPasswordConfirmCtrl"}).state("common.auth.unsubscribe",{templateProvider:["$templateCache",function(e){return e.get("userstate/unsubscribe.html")}],url:"/unsubscribe",controller:["$scope","$location",function(e,t){var n=t.path("/unsubscribe").search();e.email=n.email,e.id=n.id,e.name=n.name}]})}]).run(["$rootScope","$state","$stateParams","urlStateService","userState",function(e,t,n,o,r){r._restoreState(),e.$on("$stateChangeStart",function(e,n,o,r,s){!n||"common.auth.unauthorized"!==n.name&&"common.auth.unregistered"!==n.name&&"common.auth.createaccount"!==n.name||o.state||s.state&&(o.state=s.state,e.preventDefault(),t.go(n.name,o))}),e.$on("risevision.user.authorized",function(){var e=t.current.name;e.indexOf("common.auth")!==-1&&"common.auth.unsubscribe"!==e&&o.redirectToState(n.state)})}])}(angular),angular.module("risevision.common.components.userstate").factory("canAccessApps",["$q","$state","$location","userState","userAuthFactory","urlStateService",function(e,t,n,o,r,s){return function(a,i){var c=e.defer();return r.authenticate(!1).then(function(){return o.isRiseVisionUser()?void c.resolve():e.reject()}).then(null,function(){var e;o.isLoggedIn()?t.get("common.auth.unregistered")&&(e="common.auth.unregistered"):e=a?"common.auth.createaccount":"common.auth.unauthorized",e?(t.go(e,{state:s.get()},{reload:!0}),i||n.replace(),c.reject()):c.resolve()}),c.promise}}]),angular.module("risevision.common.components.logging").factory("bigQueryLogging",["externalLogging","userState",function(e,t){var n={};return n.logEvent=function(n,o,r,s,a){return e.logEvent(n,o,r,s||t.getUsername(),a||t.getSelectedCompanyId())},n}]),function(e){"use strict";e.module("risevision.common.components.userstate").factory("companyState",["$location","getCompany","objectHelper","$rootScope","$log","$q",function(t,n,o,r,s,a){var i,c={userCompany:{},selectedCompany:{}},l=function(){o.clearObj(c.selectedCompany),o.clearObj(c.userCompany),s.debug("Company state has been reset.")};t.search().cid&&(s.debug("cid",t.search().cid,"saved for later processing."),i=t.search().cid);var u=function(){var e=a.defer();return n().then(function(e){var t=p.getSelectedCompanyId()?p.getSelectedCompanyId():i;return o.clearAndCopy(e,c.userCompany),d(t)}).then(null,function(){p.resetCompany()})["finally"](function(){i=null,e.resolve(null)}),e.promise},d=function(e){var t=a.defer();return e&&e!==c.userCompany.id?n(e).then(function(e){o.clearAndCopy(e,c.selectedCompany),t.resolve(),r.$broadcast("risevision.company.selectedCompanyChanged")}).then(null,function(e){console.error("Failed to load selected company.",e),t.reject(e)}):(p.resetCompany(),t.resolve()),t.promise},m=function(){var e=a.defer();return n(c.selectedCompany.id).then(function(t){o.clearAndCopy(t,c.selectedCompany),e.resolve(),r.$broadcast("risevision.company.updated",{companyId:t.id})}).then(null,function(t){console.error("Failed to reload selected company.",t),e.reject(t)}),e.promise},p={init:u,switchCompany:d,reloadSelectedCompany:m,updateCompanySettings:function(e){e&&e.id===p.getSelectedCompanyId()&&o.clearAndCopy(e,c.selectedCompany),e&&e.id===p.getUserCompanyId()&&o.clearAndCopy(e,c.userCompany),r.$broadcast("risevision.company.updated",{companyId:e.id})},resetCompany:function(){o.clearAndCopy(c.userCompany,c.selectedCompany),r.$broadcast("risevision.company.selectedCompanyChanged")},resetCompanyState:l,getUserCompanyId:function(){return c.userCompany&&c.userCompany.id||null},getUserCompanyName:function(){return c.userCompany&&c.userCompany.name||null},getSelectedCompanyId:function(){return c.selectedCompany&&c.selectedCompany.id||null},getSelectedCompanyName:function(){return c.selectedCompany&&c.selectedCompany.name||null},getSelectedCompanyCountry:function(){return c.selectedCompany&&c.selectedCompany.country||null},getCopyOfUserCompany:function(t){return t?e.extend({},c.userCompany):o.follow(c.userCompany)},getCopyOfSelectedCompany:function(t){return t?e.extend({},c.selectedCompany):o.follow(c.selectedCompany)},isSubcompanySelected:function(){return c.selectedCompany&&c.selectedCompany.id!==(c.userCompany&&c.userCompany.id)},isTestCompanySelected:function(){return c.selectedCompany&&c.selectedCompany.isTest===!0},isSeller:function(){return!(!c.selectedCompany||!c.selectedCompany.sellerId)},isRootCompany:function(){return c.userCompany&&!c.userCompany.parentId},isSelectedCompanyChargebee:function(){return c.selectedCompany&&"Chargebee"===c.selectedCompany.origin},isEducationCustomer:function(){return c.selectedCompany&&("PRIMARY_SECONDARY_EDUCATION"===c.selectedCompany.companyIndustry||"HIGHER_EDUCATION"===c.selectedCompany.companyIndustry)}};return p}])}(angular),function(e){"use strict";e.module("risevision.common.components.userstate").factory("customAuthFactory",["$q","$log","gapiLoader","userauth","userState",function(e,t,n,o,r){var s={};return s.authenticate=function(s){var a=e.defer(),i=r._state;return s&&s.username&&s.password?e.all([n(),o.login(s.username,s.password)]).then(function(e){var n=e[0],o=e[1]&&e[1].result;if(t.debug("JWT login result:",o),o&&o.item){var r={access_token:o.item,expires_in:"3600",token_type:"Bearer"};n.auth.setToken(r),a.resolve({email:s.username,token:r})}else a.reject("Invalid Auth Token (JWT)")}).then(null,function(e){a.reject(e)}):i.userToken&&i.userToken.token?n().then(function(e){e.auth.setToken(i.userToken.token),a.resolve(i.userToken)}):a.reject(),a.promise},s.addUser=function(t){var n=e.defer();return t&&t.username&&t.password?o.add(t.username,t.password).then(function(e){n.resolve(e)}).then(null,function(){n.reject()}):n.reject(),n.promise},s}])}(angular),angular.module("risevision.common.components.logging").constant("EXTERNAL_LOGGER_SERVICE_URL","https://www.googleapis.com/bigquery/v2/projects/client-side-events/datasets/Apps_Events/tables/TABLE_ID/insertAll").constant("EXTERNAL_LOGGER_REFRESH_URL","https://www.googleapis.com/oauth2/v3/token?client_id=1088527147109-6q1o2vtihn34292pjt4ckhmhck0rk0o7.apps.googleusercontent.com&client_secret=nlZyrcPLg6oEwO9f9Wfn29Wh&refresh_token=1/xzt4kwzE1H7W9VnKB8cAaCx6zb4Es4nKEoqaYHdTD15IgOrJDtdun6zK6XiATCKT&grant_type=refresh_token").factory("externalLogging",["$http","$window","$q","$log","EXTERNAL_LOGGER_REFRESH_URL","EXTERNAL_LOGGER_SERVICE_URL","ENABLE_EXTERNAL_LOGGING",function(e,t,n,o,r,s,a){var i,c,l={},u=function(){var e=new Date,t=e.getUTCFullYear(),n=e.getUTCMonth()+1,o=e.getUTCDate();return n<10&&(n="0"+n),o<10&&(o="0"+o),t.toString()+n.toString()+o.toString()},d={kind:"bigquery#tableDataInsertAllRequest",skipInvalidRows:!1,ignoreUnknownValues:!1,templateSuffix:u(),rows:[{insertId:"",json:{event:"",event_details:"",event_value:0,host:"",ts:0,user_id:"",company_id:""}}]};return l.logEvent=function(r,i,c,u,m){if(o.debug("BQ log",r,i,c,u,m),a===!1)return void o.debug("External Logging DISABLED");var p=n.defer();return l.getToken().then(function(n){var a=JSON.parse(JSON.stringify(d)),l=s.replace("TABLE_ID","apps_events");a.rows[0].insertId=Math.random().toString(36).substr(2).toUpperCase(),a.rows[0].json.event=r,i&&(a.rows[0].json.event_details=i),c&&(a.rows[0].json.event_value=c),a.rows[0].json.user_id=u||"",a.rows[0].json.company_id=m||"",a.rows[0].json.host=t.location.hostname,a.rows[0].json.ts=(new Date).toISOString(),e.post(l,a,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+n}}).then(function(e){p.resolve(e)},function(e){o.debug("error posting to BQ",e),p.reject(e)})},function(e){o.debug("BQ token ERROR",e),p.reject(e)}),p.promise},l.getToken=function(){var t=n.defer();return i&&(new Date).getTime()-c<358e4?t.resolve(i):e.post(r).then(function(e){i=e.data.access_token,c=(new Date).getTime(),t.resolve(e.data.access_token)},function(){t.reject()}),t.promise},l}]),function(e){"use strict";e.module("risevision.common.components.userstate").factory("googleAuthFactory",["$rootScope","$q","$log","$window","$stateParams","auth2APILoader","getOAuthUserInfo","uiFlowManager","userState","urlStateService",function(e,t,n,o,r,s,a,i,c,l){var u=function(){var e=t.defer();return s().then(function(t){var o=t.getAuthInstance()&&t.getAuthInstance().isSignedIn.get();n.debug("auth2.isSignedIn result:",o),o?e.resolve(o):e.reject("Failed to authorize user (auth2)")}).then(null,e.reject),e.promise},d=function(){var e=t.defer();return u().then(a).then(function(t){c._state.redirectState&&(l.redirectToState(c._state.redirectState),delete c._state.redirectState),e.resolve(t)}).then(null,function(t){e.reject(t)}),e.promise},m=function(){return c._state.inRVAFrame||o.self!==o.top},p=function(){var n,a=t.defer(),u=r.state;e.redirectToRoot===!1?(n=o.location.href.substr(0,o.location.href.indexOf("#"))||o.location.href,u=l.clearStatePath(u)):n=o.location.origin+"/",c._state.redirectState=u,c._persistState(),i.persist();var p={response_type:"token",prompt:"select_account",ux_mode:m()?"popup":"redirect",redirect_uri:n};return s().then(function(e){return e.getAuthInstance().signIn(p)}).then(function(){m()?a.resolve(d()):a.resolve()}).then(null,function(e){a.reject(e)}),a.promise},g={authenticate:function(e){return e?p():d()}};return g}])}(angular),function(e){"use strict";e.module("risevision.common.components.rvtokenstore").value("TOKEN_STORE_KEY","rv-auth-object").service("rvTokenStore",["$log","$location","cookieStore","getBaseDomain","TOKEN_STORE_KEY",function(e,t,n,o,r){var s=function(){var e=n.get(r);try{return JSON.parse(e)}catch(t){return e}},a=function(e){var t=o();"localhost"===t?n.put(r,JSON.stringify(e),{path:"/"}):n.put(r,JSON.stringify(e),{domain:t,path:"/"})},i=function(){var e=o();"localhost"===e?n.remove(r,{path:"/"}):n.remove(r,{domain:e,path:"/"})},c={read:s,write:a,clear:i};return c}])}(angular),function(e){"use strict";e.module("risevision.common.components.userstate").run(["$rootScope","userState","selectedCompanyUrlHandler",function(e,t,n){e.$on("risevision.company.selectedCompanyChanged",function(e){e&&n.updateUrl()}),e.$on("$stateChangeSuccess",n.updateSelectedCompanyFromUrl),e.$on("$routeChangeSuccess",n.updateSelectedCompanyFromUrl),e.$on("$locationChangeSuccess",n.locationChangeSuccess)}]).service("selectedCompanyUrlHandler",["$state","$stateParams","$location","userState",function(e,t,n,o){this.updateUrl=function(){var r=o.getSelectedCompanyId();r&&n.search().cid!==r&&!e.transition&&(t.cid=r,e.params.cid=r,n.search("cid",r))},this.updateSelectedCompanyFromUrl=function(){var r=n.search().cid;if(r&&o.getUserCompanyId()&&r!==o.getSelectedCompanyId())o.switchCompany(r);else if(!r&&o.getSelectedCompanyId()){var s=n.absUrl();t.cid=o.getSelectedCompanyId(),e.params.cid=o.getSelectedCompanyId(),n.search("cid",o.getSelectedCompanyId()),s===n.destUrl&&n.replace()}},this.locationChangeSuccess=function(e,t){n.destUrl=t}}])}(angular),function(e){"use strict";e.module("risevision.common.components.userstate").factory("urlStateService",["$window","$location","userState",function(e,t,n){var o={};o.get=function(){var t="",n={p:null,u:null,s:null};return n.p=e.location.pathname?e.location.pathname.substring(1):"",n.s=e.location.search,n.u=e.location.hash,(n.p||n.s||n.u)&&(t=encodeURIComponent(JSON.stringify(n))),t};var r=function(e){var t={};try{t=JSON.parse(decodeURIComponent(e))}catch(n){}return t};return o.redirectToState=function(o){var s=r(o);s.u||!t.$$html5?s.p||s.s?(n._persistState(),e.location.replace(s.p+s.s+s.u)):e.location.hash=s.u:(s.p=s.p||"/",s.s=s.s||"",t.url(s.p+s.s),t.replace())},o.clearStatePath=function(e){var t=r(e);return t.p=void 0,t.s=void 0,encodeURIComponent(JSON.stringify(t))},o.getUrlParam=function(e){if(t.search()[e])return t.search()[e];var n=decodeURIComponent(decodeURIComponent(decodeURIComponent(decodeURIComponent(t.path())))),o=new RegExp("[?&]"+e+'=([^&#"]*)').exec(n);return o&&o[1]},o}])}(angular),function(e){"use strict";e.module("risevision.common.components.userstate").value("FORCE_GOOGLE_AUTH",!1).factory("userAuthFactory",["$q","$log","$location","$rootScope","$loading","$window","$document","auth2APILoader","objectHelper","rvTokenStore","externalLogging","userState","googleAuthFactory","customAuthFactory","FORCE_GOOGLE_AUTH",function(t,n,o,r,s,a,i,c,l,u,d,m,p,g,f){var h,v,y=m._state,b=!0,C=function(e){if(b){b=!1;try{var t=(new Date).getTime()-a.performance.timing.navigationStart;d.logEvent("page load time",e,t,m.getUsername(),m.getSelectedCompanyId())}catch(o){n.debug("Error logging load time")}}},w=function(e){y.userToken=e,u.write(y.userToken)},S=function(){},A=function(){n.debug("Clearing user token..."),S(),y.userToken=null,u.clear(),m._resetState()},E=function(){var t=u.read();e.equals(t,y.userToken)?y.userToken&&(v=null,_(!1)["finally"](function(){y.userToken||(n.error("Authentication Failed. User no longer signed in."),a.location.reload())})):(n.error("Authentication Failed. User token no longer matches stored token."),a.location.reload())},$=function(){var e,t=i[0];"undefined"!=typeof t.hidden?e="visibilityState":"undefined"!=typeof t.mozHidden?e="mozVisibilityState":"undefined"!=typeof t.msHidden?e="msVisibilityState":"undefined"!=typeof t.webkitHidden&&(e="webkitVisibilityState"),n.debug("visibility: "+t[e]),"visible"===t[e]&&(E(),r.$broadcast("risevision.page.visible",!0))},P=function(){var e,t=i[0];return"undefined"!=typeof t.hidden?e="visibilitychange":"undefined"!=typeof t.mozHidden?e="mozvisibilitychange":"undefined"!=typeof t.msHidden?e="msvisibilitychange":"undefined"!=typeof t.webkitHidden&&(e="webkitvisibilitychange"),e},x=function(){document.addEventListener(P(),$)},I=function(){document.removeEventListener(P(),$)},k=function(e){var n=!1;return h?h.promise:e?y.user.username&&y.profile.username&&y.user.username===e.email?t.resolve():(h=t.defer(),l.clearAndCopy({userId:e.id,username:e.email,picture:e.picture},y.user),w(e),m.refreshProfile().then(null,function(e){if(e&&403!==e.code)return h.reject("Refresh Profile Error"),h=void 0,t.reject()}).then(function(){h.resolve(),r.$broadcast("risevision.user.authorized"),n||r.$broadcast("risevision.user.userSignedIn"),h=void 0}),h.promise):t.reject("No user")},_=function(e,o){var r,a=!1;if(e&&(v=null,A()),v)return v.promise;v=t.defer(),r=v,n.debug("authentication called");var i=function(){var t;o||y.userToken&&y.userToken.token&&!f?(a=!0,t=g.authenticate(o)):t=p.authenticate(e),t.then(k).then(function(){m._setIsRiseAuthUser(a),r.resolve()}).then(null,function(e){y.redirectDetected?(n.error("Authentication Error from Redirect: ",e),delete y.redirectDetected):n.debug("Authentication Error: ",e),A(),r.reject(e)})["finally"](function(){x(),s.stopGlobal("risevision.user.authenticate"),C("authenticated user")})};return c()["finally"](i),e&&s.startGlobal("risevision.user.authenticate"),r.promise},M=function(e){return c().then(function(t){m.isRiseAuthUser()||(e&&(a.logoutFrame.location="https://accounts.google.com/Logout"),t.getAuthInstance().signOut()),v=null,A(),r.$broadcast("risevision.user.signedOut"),n.debug("User is signed out.")})},T={authenticate:_,authenticatePopup:function(){return _(!0)},signOut:M,addEventListenerVisibilityAPI:x,removeEventListenerVisibilityAPI:I};return T}])}(angular),function(){"use strict";angular.module("risevision.common.components.userstate").service("userauth",["$q","$log","riseAPILoader",function(e,t,n){var o={add:function(o,r){var s=e.defer(),a={username:o,password:r};return n().then(function(e){return e.userauth.add(a)}).then(function(e){t.debug("added user credentials",e),s.resolve(e.result)}).then(null,function(e){console.error("Failed to add credentials.",e),s.reject(e)}),s.promise},updatePassword:function(o,r,s){var a=e.defer(),i={username:o,oldPassword:r,newPassword:s};return n().then(function(e){return e.userauth.updatePassword(i)}).then(function(e){t.debug("update user credentials resp",e),a.resolve(e.result)}).then(null,function(e){console.error("Failed to update credentials.",e),a.reject(e)}),a.promise},login:function(o,r){var s=e.defer(),a={username:o,password:r};return n().then(function(e){return e.userauth.login(a)}).then(function(e){t.debug("login successful",e),s.resolve(e)}).then(null,function(e){console.error("Failed to login user.",e),s.reject(e)}),s.promise},refreshToken:function(o,r){var s=e.defer(),a={username:o,token:r};return n().then(function(e){return e.userauth.refreshToken(a)}).then(function(e){t.debug("token refresh successful",e),s.resolve(e)}).then(null,function(e){console.error("Failed to refresh token.",e),s.reject(e)}),s.promise},confirmUserCreation:function(o,r){var s=e.defer(),a={username:o,userConfirmedToken:r};return n().then(function(e){return e.userauth.confirmUserCreation(a)}).then(function(e){t.debug("Confirm user creation successful",e),s.resolve(e)}).then(null,function(e){console.error("Failed to confirm user creation.",e),s.reject(e)}),s.promise},requestConfirmationEmail:function(o){var r=e.defer(),s={username:o};return n().then(function(e){return e.userauth.requestConfirmationEmail(s)}).then(function(e){t.debug("Request confirmation email successful",e),r.resolve(e)}).then(null,function(e){console.error("Failed to request confirmation email.",e),r.reject(e)}),r.promise},requestPasswordReset:function(o){var r=e.defer(),s={username:o};return n().then(function(e){return e.userauth.requestPasswordReset(s)}).then(function(e){t.debug("Request password reset successful",e),r.resolve(e)}).then(null,function(e){console.error("Failed to request password reset.",e),r.reject(e)}),r.promise},resetPassword:function(o,r,s){var a=e.defer(),i={username:o,passwordResetToken:r,newPassword:s};return n().then(function(e){return e.userauth.resetPassword(i)}).then(function(e){t.debug("Reset password successful",e),a.resolve(e)}).then(null,function(e){console.error("Failed to reset password.",e),a.reject(e)}),a.promise}};return o}])}(),function(e){"use strict";e.module("risevision.common.components.userstate").value("PROFILE_PICTURE_URL","https://www.gravatar.com/avatar/{emailMD5}?d=mm").factory("userState",["$q","$rootScope","$window","$log","$location","userInfoCache","getUserProfile","companyState","objectHelper","localStorageService","rvTokenStore","md5","PROFILE_PICTURE_URL",function(t,n,o,r,s,a,i,c,l,u,d,m,p){var g={profile:{},user:{},roleMap:{},userToken:d.read(),inRVAFrame:e.isDefined(s.search().inRVA),isRiseAuthUser:!1},f=function(){var e=t.defer();return i(g.user.username,!0).then(function(e){return A.updateUserProfile(e),c.init()}).then(function(){e.resolve()},e.reject),e.promise},h=function(){return!!g.user.username},v=function(){return null!==g.profile.username&&void 0!==g.profile.username},y=function(t){return e.isDefined(g.roleMap[t])},b=function(){return o.gapi&&o.gapi.auth?o.gapi.auth.getToken():null},C=function(){var t=u.get("risevision.common.userState");t&&(e.extend(g,t),u.remove("risevision.common.userState"),r.debug("userState restored with",t),g.redirectDetected=!0)},w=function(){a.removeAll(),l.clearObj(g.user),l.clearObj(g.profile),g.roleMap={},c.resetCompanyState(),r.debug("User state has been reset.")},S=function(){var e=A.getUsername()&&m.createHash(A.getUsername()),t=e||"0";return p.replace("{emailMD5}",t)},A={getUsername:function(){return g.user&&g.user.username||null},getUserFullName:function(){var e=g.profile&&g.profile.firstName||"",t=g.profile&&g.profile.lastName||"";return(e+" "+t).trim()},getUserEmail:function(){return g.profile.email},getCopyOfProfile:function(t){return t?e.extend({},g.profile):l.follow(g.profile)},getUserPicture:function(){return g.user.picture||S()},hasRole:y,inRVAFrame:function(){return g.inRVAFrame},isRiseAdmin:function(){return y("sa")&&c.isRootCompany()},isRiseStoreAdmin:function(){return y("ba")&&c.isRootCompany()},isUserAdmin:function(){return y("ua")},isPurchaser:function(){return y("pu")},isRiseAuthUser:function(){return g.isRiseAuthUser},isSeller:c.isSeller,isRiseVisionUser:v,isLoggedIn:h,getAccessToken:b,checkUsername:function(e){return(e||!1)&&(A.getUsername()||!1)&&e.toUpperCase()===A.getUsername().toUpperCase()},updateUserProfile:function(t){A.checkUsername(t.username)&&(l.clearAndCopy(e.extend({username:g.user.username},t),g.profile),g.roleMap={},g.profile.roles&&g.profile.roles.forEach(function(e){g.roleMap[e]=!0}),n.$broadcast("risevision.user.updated"))},refreshProfile:f,getUserCompanyId:c.getUserCompanyId,getUserCompanyName:c.getUserCompanyName,getSelectedCompanyId:c.getSelectedCompanyId,getSelectedCompanyName:c.getSelectedCompanyName,getSelectedCompanyCountry:c.getSelectedCompanyCountry,getCopyOfUserCompany:c.getCopyOfUserCompany,getCopyOfSelectedCompany:c.getCopyOfSelectedCompany,isSubcompanySelected:c.isSubcompanySelected,isTestCompanySelected:c.isTestCompanySelected,isRootCompany:c.isRootCompany,isSelectedCompanyChargebee:c.isSelectedCompanyChargebee,isEducationCustomer:c.isEducationCustomer,updateCompanySettings:c.updateCompanySettings,updateUserCompanySettings:c.updateUserCompanySettings,resetCompany:c.resetCompany,switchCompany:c.switchCompany,reloadSelectedCompany:c.reloadSelectedCompany,_restoreState:C,_resetState:w,_setUserToken:function(e){g.params=e,g.userToken="dummy"},_persistState:function(){u.set("risevision.common.userState",g)},_state:g,_setIsRiseAuthUser:function(e){g.isRiseAuthUser=e}};return A}])}(angular),angular.module("risevision.common.components.userstate").directive("confirmPasswordValidator",[function(){return{require:"ngModel",restrict:"A",scope:{confirmPasswordValidator:"="},link:function(e,t,n,o){var r=function(t){return t&&e.confirmPasswordValidator&&t!==e.confirmPasswordValidator?o.$setValidity("passwordMatch",!1):o.$setValidity("passwordMatch",!0),t};o.$parsers.unshift(r),o.$formatters.unshift(r)}}}]),angular.module("risevision.common.components.userstate").controller("ConfirmAccountCtrl",["$scope","$loading","$log","$state","$stateParams","userauth",function(e,t,n,o,r,s){t.startGlobal("auth-confirm-account"),s.confirmUserCreation(r.user,r.token).then(function(){n.log("User confirmed")})["catch"](function(e){console.error(e)})["finally"](function(){t.stopGlobal("auth-confirm-account"),o.go("common.auth.unauthorized",{accountConfirmed:!0})})}]),angular.module("risevision.common.components.userstate").controller("LoginCtrl",["$scope","$loading","$stateParams","$state","userAuthFactory","customAuthFactory","uiFlowManager","urlStateService","userState","FORCE_GOOGLE_AUTH",function(e,t,n,o,r,s,a,i,c,l){e.forms={},e.credentials={},e.messages={},e.errors={},e.FORCE_GOOGLE_AUTH=l,e.isSignUp=n.isSignUp,e.joinAccount=n.joinAccount,e.companyName=n.companyName,e.messages.passwordReset=n.passwordReset,e.messages.accountConfirmed=n.accountConfirmed,e.googleLogin=function(e){t.startGlobal("auth-buttons-login"),r.authenticate(!0)["finally"](function(){t.stopGlobal("auth-buttons-login"),a.invalidateStatus(e)})},e.customLogin=function(o){e.errors={},e.messages={},e.forms.loginForm.$valid&&(t.startGlobal("auth-buttons-login"),r.authenticate(!0,e.credentials).then(function(){i.redirectToState(n.state)})["catch"](function(t){400===t.status?e.messages.isGoogleAccount=!0:409===t.status?e.errors.unconfirmedError=!0:(console.error(t),e.errors.loginError=!0)})["finally"](function(){t.stopGlobal("auth-buttons-login"),a.invalidateStatus(o)}))},e.createAccount=function(n){e.errors={},e.messages={},e.forms.loginForm.$valid&&(t.startGlobal("auth-buttons-login"),s.addUser(e.credentials).then(function(){e.errors.confirmationRequired=!0}).then(null,function(){e.errors.duplicateError=!0})["finally"](function(){t.stopGlobal("auth-buttons-login"),a.invalidateStatus(n)}))}}]),angular.module("risevision.common.components.userstate").controller("RequestConfirmationEmailCtrl",["$scope","$loading","$log","userauth",function(e,t,n,o){e.forms={},e.credentials={},e.emailSent=!1,e.isGoogleAccount=!1,e.emailAlreadyConfirmed=!1,e.requestConfirmationEmail=function(){e.emailSent=!1,e.isGoogleAccount=!1,e.emailAlreadyConfirmed=!1,t.startGlobal("auth-request-confirmation-email"),o.requestConfirmationEmail(e.credentials.username).then(function(){n.log("Confirmation email request sent"),e.emailSent=!0})["catch"](function(t){400===t.status?(n.log("Requested confirmation email for Google account"),e.isGoogleAccount=!0):409===t.status?(n.log("Requested confirmation email for already confirmed account"),e.emailAlreadyConfirmed=!0):(console.error(t),e.emailSent=!0)})["finally"](function(){t.stopGlobal("auth-request-confirmation-email")})}}]),angular.module("risevision.common.components.userstate").controller("RequestPasswordResetCtrl",["$scope","$loading","$log","userauth",function(e,t,n,o){e.forms={},e.credentials={},e.errors={},e.emailSent=!1,e.isGoogleAccount=!1,e.requestPasswordReset=function(){e.emailSent=!1,e.isGoogleAccount=!1,t.startGlobal("auth-request-password-reset"),o.requestPasswordReset(e.credentials.username).then(function(){n.log("Reset password request sent"),e.emailSent=!0})["catch"](function(t){400===t.status?(n.log("Requested password reset for Google account"),e.isGoogleAccount=!0):(console.error(t),e.emailSent=!0)})["finally"](function(){t.stopGlobal("auth-request-password-reset")})}}]),angular.module("risevision.common.components.userstate").controller("ResetPasswordConfirmCtrl",["$scope","$loading","$log","$state","$stateParams","userauth",function(e,t,n,o,r,s){function a(){e.emailResetSent=!1,e.invalidToken=!1}e.forms={},e.credentials={},e.errors={},e.resetPassword=function(){a(),e.forms.resetPasswordForm.$valid&&(t.startGlobal("auth-reset-password"),s.resetPassword(r.user,r.token,e.credentials.newPassword).then(function(){n.log("Password updated"),o.go("common.auth.unauthorized",{passwordReset:!0})})["catch"](function(t){var n=t.result&&t.result.error&&t.result.error.message;"Password reset token does not match"===n?e.invalidToken=!0:console.error(t)})["finally"](function(){t.stopGlobal("auth-reset-password")}))},e.requestPasswordReset=function(){a(),t.startGlobal("auth-request-password-reset"),s.requestPasswordReset(r.user).then(function(){n.log("Email sent"),e.emailResetSent=!0})["catch"](function(e){console.error(e)})["finally"](function(){t.stopGlobal("auth-request-password-reset")})}}]),function(e){try{e=angular.module("risevision.common.components.userstate")}catch(t){e=angular.module("risevision.common.components.userstate",[])}e.run(["$templateCache",function(e){e.put("userstate/auth-common.html",'<div class="app-launcher-login"><div class="container"><div class="panel"><div class="row"><div class="col-sm-6 col-xs-12"><div class="rise-logo"><img src="https://s3.amazonaws.com/Rise-Images/Website/rise-logo.svg"></div></div><div class="col-sm-6 col-xs-12"><div ui-view=""></div></div></div></div></div></div>')}])}(),function(e){try{e=angular.module("risevision.common.components.userstate")}catch(t){e=angular.module("risevision.common.components.userstate",[])}e.run(["$templateCache",function(e){e.put("userstate/auth-form.html",'<form id="forms.loginForm" name="forms.loginForm" role="form" novalidate=""><div><div class="panel-body bg-danger u_margin-sm-top" ng-show="errors.duplicateError"><p class="u_remove-bottom"><i class="fa fa-warning icon-left"></i> <span id="already-registered-warning">This email address is already registered. You can <a ui-sref="common.auth.unauthorized">sign in</a> with this address.</span></p></div><div class="panel-body bg-danger u_margin-sm-top" ng-show="errors.loginError"><p class="u_remove-bottom"><i class="fa fa-warning icon-left"></i> <span id="incorrect-credentials-error">Your email address/password combination is incorrect.<br>If you are having problems signing in, please check this <a href="https://help.risevision.com/hc/en-us/articles/115001402743-I-am-having-trouble-logging-in-what-can-I-do-" target="_blank">Help Center article</a>.</span></p></div><div class="panel-body bg-info u_margin-sm-top" ng-show="errors.unconfirmedError"><p class="u_remove-bottom"><i class="fa fa-warning icon-left"></i> <span>Your email address has not been confirmed.<br><a ui-sref="common.auth.requestconfirmationemail">Resend Email Confirmation</a></span></p></div><div class="panel-body bg-info u_margin-sm-top" ng-show="errors.confirmationRequired"><p class="u_remove-bottom"><i class="fa fa-warning icon-left"></i> <span>We\'ve sent a confirmation email to {{credentials.username}}.<br>Please check your inbox to complete your account registration.</span></p></div><div class="panel-body bg-info u_margin-sm-top" ng-show="messages.passwordReset"><p class="u_remove-bottom"><i class="fa fa-warning icon-left"></i> <span>Password successfully updated.<br>Please sign in to proceed.</span></p></div><div class="panel-body bg-info u_margin-sm-top" ng-show="messages.accountConfirmed"><p class="u_remove-bottom"><i class="fa fa-warning icon-left"></i> <span>Account successfully confirmed.<br>Please sign in to proceed.</span></p></div><div class="panel-body bg-danger u_margin-sm-top" ng-show="messages.isGoogleAccount"><p class="u_remove-bottom"><i class="fa fa-warning icon-left"></i> <span>This account is authenticated by Google.<br>Please, use the \'Sign in with Google\' button.</span></p></div></div><div class="u_margin-sm-top" ng-show="!errors.confirmationRequired"><div class="form-group" ng-class="{\'has-error\': (forms.loginForm.$submitted && forms.loginForm.username.$invalid)}" show-errors=""><label class="control-label">Email</label> <input type="email" class="form-control" placeholder="Enter Your Email Address" id="username" name="username" ng-model="credentials.username" required="" focus-me="true" autocomplete="email"><p class="text-danger" ng-show="forms.loginForm.$submitted && forms.loginForm.username.$invalid">Please enter an Email</p></div><div class="form-group" ng-class="{\'has-error\': (forms.loginForm.$submitted && forms.loginForm.password.$invalid && isSignUp), \'has-message\': forms.loginForm.password.$valid && isSignUp}" show-errors=""><label class="control-label">{{ isSignUp ? \'Create \' : \'\'}}Password</label> <input type="password" class="form-control" placeholder="Enter Password" id="password" name="password" ng-model="credentials.password" required="" minlength="4"><p class="text-danger" ng-show="forms.loginForm.$submitted && forms.loginForm.password.$error.minlength && isSignUp">New Password must be at least 4 characters long.</p><p class="text-warning" ng-show="forms.loginForm.password.$valid && isSignUp">A strong password is at least 8 characters, includes uppercase/lowercase letters, and one or more numbers.</p></div><div class="form-group" ng-class="{ \'has-error\' : (forms.loginForm.$submitted && forms.loginForm.confirmPassword.$invalid) }" ng-if="isSignUp"><label class="control-label" for="confirm-password">Confirm Password</label> <input id="confirmPassword" type="password" name="confirmPassword" class="form-control" placeholder="Re-type Password" ng-model="credentials.confirmPassword" required="" confirm-password-validator="credentials.password"><p ng-show="forms.loginForm.$submitted && forms.loginForm.confirmPassword.$error.required" class="text-danger">Confirm Password is required.</p><p ng-show="forms.loginForm.$submitted && forms.loginForm.confirmPassword.$error.passwordMatch" class="text-danger">New Password and Confirm Password must match.</p></div></div></form>');
}])}(),function(e){try{e=angular.module("risevision.common.components.userstate")}catch(t){e=angular.module("risevision.common.components.userstate",[])}e.run(["$templateCache",function(e){e.put("userstate/create-account.html",'<div ng-if="!joinAccount"><h1 class="u_remove-top">Get Started For Free</h1><p class="lead text-muted">No credit card or commitment required.</p></div><div ng-if="joinAccount"><h1 class="u_remove-top">Join Your Company</h1><p class="lead text-muted">Complete your account <span ng-if="!companyName">registration</span><span ng-if="companyName">with {{companyName}}</span>.</p></div><div class="col-xs-12 col-md-8" ng-show="!errors.confirmationRequired"><button class="btn btn-google-auth btn-hg" id="sign-up-google-link" ng-click="googleLogin(\'registrationComplete\')"><span><img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg"> Sign up with Google</span></button></div><div class="section-divider col-xs-12 col-md-8 u_margin-md-top" ng-show="!errors.confirmationRequired" ng-if="!FORCE_GOOGLE_AUTH"><div></div><span>OR</span><div></div></div><div class="col-md-8 col-xs-12" ng-if="!FORCE_GOOGLE_AUTH"><div ng-include="\'userstate/auth-form.html\'"></div><div class="form-group" ng-show="!errors.confirmationRequired"><button id="sign-up-button" class="btn btn-primary btn-hg" type="submit" form="forms.loginForm" ng-click="createAccount(\'registrationComplete\')"><span translate="Sign Up"></span></button></div></div><br><div class="col-xs-12 u_margin-lg-top"><p class="text-muted">Already have an account? <a id="sign-in-link" ui-sref="common.auth.unauthorized">Sign in</a></p></div>')}])}(),function(e){try{e=angular.module("risevision.common.components.userstate")}catch(t){e=angular.module("risevision.common.components.userstate",[])}e.run(["$templateCache",function(e){e.put("userstate/login.html",'<h1 class="u_remove-top">Sign In</h1><p class="lead text-muted">to your Rise Vision account</p><div class="col-xs-12 col-md-8"><button class="btn btn-google-auth btn-hg" id="sign-in-google-link" ng-click="googleLogin(\'registrationComplete\')"><span><img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg"> Sign in with Google</span></button></div><div class="section-divider col-xs-12 col-md-8 u_margin-md-top" ng-if="!FORCE_GOOGLE_AUTH"><div></div><span>OR</span><div></div></div><div class="col-md-8 col-xs-12" ng-if="!FORCE_GOOGLE_AUTH"><div ng-include="\'userstate/auth-form.html\'"></div><div class="form-group"><button id="sign-in-button" class="btn btn-primary btn-hg" type="submit" form="forms.loginForm" ng-click="customLogin(\'registrationComplete\')"><span translate="Sign In"></span></button></div></div><br><div class="col-xs-12 u_margin-lg-top"><p class="text-muted" ng-if="!FORCE_GOOGLE_AUTH"><a id="reset-password-link" ui-sref="common.auth.requestpasswordreset">Forgot your password?</a></p><p class="text-muted">Don\'t have an account? <a id="sign-up-link" ui-sref="common.auth.createaccount">Sign up</a></p></div>')}])}(),function(e){try{e=angular.module("risevision.common.components.userstate")}catch(t){e=angular.module("risevision.common.components.userstate",[])}e.run(["$templateCache",function(e){e.put("userstate/request-confirmation-email.html",'<h1 class="u_remove-top">Send Confirmation Email</h1><div class="col-xs-12 col-md-8"><div class="panel-body bg-info u_margin-lg-top" ng-show="emailSent"><p class="u_remove-bottom"><i class="fa fa-warning icon-left"></i> <span>We\'ve sent a confirmation email to {{credentials.username}}.<br>Please check your inbox to complete your account registration.<br></span></p></div><div class="panel-body bg-info u_margin-lg-top" ng-show="emailAlreadyConfirmed"><p class="u_remove-bottom"><i class="fa fa-warning icon-left"></i> <span>The {{credentials.username}} account is already confirmed.</span></p></div><div class="panel-body bg-danger u_margin-lg-top" ng-show="isGoogleAccount"><p class="u_remove-bottom"><span><i class="fa fa-warning icon-left"></i> This account is authenticated by Google.<br><p class="text-muted">You can <a id="sign-in-link" ui-sref="common.auth.unauthorized">Sign in with Google</a> in our login page.</p></span></p></div></div><form id="confirmationEmailForm" role="form" name="forms.confirmationEmailForm" novalidate="" ng-show="!emailSent"><div class="col-md-8 col-xs-12 u_margin-md-top"><div class="form-group" ng-class="{\'has-error\': (forms.confirmationEmailForm.$submitted && forms.confirmationEmailForm.username.$invalid)}" show-errors=""><label class="control-label">Email</label> <input type="text" class="form-control" name="username" ng-model="credentials.username" required="" focus-me="true"><p class="text-danger" ng-show="forms.confirmationEmailForm.$submitted && forms.confirmationEmailForm.username.$invalid">Please enter an Email</p></div><button class="btn btn-primary btn-hg" ng-disabled="forms.confirmationEmailForm.$invalid" ng-click="requestConfirmationEmail()">Send Confirmation Email</button></div></form><br><div class="col-xs-12 u_margin-lg-top"><p class="text-muted"><a id="sign-in-link" ui-sref="common.auth.unauthorized">Sign in</a> to your account instead.</p></div>')}])}(),function(e){try{e=angular.module("risevision.common.components.userstate")}catch(t){e=angular.module("risevision.common.components.userstate",[])}e.run(["$templateCache",function(e){e.put("userstate/request-password-reset.html",'<h1 class="u_remove-top">Password Reset</h1><div class="col-xs-12 col-md-8"><div class="panel-body bg-info u_margin-lg-top" ng-show="emailSent"><p class="u_remove-bottom"><i class="fa fa-warning icon-left"></i> <span>An email with password reset instructions has been sent to your email inbox (if it exists in our system).</span></p></div><div class="panel-body bg-danger u_margin-lg-top" ng-show="isGoogleAccount"><p class="u_remove-bottom"><i class="fa fa-warning icon-left"></i> <span>This account is authenticated by Google.<br><a href="https://myaccount.google.com/security#signin" target="_blank">Change your password on your Google account.</a></span></p></div></div><form id="requestResetForm" role="form" name="forms.requestResetForm" novalidate="" ng-show="!emailSent"><div class="col-md-8 col-xs-12 u_margin-md-top"><div class="form-group" ng-class="{\'has-error\': (forms.requestResetForm.$submitted && forms.requestResetForm.username.$invalid)}" show-errors=""><label class="control-label">Email</label> <input type="text" class="form-control" name="username" ng-model="credentials.username" required="" focus-me="true"><p class="text-danger" ng-show="forms.requestResetForm.$submitted && forms.requestResetForm.username.$invalid">Please enter an Email</p></div><button class="btn btn-primary btn-hg" ng-disabled="forms.requestResetForm.$invalid" ng-click="requestPasswordReset()">Reset Password</button></div></form><br><div class="col-xs-12 u_margin-lg-top"><p class="text-muted"><a id="sign-in-link" ui-sref="common.auth.unauthorized">Sign in</a> to your account instead.</p></div>')}])}(),function(e){try{e=angular.module("risevision.common.components.userstate")}catch(t){e=angular.module("risevision.common.components.userstate",[])}e.run(["$templateCache",function(e){e.put("userstate/reset-password-confirm.html",'<h1 class="u_remove-top">Password Confirmation</h1><div><div class="panel-body bg-info u_margin-lg-top" ng-show="emailResetSent"><p class="u_remove-bottom"><i class="fa fa-warning icon-left"></i> <span>An email with password reset instructions has been sent to your email inbox.</span></p></div><div class="panel-body bg-danger u_margin-lg-top" ng-show="invalidToken"><p class="u_remove-bottom"><i class="fa fa-warning icon-left"></i> <span>The password reset token is not valid. <a href="#" ng-click="requestPasswordReset()">Request Password Reset</a></span></p></div></div><form id="forms.resetPasswordForm" role="form" name="forms.resetPasswordForm" novalidate="" ng-show="!emailResetSent"><div class="col-md-8 col-xs-12 u_margin-md-top"><div class="form-group" ng-class="{\'has-error\': (forms.resetPasswordForm.$submitted && forms.resetPasswordForm.newPassword.$invalid)}" show-errors=""><label class="control-label">New Password</label> <input type="password" class="form-control" name="newPassword" id="newPassword" ng-model="credentials.newPassword" required="" minlength="4" focus-me="true"><p class="text-danger" ng-show="forms.resetPasswordForm.$submitted && forms.resetPasswordForm.newPassword.$error.minlength">New Password must be at least 4 characters long.</p><p class="text-warning" ng-show="forms.resetPasswordForm.newPassword.$valid">A strong password is at least 8 characters, includes uppercase/lowercase letters, and one or more numbers.</p></div><div class="form-group" ng-class="{\'has-error\': (forms.resetPasswordForm.$submitted && forms.resetPasswordForm.confirmPassword.$invalid)}" show-errors=""><label class="control-label">Confirm Password</label> <input type="password" class="form-control" name="confirmPassword" id="confirmPassword" ng-model="credentials.confirmPassword" required="" confirm-password-validator="credentials.newPassword"><p ng-show="forms.resetPasswordForm.$submitted && forms.resetPasswordForm.confirmPassword.$error.required" class="text-danger">Confirm Password is required.</p><p ng-show="forms.resetPasswordForm.$submitted && forms.resetPasswordForm.confirmPassword.$error.passwordMatch" class="text-danger">New Password and Confirm Password must match.</p></div><button id="resetPasswordButton" type="submit" form="forms.resetPasswordForm" class="btn btn-primary btn-hg" ng-click="resetPassword()">Update Password</button></div></form>')}])}(),function(e){try{e=angular.module("risevision.common.components.userstate")}catch(t){e=angular.module("risevision.common.components.userstate",[])}e.run(["$templateCache",function(e){e.put("userstate/unsubscribe.html",'<div class="alert alert-warning col-xs-12 u_margin-md-top"><strong>{{email}}</strong> has been unsubscribed from monitoring the Display <strong>\'{{name}}\'</strong>. (Display ID: {{id}})</div><a id="reset-password-link" href="/">Sign in to your Rise Vision account</a><p></p>')}])}(),function(){"use strict";angular.module("risevision.common.components.last-modified",[]).directive("lastModified",["$templateCache",function(e){return{restrict:"E",scope:{changeDate:"=",changedBy:"="},template:e.get("last-modified/last-modified.html"),link:function(e){e.$watch("changedBy",function(t){e.changedBy=t?t:"N/A"})}}}])}(),function(){"use strict";angular.module("risevision.common.components.last-modified").filter("username",function(){return function(e){var t=e;return e&&e.indexOf("@")!==-1&&(t=e.substring(0,e.indexOf("@"))),t}})}(),function(e){try{e=angular.module("risevision.common.components.last-modified")}catch(t){e=angular.module("risevision.common.components.last-modified",[])}e.run(["$templateCache",function(e){e.put("last-modified/last-modified.html","<span class=\"text-muted\"><small>Saved {{changeDate | date:'d-MMM-yyyy h:mm a'}} by {{changedBy | username}}</small></span>")}])}(),angular.module("risevision.common.components.loading",["angularSpinner"]).value("_rvGlobalSpinnerRegistry",[]),angular.module("risevision.common.components.loading").service("$loading",["$q","$rootScope","$document","_rvGlobalSpinnerRegistry",function(e,t,n,o){function r(e){o.indexOf(e)<0&&o.push(e)}function s(e){var t;(t=o.indexOf(e))>=0&&o.splice(t,1)}var a=this;this.start=function(e){e=angular.isArray(e)?e:[e];for(var n=0;n<e.length;n++)t.$broadcast("rv-spinner:start",e[n])},this.stop=function(e){e=angular.isArray(e)?e:[e];for(var n=0;n<e.length;n++)t.$broadcast("rv-spinner:stop",e[n])},n&&n[0]&&angular.element(n[0].body).append('<div rv-global-spinner class="ng-hide" style="position: fixed; width: 100%; height: 100%; top: 0; left: 0; z-index: 1040; "></div>'),this.startGlobal=function(e){e=angular.isArray(e)?e:[e],angular.forEach(e,function(e){r(e)})},this.stopGlobal=function(e){e=angular.isArray(e)?e:[e],angular.forEach(e,function(e){s(e)})},this.stopSpinnerAfterPromise=function(n,o){n=angular.isArray(n)?n:[n];var r=function(){for(var e=0;e<n.length;e++)t.$broadcast("rv-spinner:stop",n[e])},s=angular.isArray(o)?e.all(o):o;s.then(function(){r()},function(){r()})},this.getDefaultSpinnerOptions=function(){return a.defaultSpinnerOptions},this.defaultSpinnerOptions={lines:13,length:20,width:10,radius:30,corners:1,rotate:0,direction:1,color:"#555",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"50%",left:"50%"}}]),angular.module("risevision.common.components.loading").directive("rvGlobalSpinner",["usSpinnerService","$compile","_rvGlobalSpinnerRegistry","$timeout","$rootScope",function(e,t,n,o,r){return{scope:!0,link:function(s,a){var i='<div ng-show="active" class="spinner-backdrop fade" ng-class="{in: active}" us-spinner="rvSpinnerOptions" spinner-key="_rv-global-spinner" ng-focus="spinnerFocused()"></div>';a.prepend(t(i)(s)),s.rvSpinnerOptions={lines:13,length:20,width:10,radius:30,corners:1,rotate:0,direction:1,color:"#555",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"50%",left:"50%"},s.registry=n,s.$watchCollection("registry",function(){s.registry.length>0?s.active=!0:s.active=!1}),s.$watch("active",function(e){e?a.removeClass("ng-hide"):a.addClass("ng-hide")}),s.spinnerFocused=function(){r.$broadcast("rv-spinner:global:focused")},o(function(){e.spin("_rv-global-spinner")}),s.active=!0}}}]),angular.module("risevision.common.components.loading").directive("rvSpinner",["usSpinnerService","$compile",function(e,t){return{scope:{backdropClass:"@rvSpinnerBackdropClass",rvSpinnerKey:"@rvSpinnerKey",rvSpinnerStartActive:"=?rvSpinnerStartActive",rvSpinnerOptions:"=rvSpinner"},link:function(n,o,r){n.active=angular.isDefined(r.rvSpinnerStartActive)&&"1"===r.rvSpinnerStartActive;var s='<div ng-show="active" class="spinner-backdrop fade {{backdropClass}}" ng-class="{in: active}" us-spinner="rvSpinnerOptions" spinner-key="{{rvSpinnerKey}}"';s+=r.rvSpinnerStartActive&&"1"===r.rvSpinnerStartActive?' spinner-start-active="1"></div>':"></div>",o.prepend(t(s)(n)),n.$on("rv-spinner:start",function(t,o){o===n.rvSpinnerKey&&(e.spin(o),n.active=!0)}),n.$on("rv-spinner:stop",function(t,o){o===n.rvSpinnerKey&&(e.stop(o),n.active=!1)})}}}]),angular.module("risevision.common.components.search-filter",[]).directive("searchFilter",["$timeout",function(e){return{restrict:"E",scope:{filterConfig:"=",search:"=",doSearch:"="},templateUrl:"search-filter/search-filter.html",link:function(t){t.delay=function(){var t=null;return function(n,o){e.cancel(t),t=e(n,o)}}(),t.reset=function(){t.search.query&&(t.search.query="",t.doSearch())}}}}]),function(e){try{e=angular.module("risevision.common.components.search-filter")}catch(t){e=angular.module("risevision.common.components.search-filter",[])}e.run(["$templateCache",function(e){e.put("search-filter/search-filter.html",'<div class="input-group"><span class="input-group-addon" ng-click="doSearch()"><i class="fa fa-search"></i></span> <input id="{{ filterConfig.id }}" type="text" class="form-control" placeholder="{{ filterConfig.placeholder }}" ng-model="search.query" ng-enter="delay(doSearch, 0)" ng-change="delay(doSearch, 1000)"> <span class="input-group-addon" ng-click="reset()"><i class="fa fa-times"></i></span></div>')}])}(),function(e){"use strict";e.module("risevision.common.components.scrolling-list",["rvScrollEvent"]).value("BaseList",function(e){this.list=[],this.maxCount=e?e:40,this.cursor=null,this.endOfList=!1,this.searchString="",this.clear=function(){this.list=[],this.cursor=null,this.endOfList=!1},this.concat=function(e){this.list=this.list.concat(e)},this.add=function(e,t){this.cursor=t,this.endOfList=e.length<this.maxCount,this.concat(e)}})}(angular),angular.module("risevision.common.components.scrolling-list").service("processErrorCode",["$filter",function(e){var t={get:"loaded",load:"loaded",add:"added",update:"updated","delete":"deleted",publish:"published",restore:"restored",move:"moved",rename:"renamed",upload:"uploaded",restart:"restarted",reboot:"rebooted"};return function(n,o,r){var s=e("translate")("apps-common.errors.tryAgain"),a=t[o],i=r&&r.result&&r.result.error||{},c=i.message?i.message:"An Error has Occurred",l=e("translate")("apps-common.errors.actionFailed",{itemName:n,actionName:a}),u="storage-client.error."+(o?o+".":"")+i.message,d=e("translate")(u);return d!==u&&(c=d),r?400===r.status?c.indexOf("is not editable")>=0?l+" "+c:c.indexOf("is required")>=0?l+" "+c:l+" "+c:401===r.status?e("translate")("apps-common.errors.notAuthenticated",{itemName:n,actionName:o}):403===r.status?c.indexOf("User is not allowed access")>=0?l+" "+e("translate")("apps-common.errors.parentCompanyAction"):c.indexOf("User does not have the necessary rights")>=0?l+" "+e("translate")("apps-common.errors.permissionRequired"):c.indexOf("Premium Template requires Purchase")>=0?l+" "+e("translate")("apps-common.errors.premiumTemplate"):c.indexOf("Storage requires active subscription")>=0?l+" "+e("translate")("apps-common.errors.storageSubscription"):l+" "+c:404===r.status?e("translate")("apps-common.errors.notFound",{itemName:n}):409===r.status?l+" "+c:500===r.status||503===r.status?e("translate")("apps-common.errors.serverError",{itemName:n,actionName:o})+" "+s:r.status===-1||i.code===-1||0===i.code?e("translate")("apps-common.errors.checkConnection"):c:c}}]),angular.module("risevision.common.components.scrolling-list").service("ScrollingListService",["$log","BaseList","processErrorCode",function(e,t,n){return function(o,r){var s=40,a={};a.items=new t(s),a.search=r?r:{},_.defaults(a.search,{sortBy:"name",count:s,reverse:!1,name:"Items"});var i=function(){a.loadingItems=!1,a.errorMessage="",a.apiError=""};return a.load=function(){i(),(!a.items.list.length||!a.items.endOfList&&a.items.cursor)&&(a.loadingItems=!0,o(a.search,a.items.cursor).then(function(e){a.items.add(e.items?e.items:[],e.cursor)}).then(null,function(t){a.errorMessage="Failed to load "+a.search.name+".",a.apiError=n(a.search.name,"load",t),e.error(a.errorMessage,t)})["finally"](function(){a.loadingItems=!1}))},a.load(),a.sortBy=function(e){a.items.clear(),e!==a.search.sortBy?(a.search.sortBy=e,a.search.reverse=!1):a.search.reverse=!a.search.reverse,a.load()},a.doSearch=function(){a.items.clear(),a.load()},a}}]),function(e){"use strict";var t=150;e.module("rvScrollEvent",[]).directive("rvScrollEvent",["$parse","$window",function(e,n){return{scope:!1,link:function(o,r,s){var a,i,c=e(s.rvScrollEvent),l=r[0],u="scroll",d={x:0,y:0},m=function(){i=function(e){d.x=l.scrollLeft,d.y=l.scrollTop,p(e),g(),f(e,!1)},r.bind(u,i)},p=function(e){a=n.setInterval(function(){d.x===l.scrollLeft&&d.y===l.scrollTop?(n.clearInterval(a),m(),f(e,!0)):(d.x=l.scrollLeft,d.y=l.scrollTop)},t)},g=function(){r.unbind(u,i)},f=function(e,t){o.$apply(function(){c(o,{$event:e,isEndEvent:t})})};m()}}}])}(angular),function(e){"use strict";e.module("risevision.common.components.scrolling-list").directive("scrollingList",["$parse","$compile",function(e,t){return{restrict:"A",replace:!1,terminal:!0,priority:1e3,link:function(n,o,r){var s=e(r.scrollingList);n.handleScroll=function(e,t){t&&e.target.scrollTop&&e.target.scrollHeight-e.target.clientHeight-e.target.scrollTop<20&&s(n)},o.attr("rv-scroll-event","handleScroll($event, isEndEvent)"),o.removeAttr("scrolling-list"),t(o)(n)}}}])}(angular),angular.module("risevision.common.components.stop-event",[]).directive("stopEvent",function(){return{restrict:"A",link:function(e,t,n){t.on(n.stopEvent,function(e){e.stopPropagation()})}}}),function(e){"use strict";e.module("risevision.common.components.analytics",[]).value("SEGMENT_API_KEY","AFtY3tN10BQj6RbnfpDDp9Hx8N1modKN").value("GA_LINKER_USE_ANCHOR",!0).factory("segmentAnalytics",["$rootScope","$window","$log","$location","GA_LINKER_USE_ANCHOR",function(e,t,n,o,r){function s(){e.$on("$viewContentLoaded",function(){if(i.location!==o.path()){i.location=o.path();var e={};e.url=o.path(),e.path=o.path(),o.search().nooverride&&(e.referrer=""),i.page(e)}})}var a,i={};t.analytics=t.analytics||[];var c=t.analytics;c.SNIPPET_VERSION="4.0.0",c.factory=function(e){function r(t,n){"track"===e&&n&&n.length>1&&n[1]&&"object"==typeof n[1]&&(n[1].url=o.host())}return function(){var o=Array.prototype.slice.call(arguments);return r(e,o),o.unshift(e),t.analytics.push(o),n.debug("Segment Tracker",o),t.analytics}},c.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];for(var l=0;l<c.methods.length;l++){var u=c.methods[l];i[u]=c.factory(u)}return i.ready(function(){var e=t.ga;e("require","linker"),e("linker:autoLink",["community.risevision.com","store.risevision.com","help.risevision.com","apps.risevision.com","risevision.com","preview.risevision.com","rva.risevision.com"],r)}),i.load=function(e){if(e&&!a){s();var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+e+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),a=!0}},i}]).factory("analyticsEvents",["$rootScope","segmentAnalytics","userState",function(e,t,n){var o={};return o.identify=function(){if(n.getUsername()){var e=n.getCopyOfProfile(),o={email:e.email,firstName:e.firstName?e.firstName:"",lastName:e.lastName?e.lastName:""};if(n.getUserCompanyId()){var r=n.getCopyOfUserCompany();o.companyId=r.id,o.companyName=r.name,o.companyIndustry=r.companyIndustry,o.company={id:r.id,name:r.name,companyIndustry:r.companyIndustry}}t.identify(n.getUsername(),o)}},o.initialize=function(){e.$on("risevision.user.authorized",function(){o.identify()})},o}])}(angular),angular.module("risevision.common.components.message-box.services",[]).factory("messageBox",["$modal","$templateCache",function(e,t){return function(n,o,r,s,a){var i={controller:"messageBoxInstance",size:"md",resolve:{title:function(){return n},message:function(){return o},button:function(){return r||"common.ok"}}};return s&&(i.windowClass=s),a?i.templateUrl=a:i.template=t.get("message-box/message-box.html"),e.open(i)}}]),angular.module("risevision.common.components.message-box",["risevision.common.components.message-box.services"]).controller("messageBoxInstance",["$scope","$modalInstance","title","message","button",function(e,t,n,o,r){e.title=n,e.message=o,e.button=r?r:"common.close",e.dismiss=function(){t.dismiss()}}]),function(e){try{e=angular.module("risevision.common.components.message-box")}catch(t){e=angular.module("risevision.common.components.message-box",[])}e.run(["$templateCache",function(e){e.put("message-box/message-box.html",'<form id="messageForm"><div class="modal-header"><button type="button" class="close" ng-click="dismiss()" data-dismiss="modal" aria-hidden="true"><i class="fa fa-times"></i></button><h3 class="modal-title" translate="">{{title}}</h3></div><div class="modal-body" stop-event="touchend"><p translate="">{{message}}</p></div><div class="modal-footer"><button class="btn btn-primary" ng-click="dismiss()"><span translate="{{button}}"></span> <i class="fa fa-white fa-check icon-right"></i></button></div></form>')}])}(),angular.module("risevision.common.components.svg",[]).constant("iconsList",{icons1:{riseLogo:"M0 32h32V0L0 32z M15 31v-7h6L15 31z M23 32v-9h9L23 32z M24 21v-6h7L24 21z",riseStore:"M13.1 24h13.5 0.1c1 0 1.7-0.8 1.9-1.8l2.6-13.5C31.3 8.4 31 8 30.6 8h-21L13.1 24z",riseStorage:"M8 32h20.2c2.1 0 3.8-1.7 3.8-3.8V9L8 32zM19 29v-4h4.3L19 29zM25 23v-4h4.3L25 23zM24 31v-7h7.3L24 31z",riseDisplays:"M8 26h20.2c2.1 0 3.8-1.7 3.8-3.8V3L8 26zM19 23v-4h4.3L19 23zM25 17v-4h4.3L25 17zM24 25v-7h7.3L24 25z",riseSchedules:"M8 32h20.2c2.1 0 3.8-1.7 3.8-3.8V9L8 32zM19 29v-4h4.3L19 29zM25 23v-4h4.3L25 23zM24 31v-7h7.3L24 31z",riseEditor:"M30.7 1.8C29.1 0.3 26.5 0.5 25 2l-1.1 1.1c-0.1 0.1-0.1 0.3 0 0.4l5.3 5.3c0.1 0.1 0.3 0.1 0.4 0l1.2-1.2C32.4 6 32.4 3.4 30.7 1.8zM9.6 17.5l-1.4 7.1 7.1-1.5 12.5-12.5c0.1-0.1 0.1-0.3 0-0.4L22.5 5c-0.1-0.1-0.3-0.1-0.4 0L9.6 17.5z",riseSupport:"M23.5 0.8c-4.7 0-8.5 3.8-8.5 8.5 0 4.7 3.8 8.5 8.5 8.5S32 14 32 9.3C32 4.6 28.2 0.8 23.5 0.8zM27.7 8.1c-0.1 0.3-0.2 0.5-0.3 0.7 -0.1 0.2-0.3 0.4-0.5 0.6 -0.2 0.2-0.4 0.3-0.6 0.4 -0.1 0.1-0.3 0.2-0.6 0.3 -0.3 0.2-0.5 0.3-0.7 0.6 -0.2 0.2-0.2 0.8-0.6 0.8h-2.3c-0.1 0-0.4 0-0.4-0.2v-0.4c0-0.5 0.2-1 0.7-1.5 0.4-0.5 0.9-0.8 1.4-1 0.4-0.2 0.7-0.4 0.8-0.5 0.2-0.2 0.2-0.4 0.2-0.7 0-0.3-0.1-0.5-0.4-0.7 -0.3-0.2-0.6-0.3-1-0.3 -0.4 0-0.8 0.1-1 0.3 -0.3 0.2-0.6 0.6-1 1.1 -0.1 0.1-0.2 0.1-0.3 0.1 -0.1 0-0.2 0-0.2-0.1l-1.6-1.2C19 6.2 19 6 19.1 5.8c1-1.7 2.5-2.6 4.5-2.6 0.7 0 1.4 0.2 2 0.5 0.7 0.3 1.2 0.8 1.7 1.4 0.4 0.6 0.7 1.3 0.7 2C27.9 7.4 27.8 7.8 27.7 8.1zM24.2 15.5h-2.1c-0.3 0-0.5-0.2-0.5-0.5v-2.1c0-0.3 0.2-0.5 0.5-0.5h2.1c0.3 0 0.5 0.2 0.5 0.5V15C24.7 15.3 24.5 15.5 24.2 15.5z",riseAlerts:"M31.5 12.3C31 11.8 30 11.6 30 11.6V4.8c0-0.6-0.4-1.2-0.8-1.6 -0.5-0.5-1.1-0.7-1.7-0.7C23.3 6 19.1 8.1 15 8.9v9.9c4 0.8 8.2 3 12.4 6.5 0.6 0 1.3-0.2 1.8-0.7 0.5-0.5 0.8-1 0.8-1.6v-6.9c0 0 1-0.2 1.5-0.7 0.4-0.4 0.7-1 0.7-1.6S31.9 12.7 31.5 12.3z",riseDevelopers:"M8 32h20.2c2.1 0 3.8-1.7 3.8-3.8V9L8 32zM19 29v-4h4.3L19 29zM25 23v-4h4.3L25 23zM24 31v-7h7.3L24 31z",riseDocumentation:"M8 32h20.2c2.1 0 3.8-1.7 3.8-3.8V9L8 32zM19 29v-4h4.3L19 29zM25 23v-4h4.3L25 23zM24 31v-7h7.3L24 31z",riseCommunity:"M24 12.6v4.7c0 1.4 0.4 2.3 1.3 2.6v5.4h5.3v-5.4c0.9-0.3 1.3-1.1 1.3-2.6v-4.7H24zM28 11.3c1.5 0 2.7-1.2 2.7-2.7 0-1.5-1.2-2.7-2.7-2.7s-2.7 1.2-2.7 2.7C25.3 10.1 26.3 11.3 28 11.3zM0 17.3c0 1.4 0.4 2.3 1.3 2.6v5.4h5.3v-5.4c1-0.3 1.4-1.2 1.4-2.6v-4.7H0V17.3zM4 11.3c1.7 0 2.7-1.2 2.7-2.7 0-1.5-1.2-2.7-2.7-2.7S1.3 7.1 1.3 8.6C1.3 10.1 2.5 11.3 4 11.3z",riseStorageGraphic:"M29.4 5.9V4c0-0.1-0.1-0.2-0.2-0.2h-10L0.6 22.1 7.7 25l2.9 7 18.9-18.6V7.2h1.3v7.9L16.8 28.8l0.9 0.9L32 15.6V5.9H29.4z",iconNewFolder:"M30.7 8c-0.8-0.8-1.9-1-3.1-1H15V5.9c0-1.2-0.5-2-1.4-2.8C12.8 2.2 11.7 2 10.5 2H4.3C3.1 2 2.1 2.2 1.3 3.1 0.4 3.9 0 4.7 0 5.9v18.5c0 1.2 0.4 2.3 1.3 3.2C2.1 28.5 3.1 29 4.3 29h23.3c1.2 0 2.2-0.5 3.1-1.4 0.9-0.9 1.3-2 1.3-3.2V10.8C32 9.6 31.6 8.9 30.7 8zM23 20h-5v5h-4v-5H9v-4h5v-5h4v5h5V20",iconPresentation:"M28.5,3.1H3.3c-1.6,0-2.8,1.3-2.8,2.8v20.5c0,1.6,1.3,2.8,2.8,2.8h25.1c1.6,0,2.8-1.3,2.8-2.8V5.9 C31.3,4.4,30,3.1,28.5,3.1z M5.4,21l5.1-10.2L15.6,21H5.4z M26.1,20.9h-7.4c-0.4,0-0.7-0.3-0.7-0.7c0-0.4,0.3-0.7,0.7-0.7h7.4 c0.4,0,0.7,0.3,0.7,0.7C26.8,20.6,26.5,20.9,26.1,20.9z M26.1,16.8h-7.4c-0.4,0-0.7-0.3-0.7-0.7c0-0.4,0.3-0.7,0.7-0.7h7.4 c0.4,0,0.7,0.3,0.7,0.7C26.8,16.5,26.5,16.8,26.1,16.8z M26.1,12.7h-7.4c-0.4,0-0.7-0.3-0.7-0.7s0.3-0.7,0.7-0.7h7.4 c0.4,0,0.7,0.3,0.7,0.7S26.5,12.7,26.1,12.7z",iconWebsite:"M0 8v16c0 0.6 0.4 1 1 1h31V7H1C0.4 7 0 7.4 0 8zM29 11h2v10h-2V11zM26.3 17c0.4 0 0.8 0.4 0.8 0.8 0 0.4-0.4 0.8-0.8 0.8 -0.4 0-0.8-0.4-0.8-0.8C25.5 17.4 25.9 17 26.3 17zM3.9 13l0.8 3.7L5.7 13h1.1l0.9 3.7L8.5 13h1.5 0.1 1.5l0.8 3.7 0.9-3.7h1.1l0.9 3.7 0.8-3.7h1.5 0.1 1.5l0.8 3.7 0.9-3.7h1.1l0.9 3.7 0.8-3.7h1.6l-1.6 5h-1.5l-0.8-3.5L20.9 18h-1.5l-1.5-5.4L16.4 18h-1.5L14 14.5 13.2 18h-1.5l-1.5-5.4L8.6 18H7l-0.8-3.5L5.4 18H3.9l-1.6-5H3.9z",riseWidgetImage:"M21,13.8l-6.1,7l-4.3-4.4l-0.1-0.2l-7,8.2H28L21,13.8z M7.2,9c1.2,0,2.2,1,2.2,2.2s-1,2.2-2.2,2.2S5,12.4,5,11.2S6,9,7.2,9z M0,3.8v24.3h32V3.8H0z M29.8,26.4H2.3V5.7h27.6L29.8,26.4L29.8,26.4z",riseWidgetVideo:"M31,7l-7.37,4.26V9.55a3.25,3.25,0,0,0-3.24-3.24H4.24A3.25,3.25,0,0,0,1,9.55V22.45a3.25,3.25,0,0,0,3.24,3.24H20.38a3.25,3.25,0,0,0,3.24-3.24V20.76L31,25V7h0Z",riseWidgetText:"M10.47,10.47h4.15V21.53H10.47V24.3H21.53V21.53H17.38V10.47h4.15v2.77H24.3V7.7H7.7v5.53h2.77V10.47Zm-8.3-8.3V29.83H29.83V2.17H2.17Zm24.9,24.9H4.93V4.93H27.07V27.07Z",riseWidgetMore:"M26.62,9.55H25.48v3.87a0.65,0.65,0,0,1-.63.63H17.52a0.65,0.65,0,0,1-.63-0.63V7.15a0.65,0.65,0,0,1,.63-0.63h5.26V4.66H16.43A1.42,1.42,0,0,0,15,6.09v8.29a1.42,1.42,0,0,0,1.43,1.43H26a1.42,1.42,0,0,0,1.43-1.43V9.55h-0.8ZM28.89,1V3.61H31.5V5.76H28.89V8.37H26.74V5.76H24.17V3.61h2.57V1h2.15m-27,9.81L3,10.89l0-4a0.65,0.65,0,0,1,.63-0.63H11a0.65,0.65,0,0,1,.63.63v6.27a0.77,0.77,0,0,1-.67.72H5.64l0.09,0.76v1h6.36a1.42,1.42,0,0,0,1.43-1.43V6a1.42,1.42,0,0,0-1.43-1.43H2.53A1.42,1.42,0,0,0,1.1,6v4.84H1.9ZM12.72,9.42l-1.09-.09,0,4a0.65,0.65,0,0,1-.63.63H3.63A0.65,0.65,0,0,1,3,13.3V7a0.73,0.73,0,0,1,.65-0.69L9,6.31l-0.1-.76v-1H2.53A1.42,1.42,0,0,0,1.1,6v8.29A1.42,1.42,0,0,0,2.53,15.7h9.56a1.42,1.42,0,0,0,1.43-1.43V9.42h-0.8ZM1.9,23.39L3,23.47l0-4a0.65,0.65,0,0,1,.63-0.63H11a0.65,0.65,0,0,1,.63.63v6.27a0.77,0.77,0,0,1-.67.72H5.64l0.09,0.76v1h6.36a1.42,1.42,0,0,0,1.43-1.43V18.55a1.42,1.42,0,0,0-1.43-1.43H2.53A1.42,1.42,0,0,0,1.1,18.55v4.84H1.9ZM12.72,22l-1.09-.09,0,4a0.65,0.65,0,0,1-.63.63H3.63A0.65,0.65,0,0,1,3,25.88V19.6a0.73,0.73,0,0,1,.65-0.69l5.34,0-0.1-.76v-1H2.53A1.42,1.42,0,0,0,1.1,18.55v8.29a1.42,1.42,0,0,0,1.43,1.43h9.56a1.42,1.42,0,0,0,1.43-1.43V22h-0.8Zm3.07,1.39,1.09,0.08,0-4a0.65,0.65,0,0,1,.63-0.63h7.33a0.65,0.65,0,0,1,.63.63v6.27a0.77,0.77,0,0,1-.67.72H19.53l0.09,0.76v1H26a1.42,1.42,0,0,0,1.43-1.43V18.55A1.42,1.42,0,0,0,26,17.12H16.43A1.42,1.42,0,0,0,15,18.55v4.84h0.8ZM26.62,22l-1.09-.09,0,4a0.65,0.65,0,0,1-.63.63H17.52a0.65,0.65,0,0,1-.63-0.63V19.6a0.73,0.73,0,0,1,.65-0.69l5.34,0-0.1-.76v-1H16.43A1.42,1.42,0,0,0,15,18.55v8.29a1.42,1.42,0,0,0,1.43,1.43H26a1.42,1.42,0,0,0,1.43-1.43V22h-0.8Z",riseWidgetImageMulti:"M16.41,16.77l-4.89,5.6L8.13,18.86l0-.17-5.6,6.52H22ZM5.45,13a1.71,1.71,0,1,1-1.71,1.71A1.71,1.71,0,0,1,5.45,13ZM12.6,28.39H26.1L26.15,8.49H12.56v2H24.14l0,15.89H12.56ZM3.51,5.6V7.82h1.8V7.11H27.22V23.5H26.42V25H29V5.6H3.51Zm3-2.72V5.1H8.29V4.39H30.24V20.78H29.45v1.51H32V2.89H6.54Zm7,23.5H2L2,10.49H13.58v-2H0L0.05,28.39h13.5Z",riseWidgetFolder:"M28.61,8.77H13.92L11,6.16a0.85,0.85,0,0,0-.57-0.22H3.67a0.88,0.88,0,0,0-1,.71V24.22a1.11,1.11,0,0,0,1,1H28.61a0.88,0.88,0,0,0,.71-1V9.48A0.63,0.63,0,0,0,28.61,8.77Z"},icons2:{riseLogo:"",riseStore:"M26.6 26H11.5L6.7 4H1.6c-0.6 0-1 0.4-1 1s0.4 1 1 1h3.5l4.4 20.3c-0.9 0.4-1.6 1.4-1.6 2.5 0 1.5 1.2 2.7 2.7 2.7s2.7-1.2 2.7-2.7c0-0.2 0-0.5-0.1-0.7H24c-0.1 0.2-0.1 0.5-0.1 0.7 0 1.5 1.2 2.7 2.7 2.7s2.7-1.2 2.7-2.7S28.1 26 26.6 26z",riseStorage:"M1.8 9.1c1.2 0.7 2.9 1.3 5 1.7 2.1 0.4 4.4 0.6 6.9 0.6 2.5 0 4.8-0.2 6.9-0.6 2.1-0.4 3.5-1 4.8-1.7C26.6 8.4 27 7.7 27 6.9V4.6c0-0.8-0.4-1.6-1.6-2.3 -1.2-0.7-2.8-1.3-4.9-1.7C18.4 0.2 16.1 0 13.7 0c-2.5 0-4.7 0.2-6.8 0.6C4.7 1 3 1.6 1.8 2.3 0.6 3 0 3.7 0 4.6v2.3C0 7.7 0.6 8.4 1.8 9.1zM1.8 16c1.2 0.7 2.9 1.3 5 1.7 2.1 0.4 4.4 0.6 6.9 0.6 2 0 3.9-0.1 5.7-0.4l6.6-6.4c-1.2 0.6-2.7 1.1-4.5 1.5 -2.5 0.5-5.1 0.8-7.9 0.8 -2.8 0-5.5-0.3-7.9-0.8C3.3 12.4 1 11.7 0 10.7v3C0 14.5 0.6 15.3 1.8 16zM1.8 22.9c1.2 0.7 2.9 1.3 5 1.7 1.6 0.3 3.3 0.5 5.1 0.6l4.8-4.6c-1 0.1-2 0.1-3 0.1 -2.8 0-5.5-0.3-7.9-0.8C3.3 19.3 1 18.5 0 17.5v3C0 21.4 0.6 22.2 1.8 22.9zM5.8 26.7C3.3 26.1 1 25.4 0 24.4v3c0 0.8 0.6 1.6 1.9 2.3 1 0.6 2.3 1 3.8 1.4l4-3.9C8.3 27.1 7 26.9 5.8 26.7z",riseDisplays:"M9 22H4V4h24v0l3.5-3.3C31.1 0.3 30.6 0 30 0H2C0.9 0 0 0.9 0 2v22c0 1.1 0.9 2 2 2h2.8L9 22zM23.5 30.7l-4.5-2V28h-6v0.7l-4.5 2c-0.4 0-0.6 0.3-0.6 0.7 0 0.4 0.4 0.7 0.8 0.7h14.7c0.4 0 0.7-0.3 0.7-0.7C24 31 23.9 30.7 23.5 30.7z",riseSchedules:"M14 23.3V20h3.4l2.6-2.4V14h3.8l2.1-2H6v14h5.1L14 23.3zM14 14h4v4h-4V14zM8 14h4v4H8V14zM8 20h4v4H8V20zM31.5 6.7C31.1 6.3 30.6 6 30 6h-2V4c0-0.5-0.5-1-1-1h-6c-0.5 0-1 0.5-1 1v2h-8V4c0-0.5-0.5-1-1-1H5C4.5 3 4 3.5 4 4v2H2C0.9 6 0 6.9 0 8v22c0 1.1 0.9 2 2 2h2.8L9 28H4V10h24v0L31.5 6.7zM10 8H6V5h4V8zM26 8h-4V5h4V8z",riseEditor:"M22 28H4V17h3.3l2.2-2.2 1.8-1.8H2c-1.1 0-2 0.7-2 1.8v15C0 30.9 0.9 32 2 32h11.3 5.3H24c1.1 0 2-1.1 2-2.2V15.3l-4 4V28z",riseSupport:"M25 26.2c0 0-0.2-0.1-0.4-0.2l-5.1-3.1c-0.2-0.2-0.3-0.1-0.5-0.1s-0.5 0.2-0.9 0.5c-0.4 0.3-0.7 0.7-1 1.1 -0.3 0.4-0.6 0.8-0.9 1.1S15.6 26 15.4 26c-0.1 0-2.5-0.9-5.7-3.8 -2.9-2.6-3.8-5.6-3.8-5.7 0-0.2 0.2-0.5 0.5-0.8 0.3-0.3 0.7-0.6 1.1-0.9s0.8-0.6 1.1-1c0.3-0.4 0.5-0.7 0.5-0.9 0-0.2 0-0.3-0.1-0.5L5.8 7.1C5.8 7 5.7 6.9 5.7 6.9 5.6 6.8 5.5 6.8 5.3 6.8 5 6.8 4.5 6.8 4 6.9c0 0-4.2 1.5-4 5.9 0 0.3 0 0.7 0.1 1 0 0.3 1.1 6.1 6.5 11.5 5.1 5.1 11.2 6.5 11.5 6.5 0.3 0.1 0.6 0.1 0.9 0.1 0 0 4 0.2 5.7-3.6 0.1-0.2 0.2-0.3 0.2-0.4 0.1-0.6 0.2-1 0.2-1.3C25.1 26.5 25.1 26.3 25 26.2z",
riseAlerts:"M11.8 26.4c-0.3-0.4-0.5-0.7-0.6-1s-0.1-0.6-0.1-1 0.2-0.8 0.4-1.2c-0.5-0.5-0.7-1-0.7-1.7 0-0.6 0.2-1.2 0.6-1.8s0.9-1 1.6-1.2c0 0 0 0 0.1 0V9.2c-0.5 0-1.1-0.2-1.6-0.2H2.9c-0.8 0-1.5 0.4-2 1C0.3 10.6 0 11.4 0 12.2v3.4c0 0.8 0.3 1.2 0.8 1.8C1.4 18 2.1 18 2.9 18H5c-0.2 1-0.3 1.5-0.4 2.2 -0.1 0.7-0.1 1.4-0.1 1.9s0.1 1.2 0.3 1.9c0.2 0.7 0.3 1.3 0.4 1.6 0.1 0.4 0.3 0.9 0.6 1.7 0.3 0.8 0.4 1.3 0.5 1.6 0.5 0.5 1.3 0.8 2.4 1 1 0.2 2 0.1 3-0.2s1.6-0.8 2-1.5c-0.5-0.4-0.8-0.7-1.1-0.9S12.1 26.7 11.8 26.4z",riseDevelopers:"M5.2 27.6l2.3-1.4c0.6 0.5 1.4 0.9 2.1 1.2l6.7-6.3c-0.1 0-0.2 0-0.3 0 -2.9 0-5.3-2.4-5.3-5.3 0-2.9 2.4-5.3 5.3-5.3s5.3 2.4 5.3 5.3c0 0.2 0 0.4-0.1 0.6L30.1 8l-2-3.5c-0.1-0.2-0.3-0.4-0.6-0.4 -0.2-0.1-0.5 0-0.7 0.1l-2.3 1.4C23.4 4.7 21 4 21 3.5V0.7C21 0.2 20.5 0 19.9 0h-7.6C11.8 0 11 0.2 11 0.7v2.8c0 0.5-2.3 1.1-3.5 2.1L5.2 4.2c-0.5-0.3-1-0.1-1.2 0.3l-3.8 6.6C0 11.3 0 11.6 0 11.8c0.1 0.2 0.2 0.5 0.4 0.6l2.4 1.4c-0.1 0.7-0.2 1.4-0.2 2.1 0 0.7 0.1 1.4 0.2 2.1l-2.4 1.4c-0.5 0.3-0.6 0.8-0.3 1.3l3.8 6.6C4.2 27.7 4.8 27.8 5.2 27.6",riseDocumentation:"M6 4C5.4 4 5 4.4 5 5s0.4 1 1 1h17c0.6 0 1-0.4 1-1s-0.4-1-1-1H6zM26 11.9V8.8C26 8.2 25.6 8 25 8H6C4.3 8 3 6.7 3 5c0-1.7 1.3-3 3-3h19c0.6 0 1-0.4 1-1 0-0.6-0.4-1-1-1H6C3.2 0 0 2 0 4.8v21c0 2.4 2.5 5.4 4.9 6.1L26 11.9z",riseCommunity:"M9.4 18.9c0 2.4 0.7 3.8 2.2 4.3v9h8.8v-9c1.5-0.4 2.2-1.9 2.2-4.3v-7.7H9.4V18.9zM16 8.9c2.4 0 4.4-2 4.4-4.4s-2-4.4-4.4-4.4 -4.4 2-4.4 4.4S13.6 8.9 16 8.9z",riseStorageGraphic:"M19.8 5.1L2.9 21.7 8.6 24l2.4 5.8 17.1-16.9V5.1H19.8zM22.9 11.7c-1.1 0-1.9-0.9-1.9-1.9 0-1.1 0.9-1.9 1.9-1.9 1.1 0 1.9 0.9 1.9 1.9C24.8 10.9 23.9 11.7 22.9 11.7z",iconNewFolder:"",iconPresentation:"",iconWebsite:"",riseWidgetImage:"",riseWidgetVideo:"",riseWidgetText:"",riseWidgetMore:"",riseWidgetImageMulti:"",riseWidgetFolder:""}}).directive("svgIcon",["iconsList",function(e){return{restrict:"E",scope:{p:"@"},link:function(t,n){var o=function(t){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="'+e.icons1[t]+'"/><path d="'+e.icons2[t]+'"/></svg>'};t.$watch("p",function(e){e&&n.html(o(e))})}}}]),function(){"use strict";try{angular.module("risevision.common.config")}catch(e){angular.module("risevision.common.config",[])}angular.module("risevision.common.config").value("STORE_URL","https://store.risevision.com/").value("STORE_SERVER_URL","https://store-dot-rvaserver2.appspot.com/"),angular.module("risevision.common.components.subscription-status.config",[]).value("IN_RVA_PATH","product/productId/?cid=companyId").value("ACCOUNT_PATH","account?cid=companyId").value("PATH_URL","v1/company/companyId/product/status?pc=").value("AUTH_PATH_URL","v1/widget/auth?cid=companyId&pc=").value("PATH_URL_BY_DISPLAY_ID","v1/product/productCode/status?displayIds="),angular.module("risevision.common.components.subscription-status.filters",["risevision.common.i18n"]),angular.module("risevision.common.components.subscription-status.directives",["risevision.common.components.subscription-status.service"]),angular.module("risevision.common.components.subscription-status",["ngSanitize","ui.bootstrap","risevision.common.config","risevision.common.components.subscription-status.config","risevision.common.components.subscription-status.directives","risevision.common.components.subscription-status.filters","risevision.common.components.subscription-status.service"])}(),function(){"use strict";angular.module("risevision.common.components.subscription-status.service",["risevision.common.config","risevision.common.components.subscription-status.config"]).service("subscriptionStatusService",["$http","$q","STORE_SERVER_URL","PATH_URL","AUTH_PATH_URL","PATH_URL_BY_DISPLAY_ID",function(e,t,n,o,r,s){function a(e,t){return Math.ceil((t.getTime()-e.getTime())/c)}var i=["On Trial","Trial Expired","Subscribed","Suspended","Cancelled","Free","Not Subscribed","Product Not Found","Company Not Found","Error"],c=864e5,l=function(o,s){var a=t.defer(),i=n+r.replace("companyId",s)+o;return e.get(i).then(function(e){e&&e.data?a.resolve(e.data.authorized):a.resolve(!1)}),a.promise},u=function(r,c,l){var u=t.defer();r=Array.isArray(r)?r:[r];var d=n+o.replace("companyId",c)+r.join(",");return l&&(d=n+s.replace("productCode",r.join(","))+l),e.get(d).then(function(e){if(e&&e.data&&e.data.length){for(var t=[],n=0;n<e.data.length;n++){var o=e.data[n];t.push(o),o.plural="",o.statusCode=o.status.toLowerCase().replace(" ","-"),""===o.status?(o.status="N/A",o.statusCode="na",o.subscribed=!1):o.status===i[0]||o.status===i[2]||o.status===i[5]?o.subscribed=!0:o.subscribed=!1,"not-subscribed"===o.statusCode&&o.trialPeriod&&o.trialPeriod>0&&(o.statusCode="trial-available",o.subscribed=!0),o.expiry&&"on-trial"===o.statusCode&&(o.expiry=new Date(o.expiry),o.expiry instanceof Date&&!isNaN(o.expiry.valueOf())&&(o.expiry=a(new Date,o.expiry)),0===o.expiry?o.plural="-zero":o.expiry>1&&(o.plural="-many"))}u.resolve(t)}else u.reject("No response")}),u.promise};this.get=function(e,t,n){return u(e,t,n).then(function(n){var o=n[0];return o.subscribed===!1?l(e,t).then(function(e){return o.subscribed=e,o}):o})},this.list=function(e,t,n){return u(e,t,n)}}])}(),function(){"use strict";angular.module("risevision.common.components.subscription-status.directives").directive("subscriptionStatus",["$rootScope","$templateCache","subscriptionStatusService","STORE_URL","ACCOUNT_PATH","IN_RVA_PATH",function(e,t,n,o,r,s){return{restrict:"AE",require:"?ngModel",scope:{productId:"@",productCode:"@",companyId:"@",displayId:"@",expandedFormat:"@",showStoreModal:"=?",customProductLink:"@",customOnClick:"&"},template:t.get("subscription-status/subscription-status-template.html"),link:function(t,a,i,c){function l(){t.productCode&&t.productId&&(t.companyId||t.displayId)&&n.get(t.productCode,t.companyId,t.displayId).then(function(n){n&&(t.subscriptionStatus&&t.subscriptionStatus.status===n.status||e.$emit("subscription-status:changed",n),t.subscriptionStatus=n)},function(e){console.log("Error checking subscription status",e)})}t.subscriptionStatus={status:"N/A",statusCode:"na",subscribed:!1,expiry:null};var u=function(){t.storeAccountUrl=o+r.replace("companyId",t.companyId),t.customProductLink?t.storeUrl=t.customProductLink:t.storeUrl=o+s.replace("productId",t.productId).replace("companyId",t.companyId)};t.$watch("companyId",function(){l(),u()});var d=e.$on("refreshSubscriptionStatus",function(e,n){null!==n&&t.subscriptionStatus.statusCode!==n||l()});t.$on("$destroy",function(){d()}),c&&t.$watch("subscriptionStatus",function(e){c.$setViewValue(e)})}}}]).filter("to_trusted",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}])}(),angular.module("risevision.common.components.subscription-status.filters").filter("productTrialDaysToExpiry",["$interpolate","$translate",function(e,t){var n=null,o=null;return t(["subscription-status.expires-today","subscription-status.expires-in"],{days:"{{days}}"}).then(function(t){n=e(t["subscription-status.expires-today"]),o=e(t["subscription-status.expires-in"])}),function(e){var t="";try{var r=864e5,s=new Date(e).getTime()-(new Date).getTime(),a=Math.floor(s/r),i={days:a};t=0===a?null!==n?n(i):"":a>0?null!==o?o(i):"":null!==n?n(i):""}catch(c){}return t}}]),function(e){try{e=angular.module("risevision.common.components.subscription-status")}catch(t){e=angular.module("risevision.common.components.subscription-status",[])}e.run(["$templateCache",function(e){e.put("subscription-status/subscription-status-template.html",'<div ng-show="!expandedFormat"><h3 ng-disable-right-click=""><span ng-show="subscriptionStatus.statusCode !== \'not-subscribed\'" ng-bind-html="\'subscription-status.\' + subscriptionStatus.statusCode + subscriptionStatus.plural | translate:subscriptionStatus | to_trusted"></span></h3><span ng-show="subscriptionStatus.statusCode === \'trial-available\'"><button class="btn btn-primary btn-xs" ng-click="showStoreModal = true;"><span translate="subscription-status.start-trial"></span></button></span> <span ng-show="[\'on-trial\', \'trial-expired\', \'cancelled\', \'not-subscribed\'].indexOf(subscriptionStatus.statusCode) >= 0"><a class="btn btn-primary btn-xs" ng-href="{{storeUrl}}" target="_blank" ng-show="!customOnClick"><span translate="subscription-status.subscribe"></span></a> <a class="btn btn-primary btn-xs" ng-click="customOnClick()" ng-show="customOnClick"><span translate="subscription-status.subscribe"></span></a></span> <span ng-show="[\'suspended\'].indexOf(subscriptionStatus.statusCode) >= 0"><a type="button" class="btn btn-primary btn-xs" ng-href="{{storeAccountUrl}}" target="_blank"><span translate="subscription-status.view-account"></span></a></span></div><div ng-show="expandedFormat"><div class="subscription-status trial" ng-show="subscriptionStatus.statusCode === \'on-trial\'"><span ng-bind-html="\'subscription-status.expanded-\' + subscriptionStatus.statusCode + subscriptionStatus.plural | translate:subscriptionStatus | to_trusted"></span> <a type="button" class="btn btn-primary u_margin-left" ng-href="{{storeUrl}}" target="_blank" ng-show="!customOnClick"><span translate="subscription-status.subscribe-now"></span></a> <a type="button" class="btn btn-primary u_margin-left" ng-click="customOnClick()" ng-show="customOnClick"><span translate="subscription-status.subscribe-now"></span></a></div><div class="subscription-status expired" ng-show="subscriptionStatus.statusCode === \'trial-expired\'"><span translate="subscription-status.expanded-expired"></span> <a type="button" class="btn btn-primary u_margin-left" ng-href="{{storeUrl}}" target="_blank" ng-show="!customOnClick"><span translate="subscription-status.subscribe-now"></span></a> <a type="button" class="btn btn-primary u_margin-left" ng-click="customOnClick()" ng-show="customOnClick"><span translate="subscription-status.subscribe-now"></span></a></div><div class="subscription-status cancelled" ng-show="subscriptionStatus.statusCode === \'cancelled\' && !subscriptionStatus.subscribed"><span translate="subscription-status.expanded-cancelled"></span> <a type="button" class="btn btn-primary u_margin-left" ng-href="{{storeUrl}}" target="_blank" ng-show="!customOnClick"><span translate="subscription-status.subscribe-now"></span></a> <a type="button" class="btn btn-primary u_margin-left" ng-click="customOnClick()" ng-show="customOnClick"><span translate="subscription-status.subscribe-now"></span></a></div><div class="subscription-status suspended" ng-show="subscriptionStatus.statusCode === \'suspended\'"><span translate="subscription-status.expanded-suspended"></span> <a type="button" class="btn btn-primary u_margin-left" ng-href="{{storeAccountUrl}}" target="_blank"><span translate="subscription-status.view-invoices"></span></a></div></div>')}])}(),function(e){"use strict";try{e.module("risevision.common.config")}catch(t){e.module("risevision.common.config",[])}e.module("risevision.common.components.plans.services",["risevision.store.authorization","risevision.common.gapi","risevision.common.currency"]),e.module("risevision.common.components.plans",["risevision.common.config","risevision.common.components.plans.services","risevision.common.components.purchase-flow","risevision.common.components.scrolling-list","risevision.common.components.loading","ui.bootstrap"])}(angular),function(e){"use strict";e.module("risevision.common.currency",["risevision.common.gapi"]).factory("currencyService",["$q","storeAPILoader","$log",function(e,t,n){var o=null,r={defaultItem:null},s=function(e){this.country=e.country,this.currencyCode=e.currencyCode,this.description=e.description,this.bankAccountCode=e.bankAccountCode,this.bankAccountDescription=e.bankAccountDescription,this.getName=function(){return this.currencyCode.toUpperCase()},this.pickPrice=function(e,t){switch(this.currencyCode.toUpperCase()){case"CAD":return t;default:return e}}};return r.getByCountry=function(e){if(e)for(var t=0;t<this.items.length;t++)if(this.items[t].country&&this.items[t].country.toUpperCase()===e.toUpperCase())return this.items[t];return this.defaultItem},r.setItems=function(e){this.items=[];for(var t=0;t<e.length;t++){var n=new s(e[t]);this.items.push(n),n.country||(this.defaultItem=n)}},function(){return null!==o?o.promise:(o=e.defer(),n.debug("currencyService called"),t().then(function(e){var t=e.currency.list();t.execute(function(e){n.debug("currencyService resp",e),e.error?(console.error("currencyService error: ",e.error),o.reject(e.error)):(r.setItems(e.items),o.resolve(r))})}),o.promise)}}])}(angular),function(e){"use strict";e.module("risevision.common.components.plans").factory("currentPlanFactory",["$log","$rootScope","$timeout","userState","PLANS_LIST",function(e,t,n,o,r){var s={},a=_.keyBy(r,"type"),i=_.keyBy(r,"productCode"),c=function(){var n=o.getCopyOfSelectedCompany(),r=null;n.id&&n.planProductCode?(r=_.cloneDeep(i[n.planProductCode]),r.status=n.planSubscriptionStatus,r.trialPeriod=n.planTrialPeriod,r.currentPeriodEndDate=new Date(n.planCurrentPeriodEndDate)):r=_.cloneDeep(a.free),s.currentPlan=r,r.playerProTotalLicenseCount=n.playerProTotalLicenseCount,r.playerProAvailableLicenseCount=n.playerProAvailableLicenseCount,r.shareCompanyPlan=n.shareCompanyPlan,n.parentPlanProductCode&&(r.parentPlan=_.cloneDeep(i[n.parentPlanProductCode])),r.isPurchasedByParent=!!n.planBillToId&&!!n.planShipToId&&n.planBillToId!==n.planShipToId&&(s.isSubscribed()||s.isCancelledActive()),r.parentPlanCompanyName=n.parentPlanCompanyName,r.parentPlanContactEmail=n.parentPlanContactEmail,e.debug("Current plan",r),t.$emit("risevision.plan.loaded",r)},l=function(){e.debug("Reloading current plan"),n(function(){o.reloadSelectedCompany().then(c)["catch"](function(t){e.error("Error reloading plan information",t)})["finally"](function(){e.debug("Finished reloading current plan")})},1e4)};return s.isPlanActive=function(){return s.isSubscribed()||s.isOnTrial()},s.isFree=function(){return"free"===s.currentPlan.type},s.isParentPlan=function(){return!!s.currentPlan.parentPlan},s.isEnterpriseSubCompany=function(){return"enterprisesub"===s.currentPlan.type},s.isSubscribed=function(){return!s.isFree()&&"Active"===s.currentPlan.status},s.isOnTrial=function(){return!s.isFree()&&"Trial"===s.currentPlan.status},s.isTrialExpired=function(){return!s.isFree()&&"Trial Expired"===s.currentPlan.status},s.isSuspended=function(){return!s.isFree()&&"Suspended"===s.currentPlan.status},s.isCancelled=function(){return!s.isFree()&&"Cancelled"===s.currentPlan.status},s.isCancelledActive=function(){var e=new Date;return s.isCancelled()&&s.currentPlan.currentPeriodEndDate>e},c(),t.$on("risevision.company.selectedCompanyChanged",function(){c()}),t.$on("risevision.company.updated",function(){c()}),t.$on("chargebee.subscriptionChanged",function(){l()}),t.$on("chargebee.subscriptionCancelled",function(){l()}),s}])}(angular),function(e){"use strict";e.module("risevision.common.components.plans").value("PLANS_LIST",[{name:"Free",type:"free",order:0,productId:"000",productCode:"000",status:"Active",proLicenseCount:0,monthly:{priceDisplayMonth:0,billAmount:0,save:0},yearly:{priceDisplayMonth:0,priceDisplayYear:0,billAmount:0,save:0}},{name:"Volume",type:"volume",order:1,productId:"2317",productCode:"34e8b511c4cc4c2affa68205cd1faaab427657dc",proLicenseCount:3,monthly:{priceDisplayMonth:10,billAmount:10,save:0},yearly:{priceDisplayMonth:10,priceDisplayYear:110,billAmount:110,save:10},trialPeriod:14,discountIndustries:["PRIMARY_SECONDARY_EDUCATION","HIGHER_EDUCATION","LIBRARIES","PHILANTHROPY","NON_PROFIT_ORGANIZATION_MANAGEMENT","RELIGIOUS_INSTITUTIONS"]},{name:"Starter",type:"starter",order:1,productId:"335",productCode:"019137f7bb35f5f90085a033c013672471faadae",proLicenseCount:1,monthly:{priceDisplayMonth:10,billAmount:10,save:0},yearly:{priceDisplayMonth:10,priceDisplayYear:110,billAmount:110,save:10},trialPeriod:14},{name:"Basic",type:"basic",order:2,productId:"289",productCode:"40c092161f547f8f72c9f173cd8eebcb9ca5dd25",proLicenseCount:3,monthly:{priceDisplayMonth:9,billAmount:27,save:36},yearly:{priceDisplayMonth:9,priceDisplayYear:99,billAmount:297,save:63},trialPeriod:14},{name:"Advanced",type:"advanced",order:3,productId:"290",productCode:"93b5595f0d7e4c04a3baba1102ffaecb17607bf4",proLicenseCount:11,monthly:{priceDisplayMonth:8,billAmount:88,save:264},yearly:{priceDisplayMonth:8,priceDisplayYear:88,billAmount:968,save:352},trialPeriod:14},{name:"Enterprise",type:"enterprise",order:4,productId:"301",productCode:"b1844725d63fde197f5125b58b6cba6260ee7a57",proLicenseCount:70,monthly:{priceDisplayMonth:7,billAmount:490,save:2520},yearly:{priceDisplayMonth:7,priceDisplayYear:77,billAmount:5390,save:3010}},{name:"Enterprise",type:"enterprisesub",order:5,productId:"303",productCode:"d521f5bfbc1eef109481eebb79831e11c7804ad8",proLicenseCount:0}]).factory("plansFactory",["$q","$log","$modal","$templateCache","userState","subscriptionStatusService","storeAuthorization","PLANS_LIST",function(e,t,n,o,r,s,a,i){var c={},l=_.map(i,"productCode"),u=_.keyBy(i,"type"),d=_.keyBy(i,"productCode"),m=[u.free,u.starter,u.basic,u.advanced,u.enterprise];c.showPlansModal=function(){if(!c.isPlansModalOpen){c.isPlansModalOpen=!0;var e=n.open({template:o.get("plans/plans-modal.html"),controller:"PlansModalCtrl",windowClass:"pricing-component-modal"});e.result["finally"](function(){c.isPlansModalOpen=!1})}};var p=function(){return t.debug("getCompanyPlanStatus called."),s.list(l.slice(1),r.getSelectedCompanyId()).then(function(e){t.debug("getCompanyPlanStatus response.",e);var n=_.keyBy(e,"pc");return n})};return c.getPlansDetails=function(){var e=_.cloneDeep(m);return p().then(function(t){return e.forEach(function(e){var n=t[e.productCode]||e;e.status=n.status,e.statusCode=n.statusCode}),e})["catch"](function(e){t.debug("Failed to load plans",e)})},c.startTrial=function(e){return a.startTrial(e.productCode).then(function(){var t=r.getCopyOfSelectedCompany(!0),n=d[e.productCode].proLicenseCount;t.planProductCode=e.productCode,t.planTrialPeriod=e.trialPeriod,t.planSubscriptionStatus="Trial",t.playerProTotalLicenseCount=n,t.playerProAvailableLicenseCount=n,r.updateCompanySettings(t)})["catch"](function(e){throw t.debug("Failed to start trial",e),e})},c.startVolumePlanTrial=function(){return c.startTrial(u.volume)},c}])}(angular),angular.module("risevision.common.components.plans").directive("rvOn",function(){return{restrict:"A",link:function(e,t,n){var o=n.rvOn,r=o.split(":")[0],s=o.split(":")[1];t.on(r,function(t){e.$apply(e[s].bind(null,e,{$event:t}))})}}}),angular.module("risevision.common.components.plans").controller("PlansModalCtrl",["$scope","$rootScope","$modalInstance","$log","$loading","$timeout","getCompany","plansFactory","currentPlanFactory","ChargebeeFactory","userState","purchaseFactory","PLANS_LIST","CHARGEBEE_PLANS_USE_PROD",function(e,t,n,o,r,s,a,i,c,l,u,d,m,p){function g(){var t=u.getCopyOfSelectedCompany().companyIndustry;e.pricingComponentDiscount=v.discountIndustries.indexOf(t)>=0}function f(){return r.start("plans-modal"),i.getPlansDetails().then(function(t){e.plans=t})["finally"](function(){r.stop("plans-modal")})}function h(){var t=u.getCopyOfSelectedCompany();e.chargebeeFactory.openSubscriptionDetails(t.id,t.planSubscriptionId)}var v=m.filter(function(e){return"Volume"===e.name})[0];e.pricingAtLeastOneDisplay=!0,e.currentPlan=c.currentPlan,e.purchaseFactory=d,e.chargebeeFactory=new l,e.startTrialError=null,e.isMonthly=!0,e.pricingComponentDiscount=!1,e.useProductionChargebeeData="true"===p,e.isCurrentPlan=function(t){return e.currentPlan.type===t.type},e.isCurrentPlanSubscribed=function(t){return e.isCurrentPlan(t)&&e.isSubscribed(t)},e.isOnTrial=function(e){return"on-trial"===e.statusCode},e.isTrialAvailable=function(e){return"trial-available"===e.statusCode},e.isTrialExpired=function(e){return"trial-expired"===e.statusCode},e.isSubscribed=function(e){return"Subscribed"===e.status||"Active"===e.status},e.isFree=function(e){return"free"===e.type},e.isStarter=function(e){return"starter"===e.type},e.showSavings=function(t){return!(e.isFree(t)||e.isStarter(t)&&e.isMonthly)},e.currentPlanLabelVisible=function(t){return c.isPlanActive()?e.isCurrentPlan(t):e.isFree(t)},e.getVisibleAction=function(t){return c.isPlanActive()?e.isCurrentPlan(t)?e.isOnTrial(t)?"subscribe":"":e.currentPlan.order>t.order?c.isOnTrial()&&!e.isFree(t)?"downgrade":"downgrade-portal":c.isOnTrial()?"subscribe":"subscribe-portal":e.isFree(t)?"":e.isTrialAvailable(t)?"start-trial":"subscribe"},e.startTrial=function(a){r.start("plans-modal"),e.startTrialError=null,i.startTrial(a).then(function(){return s(1e4).then(function(){return u.reloadSelectedCompany()}).then(function(){t.$emit("risevision.company.trial.started")})["catch"](function(e){o.debug("Failed to reload company",e)})["finally"](function(){n.close(a)})})["catch"](function(t){e.startTrialError=t})["finally"](function(){r.stop("plans-modal")})},e.showPurchaseModal=function(t,n){d.showPurchaseModal(t,n).then(e.dismiss)},e.downgradePortal=h,e.subscribePortal=h,e.purchaseAdditionalLicenses=h,e.isChargebee=function(){return u.isSelectedCompanyChargebee()},e.refreshButton=function(){var t=document.querySelector("pricing-component");e.pricingAtLeastOneDisplay=t&&t.displayCount&&t.displayCount>0},e.dismissAndShowPurchaseModal=function(){var t=document.querySelector("pricing-component"),o=t.displayCount,r="yearly"===t.period?"Yearly":"Monthly",s=t.tierName,a=o>1?"s":"",i=""+o+" Display"+a+" ("+s+" Plan, "+r+")";0!==o&&"0"!==o&&(n.dismiss("cancel"),e.showPurchaseModal({name:i,productId:v.productId,productCode:v.productCode,displays:o,yearly:{billAmount:t.priceTotal},monthly:{billAmount:t.priceTotal}},"monthly"===t.period))},e.dismiss=function(){n.dismiss("cancel")},e.init=function(){f(),g()},e.init()}]),function(e){try{e=angular.module("risevision.common.components.plans")}catch(t){e=angular.module("risevision.common.components.plans",[])}e.run(["$templateCache",function(e){e.put("plans/plans-modal.html",'<div><button type="button" class="dismiss" ng-click="dismiss()" aria-hidden="true"><i class="fa fa-lg fa-times"></i></button><h3 id="pricingComponentTitle" translate="">common-header.plans.pricing-component-title</h3><div id="pricingComponentContainer"><pricing-component ng-attr-apply-discount="{{pricingComponentDiscount ? \'\' : undefined}}" ng-attr-prod-env="{{useProductionChargebeeData ? \'\' : undefined}}" rv-on="display-count-changed:refreshButton"></pricing-component><button type="button" ng-disabled="!pricingAtLeastOneDisplay" ng-click="dismissAndShowPurchaseModal()" id="subscribeButton">I Want To Subscribe</button></div></div>')}])}(),angular.module("risevision.common.components.purchase-flow",["risevision.store.authorization","risevision.common.config","risevision.common.gapi","risevision.common.geodata","risevision.common.currency","risevision.common.components.loading","risevision.core.countries","ui.bootstrap"]),angular.module("risevision.common.components.purchase-flow").service("addressFactory",["$q","$log","userState","storeService","updateCompany","updateUser","addressService","contactService",function(e,t,n,o,r,s,a,i){var c={},l=function(e,t){var n={name:e.name,street:t.line1,unit:t.line2&&t.line2.length?t.line2:"",city:t.city,postalCode:t.postalCode,province:t.region,country:t.country};return a.addressesAreIdentical(e,n)};c.validateAddress=function(n){return n.validationError=!1,"CA"!==n.country&&"US"!==n.country?(t.debug("Address Validation skipped for country: ",n.country),e.resolve()):o.validateAddress(n).then(function(e){l(n,e)||t.error("Validated address differs from entered address: ",n,e)})["catch"](function(e){n.validationError=e.message?e.message:"Unknown Error"})},c.isValidOrEmptyAddress=function(n){return a.isEmptyAddress(n)?(t.debug("Address is empty, skipped validation"),e.resolve()):"CA"!==n.country&&"US"!==n.country&&""!==n.country?(t.debug("Address Validation skipped for country: ",n.country),e.resolve()):o.validateAddress(n)};var u=function(e,t){if(t){var o=n.getCopyOfSelectedCompany(!0);angular.extend(o,e),n.updateCompanySettings(o)}else if(e.id===n.getUserCompanyId()){var r=n.getCopyOfUserCompany(!0);angular.extend(r,e),n.updateCompanySettings(r)}};return c.updateAddress=function(o,s,i){var c=e.defer(),l=i?a.copyAddressFromShipTo(n.getCopyOfSelectedCompany()):n.getCopyOfUserCompany(),d={},m=!1;if(!i){var p=l.billingContactEmails||[],g=s&&s.email;g&&p.indexOf(g)===-1&&(p.unshift(g),d.billingContactEmails=p,m=!0)}return o&&!a.addressesAreIdentical(o,l)||m?(i?a.copyAddressToShipTo(o,d):a.copyAddress(o,d),t.info("Company Fields changed. Saving..."),r(d.id,d).then(function(){u(d,i),t.info("Company Fields saved."),c.resolve()})["catch"](function(){t.info("Error saving Company Fields."),c.reject("Error saving Company Fields.")})):c.resolve(),c.promise},c.updateContact=function(o){var r=e.defer(),a=n.getCopyOfProfile();return o&&!i.contactsAreIdentical(o,a)?(t.info("Contact information changed. Saving..."),s(n.getUsername(),o).then(function(){var e=n.getCopyOfProfile(!0);i.copyContactObj(o,e),n.updateUserProfile(e),t.info("Contact information saved."),r.resolve()})["catch"](function(){t.info("Error saving Contact information."),r.reject("Error saving Contact information.")})):r.resolve(),r.promise},c}]),angular.module("risevision.common.components.purchase-flow").service("addressService",[function(){this.copyAddress=function(e,t){return t||(t={}),t.id=e.id,t.name=e.name,t.street=e.street,t.unit=e.unit,t.city=e.city,t.country=e.country,t.postalCode=e.postalCode,t.province=e.province,t},this.copyAddressFromShipTo=function(e,t){return t||(t={}),t.id=e.id,t.name=e.shipToName,t.street=e.shipToStreet,t.unit=e.shipToUnit,t.city=e.shipToCity,t.country=e.shipToCountry,t.postalCode=e.shipToPostalCode,t.province=e.shipToProvince,t},this.copyAddressToShipTo=function(e,t){return t||(t={}),t.id=e.id,t.shipToName=e.name,t.shipToStreet=e.street,t.shipToUnit=e.unit,t.shipToCity=e.city,t.shipToCountry=e.country,t.shipToPostalCode=e.postalCode,t.shipToProvince=e.province,t},this.addressesAreIdentical=function(e,t){return t.name===e.name&&t.street===e.street&&t.unit===e.unit&&t.city===e.city&&t.country===e.country&&t.postalCode===e.postalCode&&t.province===e.province},this.isEmptyAddress=function(e){return!e||!(e.street||e.unit||e.city||e.country||e.postalCode||e.province)}}]),angular.module("risevision.common.components.purchase-flow").service("contactService",[function(){this.contactsAreIdentical=function(e,t){return e.firstName===t.firstName&&e.lastName===t.lastName&&e.email===t.email&&e.telephone===t.telephone},this.copyContactObj=function(e,t){return t||(t={}),t.username=e.username,t.firstName=e.firstName,t.lastName=e.lastName,t.email=e.email,t.telephone=e.telephone,t}}]),function(e){"use strict";e.module("risevision.common.components.purchase-flow").constant("RPP_ADDON_ID","c4b368be86245bf9501baaa6e0b00df9719869fd").factory("purchaseFactory",["$rootScope","$q","$log","$modal","$templateCache","$timeout","userState","storeService","stripeService","addressService","contactService","purchaseFlowTracker","RPP_ADDON_ID",function(t,n,o,r,s,a,i,c,l,u,d,m,p){var g={};g.loading=!1;var f=function(t,n){g.purchase={},g.purchase.plan=e.copy(t),g.purchase.plan.additionalDisplayLicenses=parseInt(t.additionalDisplayLicenses)||0,g.purchase.plan.isMonthly=n,g.purchase.billingAddress=u.copyAddress(i.getCopyOfUserCompany()),g.purchase.shippingAddress=u.copyAddressFromShipTo(i.getCopyOfSelectedCompany()),g.purchase.contact=d.copyContactObj(i.getCopyOfProfile()),g.purchase.paymentMethods={paymentMethod:"card",existingCreditCards:[],newCreditCard:{isNew:!0,address:{},useBillingAddress:!0,billingAddress:g.purchase.billingAddress}};var o=new Date;o.setDate(o.getDate()+30),g.purchase.paymentMethods.invoiceDate=o,g.purchase.paymentMethods.selectedCard=g.purchase.paymentMethods.newCreditCard,g.purchase.estimate={},m.trackProductAdded(g.purchase.plan)};g.showPurchaseModal=function(e,t){f(e,t);var n=r.open({template:s.get("purchase-flow/purchase-modal.html"),controller:"PurchaseModalCtrl",size:"md",backdrop:"static"});return n.result},g.showTaxExemptionModal=function(){var e=r.open({template:s.get("purchase-flow/tax-exemption.html"),controller:"TaxExemptionModalCtrl",size:"md",backdrop:"static"});return e.result.then(function(e){g.purchase.taxExemptionSent=e})},g.initializeStripeElements=function(e){return l.prepareNewElementsGroup(),n.all(e.map(function(e){return l.createElement(e)}))},g.authenticate3ds=function(e){return l.authenticate3ds(e).then(function(e){if(e.error)return g.purchase.checkoutError=e.error,n(function(t,n){n(e.error)})})["catch"](function(e){return console.log(e),g.purchase.checkoutError="Something went wrong, please retry or contact support@risevision.com",n(function(t,n){n(e)})})},g.preparePaymentIntent=function(){var e=g.purchase.paymentMethods,t=n.defer();if("invoice"===e.paymentMethod)t.resolve();else if("card"===e.paymentMethod){var o=C();c.preparePurchase(o).then(function(n){n.error?(g.purchase.checkoutError=n.error,t.reject(n.error)):(e.intentResponse=n,n.authenticationRequired?t.resolve(g.authenticate3ds(n.intentSecret)):t.resolve())})["catch"](function(e){g.purchase.checkoutError=e.message||"Something went wrong, please retry",t.reject(e)})}return t.promise},g.validatePaymentMethod=function(e){var t=g.purchase.paymentMethods,o=n.defer();if(g.purchase.checkoutError=null,"invoice"===t.paymentMethod)o.resolve();else if("card"===t.paymentMethod)if(t.selectedCard.isNew){var r=t.newCreditCard.address;t.newCreditCard.useBillingAddress&&(r=t.newCreditCard.billingAddress);var s={billing_details:{name:t.newCreditCard.name,address:{city:r.city,country:r.country,postal_code:r.postalCode,state:r.province}}};l.createPaymentMethod("card",e,s).then(function(e){e.error?o.reject(e.error):(t.paymentMethodResponse=e,o.resolve())})}else o.resolve();return o.promise};var h=function(){return g.purchase.plan.isMonthly?"01m":"01y"},v=function(){return"CA"===g.purchase.billingAddress.country?"cad":"usd"},y=function(){return g.purchase.plan.productCode+"-"+v()+h()},b=function(){return p+"-"+v()+h()+g.purchase.plan.productCode.substring(0,3)};g.getEstimate=function(){return g.purchase.estimate={currency:v()},g.loading=!0,c.calculateTaxes(g.purchase.billingAddress.id,y(),g.purchase.plan.displays,b(),g.purchase.plan.additionalDisplayLicenses,g.purchase.shippingAddress).then(function(e){var t=g.purchase.estimate;t.taxesCalculated=!0,t.taxes=e.taxes||[],t.total=e.total,t.subTotal=e.subTotal,t.couponAmount=e.couponAmount,t.totalTax=e.totalTax,t.shippingTotal=e.shippingTotal,m.trackPlaceOrderClicked(t)})["catch"](function(e){g.purchase.estimate.estimateError=e&&e.message?e.message:"An unexpected error has occurred. Please try again."})["finally"](function(){g.loading=!1})};var C=function(){var e=g.purchase.paymentMethods,t=[{id:y(),qty:g.purchase.plan.displays},{id:b(),qty:g.purchase.plan.additionalDisplayLicenses}],n=g.purchase.paymentMethods.selectedCard,o="invoice"===e.paymentMethod?null:{cardId:n.id,intentId:e.intentResponse?e.intentResponse.intentId:null,isDefault:!!n.isDefault},r={billTo:u.copyAddress(g.purchase.billingAddress),shipTo:u.copyAddress(g.purchase.shippingAddress),items:t,purchaseOrderNumber:e.purchaseOrderNumber,card:o,paymentMethodId:e.paymentMethodResponse?e.paymentMethodResponse.paymentMethod.id:null};return JSON.stringify(r)};return g.completePayment=function(){var e=C();return g.purchase.checkoutError=null,g.loading=!0,c.purchase(e).then(function(){g.purchase.reloadingCompany=!0,m.trackOrderPayNowClicked(g.purchase.estimate),a(1e4).then(function(){return i.reloadSelectedCompany()}).then(function(){t.$emit("risevision.company.trial.started")})["catch"](function(e){o.debug("Failed to reload company",e)})["finally"](function(){g.purchase.reloadingCompany=!1})})["catch"](function(e){g.purchase.checkoutError=e&&e.message?e.message:"There was an unknown error with the payment."})["finally"](function(){g.loading=!1})},g}])}(angular),angular.module("risevision.common.components.purchase-flow").factory("stripeLoader",["$q","$interval","$window","userState","STRIPE_PROD_KEY","STRIPE_TEST_KEY",function(e,t,n,o,r,s){
var a=e.defer(),i=o.getCopyOfUserCompany().isTest,c=t(function(){n.Stripe&&(t.cancel(c),a.resolve(n.Stripe(i?s:r)))},50);return function(){return a.promise.then(function(e){return e})}}]),angular.module("risevision.common.components.purchase-flow").service("stripeService",["$q","$log","$window","stripeLoader",function(e,t,n,o){this.createPaymentMethod=function(e,t,n){return o().then(function(o){return o.createPaymentMethod(e,t,n)})};var r;this.prepareNewElementsGroup=function(){r=o().then(function(e){return e.elements()})},this.createElement=function(e,t){return r.then(function(n){return n.create(e,t)})},this.authenticate3ds=function(e){return o().then(function(t){return t.handleCardAction(e)})}}]),function(e){"use strict";e.module("risevision.common.components.purchase-flow").factory("taxExemptionFactory",["storeService",function(e){var t={taxExemption:{}};return t.loading=!1,t.submitCertificate=function(){return t.taxExemptionError=null,t.loading=!0,e.uploadTaxExemptionCertificate(t.taxExemption.file).then(function(n){return e.addTaxExemption(t.taxExemption,n)})["catch"](function(e){t.taxExemptionError=e.message||"An error ocurred while submitting your tax exemption. Please try again."})["finally"](function(){t.loading=!1})},t}])}(angular),angular.module("risevision.common.components.purchase-flow").factory("purchaseFlowTracker",["segmentAnalytics",function(e){var t={};return t.trackProductAdded=function(t){e.track("Product Added",{id:t.productCode,name:t.name,price:t.isMonthly?t.monthly.billAmount:t.yearly.billAmount,quantity:1,category:"Plans",inApp:!1})},t.trackPlaceOrderClicked=function(t){e.track("Place Order Clicked",{amount:t.total,currency:t.currency,inApp:!1})},t.trackOrderPayNowClicked=function(t){e.track("Order Pay Now Clicked",{amount:t.total,currency:t.currency,inApp:!1})},t}]),angular.module("risevision.common.components.purchase-flow").directive("addressForm",["$templateCache","COUNTRIES","REGIONS_CA","REGIONS_US",function(e,t,n,o){return{restrict:"E",scope:{formObject:"=",addressObject:"=",hideCompanyName:"="},template:e.get("purchase-flow/address-form.html"),link:function(e){e.countries=t,e.regionsCA=n,e.regionsUS=o,e.isFieldInvalid=function(t){var n=e.formObject,o=n[t];return(o.$dirty||n.$submitted)&&o.$invalid}}}}]),angular.module("risevision.common.components.purchase-flow").directive("billingAddress",["$templateCache","purchaseFactory",function(e,t){return{restrict:"E",template:e.get("purchase-flow/checkout-billing-address.html"),link:function(e){e.billingAddress=t.purchase.billingAddress,e.contact=t.purchase.contact}}}]),angular.module("risevision.common.components.purchase-flow").directive("checkoutSuccess",["$templateCache","purchaseFactory",function(e,t){return{restrict:"E",template:e.get("purchase-flow/checkout-success.html"),link:function(e){e.purchase=t.purchase}}}]),angular.module("risevision.common.components.purchase-flow").directive("paymentMethods",["$templateCache","purchaseFactory",function(e,t){return{restrict:"E",template:e.get("purchase-flow/checkout-payment-methods.html"),link:function(e){var n=["cardNumber","cardExpiry","cardCvc"],o=["#new-card-number","#new-card-expiry","#new-card-cvc"];e.paymentMethods=t.purchase.paymentMethods,e.contactEmail=t.purchase.contact.email,e.purchase=t.purchase,e.showTaxExemptionModal=t.showTaxExemptionModal,t.initializeStripeElements(n).then(function(t){t.forEach(function(t,r){e[n[r]]=t,t.mount(o[r])})}),e.getCardDescription=function(e){return"***-"+e.last4+", "+e.cardType+(e.isDefault?" (default)":"")}}}}]),angular.module("risevision.common.components.purchase-flow").directive("provinceValidator",["REGIONS_CA","REGIONS_US",function(e,t){return{require:"ngModel",restrict:"A",scope:{provinceValidator:"="},link:function(n,o,r,s){var a=function(o){var r=n.provinceValidator,a=!0;return r&&("CA"===r?a=o&&_.find(e,function(e){return e[1]===o}):"US"===r&&(a=o&&_.find(t,function(e){return e[1]===o}))),s.$setValidity("validProvince",!!a),o};n.$watch("provinceValidator",function(){a(s.$modelValue)}),s.$parsers.unshift(a),s.$formatters.unshift(a)}}}]),angular.module("risevision.common.components.purchase-flow").directive("reviewPurchase",["$templateCache","userState","purchaseFactory",function(e,t,n){return{restrict:"E",template:e.get("purchase-flow/checkout-review-purchase.html"),link:function(e){e.purchase=n.purchase,e.selectedCompany=t.getCopyOfSelectedCompany(),e.getAdditionalDisplaysPrice=function(){var t=e.purchase.plan;return t.isMonthly?t.additionalDisplayLicenses*t.monthly.priceDisplayMonth:t.additionalDisplayLicenses*t.yearly.priceDisplayYear},e.showTaxExemptionModal=function(){n.showTaxExemptionModal().then(function(){n.purchase.taxExemptionSent&&n.getEstimate()})}}}}]),angular.module("risevision.common.components.purchase-flow").directive("reviewSubscription",["$templateCache","purchaseFactory",function(e,t){return{restrict:"E",template:e.get("purchase-flow/checkout-review-subscription.html"),link:function(e){e.plan=t.purchase.plan;var n=function(){var t=e.plan.additionalDisplayLicenses;return!isNaN(t)&&t%1===0&&t>=0?t:0};e.incrementLicenses=function(){e.plan.additionalDisplayLicenses=n()+1},e.decrementLicenses=function(){0===n()&&(e.plan.additionalDisplayLicenses=0),e.plan.additionalDisplayLicenses>0&&e.plan.additionalDisplayLicenses--},e.getMonthlyPrice=function(){return e.plan.monthly.billAmount+n()*e.plan.monthly.priceDisplayMonth},e.getYearlyPrice=function(){return e.plan.yearly.billAmount+n()*e.plan.yearly.priceDisplayYear}}}}]),angular.module("risevision.common.components.purchase-flow").directive("shippingAddress",["$templateCache","purchaseFactory",function(e,t){return{restrict:"E",template:e.get("purchase-flow/checkout-shipping-address.html"),link:function(e){e.shippingAddress=t.purchase.shippingAddress}}}]),angular.module("risevision.common.components.purchase-flow").directive("yearSelector",["$templateCache",function(e){return{restrict:"E",template:e.get("purchase-flow/year-selector.html"),replace:"true",scope:{ngModel:"=?"},controller:["$scope",function(e){var t=(new Date).getFullYear(),n=20;e.init=function(){e.years=[],e.ngModel&&e.ngModel<t&&e.years.push(e.ngModel.toString());for(var o=0;o<n;o++)e.years.push((t+o).toString())},e.init()}]}}]),angular.module("risevision.common.components.purchase-flow").value("PURCHASE_STEPS",[{name:"Billing Address",index:0,formName:"billingAddressForm"},{name:"Shipping Address",index:1,formName:"shippingAddressForm"},{name:"Payment Method",index:2,formName:"paymentMethodsForm"},{name:"Purchase Review",index:3}]).controller("PurchaseModalCtrl",["$scope","$modalInstance","$loading","purchaseFactory","addressFactory","plansFactory","PURCHASE_STEPS",function(e,t,n,o,r,s,a){e.form={},e.factory=o,e.PURCHASE_STEPS=a,e.currentStep=0,e.finalStep=!1,e.$watch("factory.loading",function(e){e?n.start("purchase-modal"):n.stop("purchase-modal")});var i=function(){var t=a[e.currentStep],n=t.formName,o=e.form[n];return!o||o.$valid};e.validateAddress=function(t,n,s){i()&&(o.loading=!0,r.validateAddress(t)["finally"](function(){o.loading=!1,t.validationError||(r.updateContact(n),r.updateAddress(t,n,s),e.setNextStep())}))},e.validatePaymentMethod=function(t){i()&&(o.loading=!0,o.validatePaymentMethod(t).then(e.preparePayment).then(e.setNextStep)["finally"](function(){o.loading=!1}))},e.preparePayment=function(){return o.preparePaymentIntent()},e.completePayment=function(){o.completePayment().then(function(){o.purchase.checkoutError||e.setNextStep()})},e.setNextStep=function(){i()&&(e.finalStep&&e.currentStep<2||2===e.currentStep?(e.currentStep=3,e.finalStep=!0,o.getEstimate()):e.currentStep++)},e.setPreviousStep=function(){e.currentStep>0?e.currentStep--:(t.close(),s.showPlansModal())},e.setCurrentStep=function(n){o.purchase.checkoutError=null,n===-1&&(t.close(),s.showPlansModal()),e.currentStep=n},e.close=function(){o.purchase.reloadingCompany?(o.loading=!0,e.$watch("factory.purchase.reloadingCompany",function(e){e||(o.loading=!1,t.close("success"))})):t.close("success")},e.dismiss=function(){t.dismiss("cancel")}}]),angular.module("risevision.common.components.purchase-flow").controller("TaxExemptionModalCtrl",["$scope","$modalInstance","$loading","taxExemptionFactory",function(e,t,n,o){e.form={},e.factory=o,e.$watch("factory.loading",function(e){e?n.start("tax-exemption-modal"):n.stop("tax-exemption-modal")}),e.submit=function(){if(!e.form.taxExemptionForm||!e.form.taxExemptionForm.$invalid)return o.submitCertificate().then(function(){o.taxExemptionError||t.close(!0)})},e.close=function(){t.dismiss()},e.selectFile=function(){setTimeout(function(){document.querySelector("#inputExemption").click()},0)},e.setFile=function(t){e.$apply(function(){o.taxExemption.file=t.files[0]})},e.clearFile=function(){o.taxExemption.file=null,document.querySelector("#inputExemption").value=""},e.isFieldInvalid=function(t){var n=e.form.taxExemptionForm,o=n[t];return(o.$dirty||n.$submitted)&&o.$invalid}}]),angular.module("risevision.common.components.purchase-flow").filter("cardLastFour",[function(){return function(e){return e=e?e:"****",e=e.length<4?"****".substr(e.length)+e:e,e=e.length>4?e.substr(e.length-4):e,"***-"+e}}]),angular.module("risevision.common.components.purchase-flow").filter("countryName",["COUNTRIES",function(e){return function(t){for(var n=t,o=0;o<e.length;o++)if(e[o].code===t){n=e[o].name;break}return n}}]),angular.module("risevision.common.components.purchase-flow").filter("paddedMonth",[function(){return function(e){return e<10&&(e="0"+e),e}}]),function(e){try{e=angular.module("risevision.common.components.purchase-flow")}catch(t){e=angular.module("risevision.common.components.purchase-flow",[])}e.run(["$templateCache",function(e){e.put("purchase-flow/address-form.html",'<div class="form-group" ng-if="hideCompanyName !== true" ng-class="{ \'has-error\': isFieldInvalid(\'companyName\') }"><label for="address-form-companyName" class="control-label">Company Name *</label> <input id="address-form-companyName" name="companyName" type="text" class="form-control" ng-model="addressObject.name" autocomplete="organization" aria-required="true" tabindex="1" required=""></div><div class="row"><div class="col-md-6"><div class="form-group" ng-class="{ \'has-error\': isFieldInvalid(\'street\') }"><label for="address-form-streetAddress" class="control-label">Street Address *</label> <input id="address-form-streetAddress" name="street" type="text" class="form-control" ng-model="addressObject.street" autocomplete="address-line1" pattern=".{0,50}" aria-required="true" tabindex="1" required=""></div></div><div class="col-md-6"><div class="form-group"><label for="address-form-unit" class="control-label">Unit</label> <input id="address-form-unit" type="text" name="unit" class="form-control" ng-model="addressObject.unit" autocomplete="address-line2" aria-required="true" tabindex="1" pattern=".{0,100}"></div></div></div><div class="row"><div class="col-md-6"><div class="form-group" ng-class="{ \'has-error\': isFieldInvalid(\'city\') }"><label for="address-form-city" class="control-label">City *</label> <input id="address-form-city" name="city" type="text" class="form-control" ng-model="addressObject.city" autocomplete="address-level2" aria-required="true" tabindex="1" required=""></div></div><div class="col-md-6"><div class="form-group" ng-class="{ \'has-error\': isFieldInvalid(\'country\') }"><label for="address-form-country" class="control-label">Country *</label><select id="address-form-country" name="country" autocomplete="country" class="form-control" ng-model="addressObject.country" ng-options="c.code as c.name for c in countries" empty-select-parser="" aria-required="true" tabindex="1" required=""><option ng-show="false" value="">&lt; Select Country &gt;</option></select></div></div></div><div class="row"><div class="col-md-6"><div class="form-group" ng-class="{ \'has-error\': isFieldInvalid(\'province\') }"><label class="control-label">State/Province/Region <span ng-hide="addressObject.country !== \'US\' && addressObject.country !== \'CA\'">*</span></label> <label for="province" class="hidden">Enter Province or Region</label> <input name="province" type="text" class="form-control" ng-model="addressObject.province" autocomplete="address-level1" ng-show="addressObject.country !== \'US\' && addressObject.country !== \'CA\'" province-validator="addressObject.country" tabindex="1"> <label for="province-selector" class="hidden">Select Province (Canada)</label><select name="province-selector" class="form-control selectpicker" ng-model="addressObject.province" ng-options="c[1] as c[0] for c in regionsCA" autocomplete="address-level1" ng-show="addressObject.country === \'CA\'" empty-select-parser="" tabindex="1"><option ng-show="false" value="">&lt; Select Province &gt;</option></select><label for="state-selector" class="hidden">Select State (United States)</label><select name="state-selector" class="form-control selectpicker" ng-model="addressObject.province" ng-options="c[1] as c[0] for c in regionsUS" autocomplete="address-level1" ng-show="addressObject.country === \'US\'" empty-select-parser="" tabindex="1"><option ng-show="false" value="">&lt; Select State &gt;</option></select></div></div><div class="col-md-6"><div class="form-group" ng-class="{ \'has-error\': isFieldInvalid(\'postalCode\') }"><label for="address-form-postalCode" class="control-label">ZIP/Postal Code *</label> <input id="address-form-postalCode" name="postalCode" type="text" class="form-control" ng-model="addressObject.postalCode" autocomplete="postal-code" pattern=".{0,11}" aria-required="true" tabindex="1" required=""></div></div></div>')}])}(),function(e){try{e=angular.module("risevision.common.components.purchase-flow")}catch(t){e=angular.module("risevision.common.components.purchase-flow",[])}e.run(["$templateCache",function(e){e.put("purchase-flow/checkout-billing-address.html",'<div id="checkout-billing-address" class="address-editor"><form id="form.billingAddressForm" role="form" class="u_margin-md-top" name="form.billingAddressForm" autocomplete="on" novalidate=""><div class="alert alert-danger" ng-show="form.billingAddressForm.$submitted && form.billingAddressForm.$invalid">Please complete the missing information below.</div><div id="errorBox" class="alert alert-danger" role="alert" ng-show="billingAddress.validationError"><strong>Address Validation Error</strong> {{billingAddress.validationError}}</div><div class="row"><div class="col-md-6"><div class="form-group" ng-class="{ \'has-error\': (form.billingAddressForm.firstName.$dirty || form.billingAddressForm.$submitted) && form.billingAddressForm.firstName.$invalid }"><label for="contact-firstName" class="control-label">First Name *</label> <input id="contact-firstName" type="text" class="form-control" name="firstName" ng-model="contact.firstName" autocomplete="given-name" aria-required="true" tabindex="1" required=""></div></div><div class="col-md-6"><div class="form-group" ng-class="{ \'has-error\': (form.billingAddressForm.lastName.$dirty || form.billingAddressForm.$submitted) && form.billingAddressForm.lastName.$invalid }"><label for="contact-lastName" class="control-label">Last Name *</label> <input id="contact-lastName" type="text" class="form-control" name="lastName" ng-model="contact.lastName" autocomplete="family-name" aria-required="true" tabindex="1" required=""></div></div></div><div class="row"><div class="col-md-6"><div class="form-group" ng-class="{ \'has-error\': (form.billingAddressForm.email.$dirty || form.billingAddressForm.$submitted) && form.billingAddressForm.email.$invalid }"><label for="contact-email" class="control-label">Email *</label> <input id="contact-email" type="email" class="form-control" name="email" ng-model="contact.email" autocomplete="email" aria-required="true" tabindex="1" required=""></div></div><div class="col-md-6"><div class="form-group"><label for="contact-phone" class="control-label">Telephone</label> <input id="contact-phone" name="tel" type="tel" class="form-control" ng-model="contact.telephone" autocomplete="tel" tabindex="1"></div></div></div><address-form form-object="form.billingAddressForm" address-object="billingAddress"></address-form><hr><div class="row"><div class="col-xs-12"><button id="backButton" type="button" class="btn btn-default pull-left" ng-click="setPreviousStep()" ng-hide="finalStep" aria-label="Go back to Subscription Details" translate="" tabindex="2">common.back</button> <button id="continueButton" aria-label="Continue to Shipping Address" type="submit" form="form.billingAddressForm" class="btn btn-primary pull-right" ng-click="validateAddress(billingAddress, contact, false)" translate="" tabindex="1">common.continue</button></div></div></form></div>')}])}(),function(e){try{e=angular.module("risevision.common.components.purchase-flow")}catch(t){e=angular.module("risevision.common.components.purchase-flow",[])}e.run(["$templateCache",function(e){e.put("purchase-flow/checkout-payment-methods.html",'<div id="checkout-payment-methods"><div id="errorBox" class="alert alert-danger" role="alert" ng-show="purchase.checkoutError"><strong>Payment Method Error</strong> {{purchase.checkoutError}}</div><form id="form.paymentMethodsForm" role="form" class="u_margin-md-top" name="form.paymentMethodsForm" novalidate=""><div class="row u_margin-md-top"><div class="col-md-8 col-xs-12 form-inline"><div class="form-group"><label for="payment-method-select" class="u_margin-right">Payment Method</label><select id="payment-method-select" class="form-control selectpicker" ng-model="paymentMethods.paymentMethod" tabindex="1"><option value="card">Credit Card</option><option value="invoice">Invoice Me</option></select></div></div></div><hr><div id="credit-card-form" ng-if="paymentMethods.paymentMethod === \'card\'"><div class="row" ng-if="false"><div class="col-md-12"><div class="form-group"><label for="credit-card-select" class="hidden">Add New Credit Card</label><select id="credit-card-select" class="form-control selectpicker" ng-model="paymentMethods.selectedCard" ng-options="c as getCardDescription(c) for c in paymentMethods.existingCreditCards track by c.id"><option value="">Add New Credit Card</option></select></div></div></div><div id="new-credit-card-form" ng-if="paymentMethods.selectedCard.isNew"><div class="alert alert-danger" ng-show="form.paymentMethodsForm.$submitted && form.paymentMethodsForm.$invalid">Please complete the missing information below.</div><div id="errorBox" class="alert alert-danger" role="alert" ng-show="paymentMethods.newCreditCard.validationErrors.length"><strong>Card Validation Error<span ng-show="paymentMethods.newCreditCard.validationErrors.length > 1">s</span></strong><ul><li ng-repeat="error in paymentMethods.newCreditCard.validationErrors">{{error}}</li></ul></div><div id="errorBox" class="alert alert-danger" role="alert" ng-show="paymentMethods.newCreditCard.tokenError"><strong>Card Processing Error</strong> {{paymentMethods.newCreditCard.tokenError}}</div><div class="row"><div class="col-md-12"><div class="form-group" ng-class="{ \'has-error\': (form.paymentMethodsForm.cardholderName.$dirty || form.paymentMethodsForm.$submitted) && form.paymentMethodsForm.cardholderName.$invalid }"><label for="new-card-name" class="control-label">Cardholder Name *</label> <input id="new-card-name" aria-required="true" tabindex="1" type="text" class="form-control" name="cardholderName" data-stripe="name" ng-model="paymentMethods.newCreditCard.name" autocomplete="cc-name" required=""></div></div></div><div class="row"><div class="col-md-12"><div class="form-group" ng-class="{ \'has-error\': (form.paymentMethodsForm.cardNumber.$dirty || form.paymentMethodsForm.$submitted) && form.paymentMethodsForm.cardNumber.$invalid }"><label for="new-card-number" class="control-label">Card Number *</label><div id="new-card-number" tabindex="2"></div></div></div></div><div class="row"><div class="col-md-4"><div class="form-group" ng-class="{ \'has-error\': (form.paymentMethodsForm.cardExpiryMonth.$dirty || form.paymentMethodsForm.$submitted) && form.paymentMethodsForm.cardExpiryMonth.$invalid }"><label for="new-card-expiry" class="control-label">Expiry*</label><div id="new-card-expiry" tabindex="3"></div></div></div><div class="col-md-4"><div class="form-group" ng-class="{ \'has-error\': (form.paymentMethodsForm.cardCvc.$dirty || form.paymentMethodsForm.$submitted) && form.paymentMethodsForm.cardCvc.$invalid }"><label for="new-card-cvc" class="control-label">Security Code *</label><div id="new-card-cvc" tabindex="4"></div></div></div></div><div class="checkbox"><label for="toggleMatchBillingAddress" aria-label="Match Billing Address"><input type="checkbox" id="toggleMatchBillingAddress" ng-model="paymentMethods.newCreditCard.useBillingAddress" tabindex="1"> Same As Billing Address</label></div><div id="new-card-address"><address-form form-object="form.paymentMethodsForm" address-object="paymentMethods.newCreditCard.address" hide-company-name="true" ng-if="!paymentMethods.newCreditCard.useBillingAddress"></address-form></div></div><div id="existing-credit-card-form" ng-if="!paymentMethods.selectedCard.isNew"><div id="errorBox" class="alert alert-danger" role="alert" ng-show="paymentMethods.selectedCard.validationErrors.length"><strong>Card Validation Error</strong> {{paymentMethods.selectedCard.validationErrors[0]}}</div><div class="row"><div class="col-md-12"><div class="form-group"><label for="existing-card-name" class="control-label">Cardholder Name</label> <input id="existing-card-name" type="text" class="form-control" placeholder="{{paymentMethods.selectedCard.name}}" tabindex="1" disabled="disabled"></div></div></div><div class="row"><div class="col-md-12"><div class="form-group"><label for="existing-card-number" class="control-label">Card Number</label> <input id="existing-card-number" type="text" class="form-control" placeholder="{{paymentMethods.selectedCard.last4 | cardLastFour}}" tabindex="1" disabled="disabled"></div></div></div><div class="row form-group"><div class="col-md-4"><div class="form-group"><label for="existing-card-expiry-month" class="control-label">Expiry Month</label> <input id="existing-card-expiry-month" type="text" class="form-control masked" placeholder="{{paymentMethods.selectedCard.expMonth | paddedMonth}}" disabled="disabled" tabindex="1"></div></div><div class="col-md-4"><div class="form-group"><label for="existing-card-expiry-year" class="control-label">Expiry Year</label> <input id="existing-card-expiry-year" type="text" class="form-control masked" placeholder="{{paymentMethods.selectedCard.expYear}}" tabindex="1" disabled="disabled"></div></div></div></div></div><div id="generateInvoice" ng-if="paymentMethods.paymentMethod === \'invoice\'"><p>If you\'d like to be invoiced for your purchase (rather than paying now by credit card), please enter a <b>Purchase Order</b> number and continue with checkout.</p><p>You will receive an invoice for this purchase total at <span class="font-weight-bold">{{contactEmail}}</span>. Invoices are due within 30 days of creation, payable by check, wire transfer, or credit card.</p><p>Please note your invoice is generated only once this checkout is completed.</p><div class="row"><div class="col-xs-12 col-sm-6"><div class="form-group"><label for="invoice-po-number" class="control-label">Purchase Order Number</label> <input id="invoice-po-number" type="text" class="form-control" name="purchaseOrder" ng-model="paymentMethods.purchaseOrderNumber" tabindex="1"></div></div></div><div id="generateInvoiceOverdue" class="hidden"><p class="text-danger">You have overdue invoice payments on your account.</p><p>In order to complete this purchase by invoice, please pay your outstanding invoices <a href="#">here</a>.</p></div></div><hr><div class="row"><div class="col-xs-12 text-center u_margin-sm-bottom"><a id="showTaxExemption" href="#" aria-label="Are you Tax Exempt?" ng-click="showTaxExemptionModal()" ng-show="!purchase.taxExemptionSent" tabindex="3" translate="">Are you Tax Exempt?</a><h5 ng-show="purchase.taxExemptionSent">Tax Exemption Submitted</h5></div></div><div class="row"><div class="col-xs-12"><button id="backButton" type="button" aria-label="Go back to Shipping Address" class="btn btn-default pull-left" ng-click="setPreviousStep()" ng-hide="finalStep" tabindex="2" translate="">common.back</button> <button id="continueButton" type="submit" aria-label="Continue to Purchase Review" form="form.paymentMethodsForm" class="btn btn-primary pull-right" ng-click="validatePaymentMethod(cardNumber)" tabindex="1" translate="">common.continue</button></div></div></form></div>')}])}(),function(e){try{e=angular.module("risevision.common.components.purchase-flow")}catch(t){e=angular.module("risevision.common.components.purchase-flow",[])}e.run(["$templateCache",function(e){e.put("purchase-flow/checkout-review-purchase.html",'<div id="checkout-review-purchase"><div id="errorBox" class="alert alert-danger" role="alert" ng-show="purchase.estimate.estimateError"><div class="row"><div class="col-xs-9"><p><strong>Tax Estimate Error</strong> {{purchase.estimate.estimateError}}</p></div><div class="col-xs-3"><a class="btn btn-default btn-block" href="#" ng-click="factory.getEstimate()">Retry</a></div></div></div><div id="errorBox" class="alert alert-danger" role="alert" ng-show="purchase.checkoutError"><strong>Payment Error</strong> {{purchase.checkoutError}}</div><div class="row"><div class="col-md-6 u_margin-sm-top"><h4 class="u_margin-sm-bottom">Purchasing For</h4><span class="font-weight-bold">{{selectedCompany.name}}</span><br>Company ID: {{selectedCompany.id}}</div><div class="col-md-6 u_margin-sm-top"><h4 class="u_margin-sm-bottom">Payment Method <button aria-label="Edit Payment Method" class="btn btn-default btn-xs" ng-click="setCurrentStep(2)" tabindex="1">Edit</button></h4><div ng-show="purchase.paymentMethods.paymentMethod === \'card\'"><span class="font-weight-bold">{{purchase.paymentMethods.selectedCard.cardType}}</span><br>{{purchase.paymentMethods.selectedCard.last4 | cardLastFour}}<br>Exp: {{purchase.paymentMethods.selectedCard.expMonth | paddedMonth}}/{{purchase.paymentMethods.selectedCard.expYear}}</div><div ng-show="purchase.paymentMethods.paymentMethod === \'invoice\'"><span class="font-weight-bold">Paying by Invoice</span><br>Due Date: {{purchase.paymentMethods.invoiceDate | date: \'d-MMM-yyyy\'}} <span ng-if="purchase.paymentMethods.purchaseOrderNumber"><br>Purchase Order Number: {{purchase.paymentMethods.purchaseOrderNumber}}</span></div></div></div><div class="row"><div class="col-md-6 u_margin-sm-top"><h4 class="u_margin-sm-bottom">Billing Address <button aria-label="Edit Billing Address" class="btn btn-default btn-xs" ng-click="setCurrentStep(0)" tabindex="1">Edit</button></h4>{{purchase.contact.firstName}} {{purchase.contact.lastName}}<br>{{purchase.contact.email}}<br>{{purchase.billingAddress.name}}<br>{{purchase.billingAddress.street}}<br><span ng-show="purchase.billingAddress.unit">{{purchase.billingAddress.unit}}<br></span> {{purchase.billingAddress.city}}, <span ng-show="purchase.billingAddress.province">{{purchase.billingAddress.province}},</span> {{purchase.billingAddress.postalCode}}<br>{{purchase.billingAddress.country | countryName}}</div><div class="col-md-6 u_margin-sm-top"><h4 class="u_margin-sm-bottom">Shipping Address <button aria-label="Edit Shipping Address" class="btn btn-default btn-xs" ng-click="setCurrentStep(1)" tabindex="1">Edit</button></h4>{{purchase.shippingAddress.name}}<br>{{purchase.shippingAddress.street}}<br><span ng-show="purchase.shippingAddress.unit">{{purchase.shippingAddress.unit}}<br></span> {{purchase.shippingAddress.city}}, <span ng-show="purchase.shippingAddress.province">{{purchase.shippingAddress.province}},</span> {{purchase.shippingAddress.postalCode}}<br>{{purchase.shippingAddress.country | countryName}}</div></div><br><hr class="u_margin-xs-top u_margin-xs-bottom"><div class="row"><div class="col-xs-8"><h4 class="u_margin-sm-bottom">Subscription Details <button aria-label="Edit Subscription Details" class="btn btn-default btn-xs" ng-click="setCurrentStep(-1)" tabindex="1">Edit</button></h4></div></div><div class="row"><div class="col-sm-6 col-xs-6 text-right"><p>{{purchase.plan.name}}<br><span ng-show="purchase.estimate.couponAmount > 0">Education and Non-profit discount<br></span> <span ng-repeat="tax in purchase.estimate.taxes">{{tax.taxName}}<br></span> Total Tax:</p><span class="order-total">Order Total:</span></div><div class="col-sm-4 col-xs-6 text-right"><p>${{purchase.estimate.subTotal}}<br><span ng-show="purchase.estimate.couponAmount > 0">-${{purchase.estimate.couponAmount}}<br></span> <span ng-repeat="tax in purchase.estimate.taxes">${{tax.taxAmount | number:2}}<br></span> ${{purchase.estimate.totalTax | number:2}}</p><span class="order-total">${{purchase.estimate.total | number:2}} <span class="u_margin-left text-subtle">{{purchase.estimate.currency | uppercase}}</span></span></div></div><div class="row"><hr class="u_margin-sm-top"></div><div class="row"><div class="col-xs-12 text-center u_margin-sm-bottom"><a id="showTaxExemption" href="#" aria-label="Are you Tax Exempt?" ng-click="showTaxExemptionModal()" ng-show="purchase.estimate.totalTax > 0 && !purchase.taxExemptionSent" tabindex="3" translate="">Are you Tax Exempt?</a><h5 ng-show="purchase.taxExemptionSent">Tax Exemption Submitted</h5></div></div><div class="row"><div class="col-xs-8 col-xs-offset-2 u_margin-md-bottom"><button id="payButton" class="btn btn-primary btn-hg btn-block" ng-click="completePayment()" tabindex="1" aria-label="Complete Payment"><span id="payLabel" ng-if="purchase.paymentMethods.paymentMethod === \'card\'">Pay ${{purchase.estimate.total | number:2}} Now</span> <span id="invoiceLabel" ng-if="purchase.paymentMethods.paymentMethod === \'invoice\'">Invoice Me ${{purchase.estimate.total | number:2}} Now</span></button></div></div></div>')}])}(),function(e){try{e=angular.module("risevision.common.components.purchase-flow")}catch(t){e=angular.module("risevision.common.components.purchase-flow",[])}e.run(["$templateCache",function(e){e.put("purchase-flow/checkout-review-subscription.html",'<div id="checkout-review-subscription"><form id="reviewSubscriptionForm" role="form" name="form.reviewSubscriptionForm" autocomplete="on" novalidate=""><h3 class="text-center" translate="" translate-values="{ planName: plan.name }">common-header.purchase.review-subscription.plan-name</h3><div class="subscription-summary text-center"><div class="subscription-summary-item"><div class="stat"><div class="stat-value">${{plan.monthly.priceDisplayMonth}}</div><div class="stat-legend">{{ \'common-header.purchase.review-subscription.per-display\' | translate}} {{ \'common-header.purchase.review-subscription.per-month\' | translate}}</div></div></div><div class="subscription-summary-divider">x</div><div class="subscription-summary-item"><div class="stat"><div class="stat-value">{{plan.proLicenseCount}}</div><div class="stat-legend"><span ng-show="plan.proLicenseCount === 1" translate="">common-header.purchase.review-subscription.display-included</span> <span ng-show="plan.proLicenseCount > 1" translate="">common-header.purchase.review-subscription.displays-included</span></div></div></div></div><hr class="u_remove-margin"><div class="text-center flex-additive-rule"><b>+</b></div><div class="row"><div class="col-xs-12 u_margin-md-bottom" translate="" translate-values="{ planName: plan.name, priceDisplayMonth: plan.monthly.priceDisplayMonth }">common-header.purchase.review-subscription.need-more-displays</div><div class="col-xs-12"><div class="input-group spinner" ng-class="{ \'has-error\': form.reviewSubscriptionForm.additionalLicenses.$invalid }"><div class="input-group-btn-vertical"><button class="btn btn-white" type="button" ng-click="incrementLicenses()"><i class="fa fa-caret-up"></i></button> <button class="btn btn-white" type="button" ng-click="decrementLicenses()"><i class="fa fa-caret-down"></i></button></div><label for="additionalLicenses"><input id="additionalLicenses" name="additionalLicenses" type="number" class="form-control" ng-model="plan.additionalDisplayLicenses" min="0" max="999" pattern="[0-9]{1,3}" tabindex="1" aria-required="true" required=""> <span class="icon-right u_align-middle" translate="">common-header.purchase.review-subscription.additional-licenses</span></label></div></div><div class="col-xs-12"><hr></div><div class="col-xs-12 u_margin-sm-bottom"><b class="pull-left" translate="">common-header.purchase.review-subscription.total</b> <b class="pull-right" translate="">common-header.purchase.review-subscription.pay-yearly</b></div><div class="col-xs-12"><div class="panel payment-recurrence-selector" ng-class="{ \'has-error\': form.reviewSubscriptionForm.billingPeriod.$invalid }"><div class="radio" ng-class="{ active: plan.isMonthly }"><label for="monthlyBilling"><input type="radio" name="billingPeriod" id="monthlyBilling" ng-value="true" ng-model="plan.isMonthly" aria-required="true" tabindex="1" required=""> <span translate="" translate-values="{ monthlyPrice: getMonthlyPrice() }">common-header.purchase.review-subscription.billed-monthly</span></label></div><div class="radio" ng-class="{ active: !plan.isMonthly }"><label for="yearlyBilling"><input type="radio" name="billingPeriod" id="yearlyBilling" ng-value="false" ng-model="plan.isMonthly" aria-required="true" tabindex="1" required=""> <span translate="" translate-values="{ yearlyPrice: getYearlyPrice() }">common-header.purchase.review-subscription.billed-yearly</span></label><div class="label label-success" translate="" translate-values="{ saveYearly: plan.yearly.save }">common-header.purchase.review-subscription.save-yearly</div></div></div></div></div><hr><div class="row"><div class="col-xs-12"><button id="continueButton" type="submit" aria-label="Continue to Billing Address" tabindex="1" form="form.reviewSubscriptionForm" class="btn btn-primary pull-right" ng-click="setNextStep()" translate="">common.continue</button></div></div></form></div>');
}])}(),function(e){try{e=angular.module("risevision.common.components.purchase-flow")}catch(t){e=angular.module("risevision.common.components.purchase-flow",[])}e.run(["$templateCache",function(e){e.put("purchase-flow/checkout-shipping-address.html",'<div id="checkout-shipping-address" class="address-editor"><form id="form.shippingAddressForm" role="form" class="u_margin-md-top" name="form.shippingAddressForm" autocomplete="on" novalidate=""><div class="alert alert-danger" ng-show="form.shippingAddressForm.$submitted && form.shippingAddressForm.$invalid">Please complete the missing information below.</div><div id="errorBox" class="alert alert-danger" role="alert" ng-show="shippingAddress.validationError"><strong>Address Validation Error</strong> {{shippingAddress.validationError}}</div><address-form form-object="form.shippingAddressForm" address-object="shippingAddress"></address-form><hr><div class="row"><div class="col-xs-12"><button id="backButton" aria-label="Go back to Billing Address" type="button" class="btn btn-default pull-left" ng-click="setPreviousStep()" ng-hide="finalStep" tabindex="2" translate="">common.back</button> <button id="continueButton" type="submit" form="form.shippingAddressForm" class="btn btn-primary pull-right" aria-label="Continue to Payment Method" ng-click="validateAddress(shippingAddress, null, true)" tabindex="1" translate="">common.continue</button></div></div></form></div>')}])}(),function(e){try{e=angular.module("risevision.common.components.purchase-flow")}catch(t){e=angular.module("risevision.common.components.purchase-flow",[])}e.run(["$templateCache",function(e){e.put("purchase-flow/checkout-success.html",'<div id="checkout-success"><h3 class="text-center u_margin-md-top" ng-if="purchase.paymentMethods.paymentMethod === \'card\'">Payment Successful</h3><h3 class="text-center u_margin-md-top" ng-if="purchase.paymentMethods.paymentMethod === \'invoice\'">Invoice Generated</h3><div class="text-center u_padding-md"><img src="https://s3.amazonaws.com/Rise-Images/Icons/online.svg" width="72px" alt="Payment Successful"><br><br><p ng-if="purchase.paymentMethods.paymentMethod === \'card\'">Your payment to Rise Vision was successful. You can keep track of your billing information in the <a ui-sref="apps.billing.home">Billing</a> section of your account.</p><p ng-if="purchase.paymentMethods.paymentMethod === \'invoice\'">An invoice for payment has been sent to <span class="font-weight-bold">{{purchase.contact.email}}</span>. Payment is due by {{purchase.paymentMethods.invoiceDate | date: \'d-MMM-yyyy\'}}. <span class="hidden">You can view this invoice <a href="#">here</a>.</span></p><br></div><hr><div class="row"><div class="col-xs-12 text-center"><button id="doneButton" class="btn btn-default" ng-click="close()" aria-label="Done" tabindex="1">Done</button></div></div></div>')}])}(),function(e){try{e=angular.module("risevision.common.components.purchase-flow")}catch(t){e=angular.module("risevision.common.components.purchase-flow",[])}e.run(["$templateCache",function(e){e.put("purchase-flow/purchase-modal.html",'<div rv-spinner="" rv-spinner-key="purchase-modal" rv-spinner-start-active="1"><div class="modal-header"><button type="button" class="close" ng-click="dismiss()" aria-label="close" tabindex="2" ng-hide="currentStep === 5"><i class="fa fa-times"></i></button><h3 class="modal-title" translate="">Checkout</h3></div><div class="steps"><div ng-repeat="step in PURCHASE_STEPS" class="step-item" ng-class="{ active: currentStep === step.index, complete: currentStep > step.index }"><span>{{step.name}}</span></div></div><div id="purchase-modal" class="modal-body checkout-modal" stop-event="touchend"><billing-address ng-if="currentStep === 0"></billing-address><shipping-address ng-if="currentStep === 1"></shipping-address><payment-methods ng-if="currentStep === 2"></payment-methods><review-purchase ng-if="currentStep === 3"></review-purchase><checkout-success ng-if="currentStep === 4"></checkout-success></div><div id="security-branding" class="modal-footer text-center" ng-show="currentStep > 2 && currentStep < 5"><span class="text-muted"><i class="fa fa-lock icon-left"></i> Secure Checkout from ChargeBee and <img alt="powered by Stripe" height="16" src="https://s3.amazonaws.com/Rise-Images/UI/powered_by_stripe.svg"></span></div></div>')}])}(),function(e){try{e=angular.module("risevision.common.components.purchase-flow")}catch(t){e=angular.module("risevision.common.components.purchase-flow",[])}e.run(["$templateCache",function(e){e.put("purchase-flow/tax-exemption.html",'<div rv-spinner="" rv-spinner-key="tax-exemption-modal" rv-spinner-start-active="1"><div class="modal-header"><button ng-click="close()" type="button" class="close" aria-hidden="true"><i class="fa fa-times"></i></button><h3 class="modal-title">Add Tax Exemption</h3></div><div class="modal-body"><form id="form.taxExemptionForm" role="form" name="form.taxExemptionForm" class="u_margin-md-top" novalidate=""><div class="alert alert-danger" ng-show="form.taxExemptionForm.$submitted && form.taxExemptionForm.$invalid">Please complete the missing information below.</div><div class="alert alert-danger" ng-show="factory.taxExemptionError">{{factory.taxExemptionError}}</div><div class="row"><div class="col-xs-12"><div class="form-group" ng-class="{ \'has-error\': isFieldInvalid(\'number\') }"><label for="number" class="control-label">Tax Exemption Number *</label> <input name="number" id="number" type="text" class="form-control" ng-model="factory.taxExemption.number" tabindex="1" maxlength="25" required=""></div></div></div><div class="row"><div class="col-md-9"><div class="form-group" ng-class="{ \'has-error\': isFieldInvalid(\'fileName\') }"><label for="fileName" class="control-label">Tax Exemption Document (Image or PDF only) *</label> <input id="inputExemption" type="file" accept="application/pdf,image/*" onchange="angular.element(this).scope().setFile(this)" style="display:none"><div class="input-group"><input name="fileName" id="fileName" class="form-control" type="text" readonly="readonly" ng-model="factory.taxExemption.file.name" required=""> <span class="input-group-btn"><a href="#" ng-click="clearFile()" tabindex="1" class="btn btn-default"><i class="fa fa-times"></i></a></span></div></div></div><div class="col-md-3"><div class="form-group"><label for="selectFile" class="control-label col-md-6 hidden-xs">&nbsp;</label> <button name="selectFile" id="selectFile" type="button" ng-click="selectFile()" tabindex="1" class="btn btn-default col-md-9">Attach File</button></div></div></div><hr><div class="row"><div class="col-xs-12"><button type="button" ng-click="close()" aria-label="Cancel Tax Exemption" tabindex="2" class="btn btn-default pull-left" translate="">common.cancel</button> <button id="submitButton" type="submit" form="form.taxExemptionForm" ng-click="submit()" aria-label="Submit Tax Exemption" tabindex="1" class="btn btn-primary pull-right">Submit Tax Exemption</button></div></div></form></div></div>')}])}(),function(e){try{e=angular.module("risevision.common.components.purchase-flow")}catch(t){e=angular.module("risevision.common.components.purchase-flow",[])}e.run(["$templateCache",function(e){e.put("purchase-flow/year-selector.html",'<select ng-options="n as n for n in years"><option ng-show="false" value="">&lt; Select Year &gt;</option></select>')}])}(),function(e){"use strict";try{e.module("risevision.common.config")}catch(t){e.module("risevision.common.config",[])}e.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json"),e.module("risevision.common.config").value("ENABLE_EXTERNAL_LOGGING",!0).value("CORE_URL","https://rvaserver2.appspot.com/_ah/api").value("COOKIE_CHECK_URL","//storage-dot-rvaserver2.appspot.com").value("STORE_URL","https://store.risevision.com/").value("STORE_SERVER_URL","https://store-dot-rvaserver2.appspot.com/").value("STORE_ENDPOINT_URL","https://store-dot-rvaserver2.appspot.com/_ah/api").value("STORAGE_ENDPOINT_URL","https://storage-dot-rvaserver2.appspot.com/_ah/api").value("GSFP_URL","https://gsfp-dot-rvaserver2.appspot.com/fp").value("APPS_URL","https://apps.risevision.com").value("CHARGEBEE_TEST_SITE","risevision-test").value("CHARGEBEE_PROD_SITE","risevision").value("CHARGEBEE_PLANS_USE_PROD","true").value("STRIPE_PROD_KEY","pk_live_31dWkTWQU125m2RcWpK4HQBR").value("STRIPE_TEST_KEY","pk_test_GrMIAHSoqhaik4tcHepsxjOR")}(angular);