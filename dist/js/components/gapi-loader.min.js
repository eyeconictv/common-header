"use strict";var gapiLoadingStatus=null,handleClientJSLoad=function(){gapiLoadingStatus="loaded",console.debug("ClientJS is loaded.");var e=document.createEvent("Events");e.initEvent("gapi.loaded",!0,!0),window.dispatchEvent(e)};angular.module("risevision.common.gapi",[]).value("CLIENT_ID","614513768474.apps.googleusercontent.com").value("OAUTH2_SCOPES","profile").factory("gapiLoader",["$q","$window",function(e,a){var r=e.defer();return function(){var e;if("loaded"===a.gapiLoadingStatus)r.resolve(a.gapi);else if(!a.gapiLoadingStatus){a.gapiLoadingStatus="loading";var t=a.gapiSrc||"//apis.google.com/js/api.js?onload=handleClientJSLoad",o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("src",t),"undefined"!=typeof o&&document.getElementsByTagName("body")[0].appendChild(o),e=function(){r.resolve(a.gapi),a.removeEventListener("gapi.loaded",e,!1)},a.addEventListener("gapi.loaded",e,!1)}return r.promise}}]).factory("gapiClientLoaderGenerator",["$q","clientAPILoader","$log",function(e,a,r){return function(t,o,n){return function(){var i=e.defer();return a().then(function(e){e.client[t]?i.resolve(e.client[t]):e.client.load.apply(this,[t,o].concat([function(){if(e.client[t])r.debug(t+"."+o+" Loaded"),i.resolve(e.client[t]);else{var a=t+"."+o+" Load Failed";r.error(a),i.reject(a)}},n]))}),i.promise}}}]).factory("auth2APILoader",["$q","gapiLoader","$log","CLIENT_ID","OAUTH2_SCOPES",function(e,a,r,t,o){return function(){var n=e.defer();return a().then(function(e){e.auth2&&e.auth2.getAuthInstance()?n.resolve(e.auth2):e.load("auth2",function(){if(e.auth2)e.auth2.init({client_id:t,scope:o}).then(function(){r.debug("auth2 API Loaded"),n.resolve(e.auth2)},function(){var e="auth2 GoogleAuth Init Failed";r.error(e),n.reject(e)});else{var a="auth2 API Load Failed";r.error(a),n.reject(a)}})}),n.promise}}]).factory("clientAPILoader",["$q","gapiLoader","$log",function(e,a,r){return function(){var t=e.defer();return a().then(function(e){e.client?t.resolve(e):e.load("client",function(){if(e.client)r.debug("client API Loaded"),t.resolve(e);else{var a="client API Load Failed";r.error(a),t.reject(a)}})}),t.promise}}]).factory("oauth2APILoader",["gapiClientLoaderGenerator",function(e){return e("oauth2","v2")}]).factory("coreAPILoader",["CORE_URL","gapiClientLoaderGenerator","$location",function(e,a,r){var t=r.search().core_api_base_url?r.search().core_api_base_url+"/_ah/api":e;return a("core","v1",t)}]).factory("riseAPILoader",["CORE_URL","gapiClientLoaderGenerator","$location",function(e,a,r){var t=r.search().core_api_base_url?r.search().core_api_base_url+"/_ah/api":e;return a("rise","v0",t)}]).factory("storeAPILoader",["STORE_ENDPOINT_URL","gapiClientLoaderGenerator","$location",function(e,a,r){var t=r.search().store_api_base_url?r.search().store_api_base_url+"/_ah/api":e;return a("store","v0.01",t)}]).factory("storageAPILoader",["STORAGE_ENDPOINT_URL","gapiClientLoaderGenerator","$location",function(e,a,r){var t=r.search().storage_api_base_url?r.search().storage_api_base_url+"/_ah/api":e;return a("storage","v0.01",t)}]).factory("discoveryAPILoader",["CORE_URL","gapiClientLoaderGenerator","$location",function(e,a,r){var t=r.search().core_api_base_url?r.search().core_api_base_url+"/_ah/api":e;return a("discovery","v1",t)}]).factory("monitoringAPILoader",["MONITORING_SERVICE_URL","gapiClientLoaderGenerator","$location",function(e,a,r){var t=r.search().core_api_base_url?r.search().core_api_base_url+"/_ah/api":e;return a("monitoring","v0",t)}]);