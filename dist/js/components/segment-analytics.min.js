!function(t){"use strict";t.module("risevision.common.components.analytics",[]).value("SEGMENT_API_KEY","AFtY3tN10BQj6RbnfpDDp9Hx8N1modKN").value("GA_LINKER_USE_ANCHOR",!0).factory("segmentAnalytics",["$rootScope","$window","$log","$location","GA_LINKER_USE_ANCHOR",function(t,e,n,i,a){function o(t){t&&(e.intercomSettings=e.intercomSettings||{},e.intercomSettings.widget={activator:"#IntercomDefaultWidget"})}function r(){t.$on("$viewContentLoaded",function(){if(s.location!==i.path()){s.location=i.path();var t={};t.url=i.path(),t.path=i.path(),i.search().nooverride&&(t.referrer=""),s.page(t)}})}var c,s={};e.analytics=e.analytics||[];var m=e.analytics;m.SNIPPET_VERSION="4.0.0",m.factory=function(t){function a(e,n){"track"===t&&n&&n.length>1&&n[1]&&"object"==typeof n[1]&&(n[1].url=i.host())}return function(){var i=Array.prototype.slice.call(arguments);return a(t,i),i.unshift(t),e.analytics.push(i),n.debug("Segment Tracker",i),e.analytics}},m.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];for(var l=0;l<m.methods.length;l++){var p=m.methods[l];s[p]=m.factory(p)}return s.ready(function(){var t=e.ga;t("require","linker"),t("linker:autoLink",["community.risevision.com","store.risevision.com","help.risevision.com","apps.risevision.com","risevision.com","preview.risevision.com","rva.risevision.com"],a)}),s.load=function(t,e){if(t&&!c){o(e),r();var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i),c=!0}},s}]).factory("analyticsEvents",["$rootScope","segmentAnalytics","userState",function(t,e,n){var i={};return i.identify=function(){if(n.getUsername()){var t=n.getCopyOfProfile(),i={email:t.email,firstName:t.firstName?t.firstName:"",lastName:t.lastName?t.lastName:""};n.getUserCompanyId()&&(i.companyId=n.getUserCompanyId(),i.companyName=n.getUserCompanyName(),i.company={id:n.getUserCompanyId(),name:n.getUserCompanyName()}),e.identify(n.getUsername(),i)}},i.initialize=function(){t.$on("risevision.user.authorized",function(){i.identify()})},i}])}(angular);